<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>UEæ€§èƒ½ä¼˜åŒ–å·¥å…· | æœ‰ç‚¹ç¬¨æœ‰ç‚¹çŒª</title><meta name="author" content="Davids"><meta name="copyright" content="Davids"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="CPUUnreal InsightUnreal InsightsÂ åœ¨ Unreal Engine 4.24.3ç‰ˆæœ¬ä¸­å¼€å§‹æ”¯æŒç§»åŠ¨å¹³å°æ€§èƒ½æ•°æ®å½•å–ã€‚æ•°æ®ç›´æ¥å†™å…¥æ–‡ä»¶ï¼ŒGUIå·¥å…·é‡‡é›†ç»“æŸåç¦»çº¿è§£ææ•°æ®æ–‡ä»¶ã€‚ ä¼˜åŠ¿ï¼šå¯é•¿æ—¶é—´å½•åˆ¶æ•°æ®ï¼Œæ•°æ®åœ¨æ—¶é—´è½´ä¸Šä»¥è¿›ç¨‹è°ƒåº¦çš„å½¢å¼å±•ç¤ºï¼Œæ¯”è¾ƒå®¹æ˜“åˆ†æGameã€RenderThreadä¸WorkerThreadçš„è°ƒåº¦æƒ…å†µï¼Œä»æ•´ä½“ä¸Šç»“åˆæ—¶é—´è¿è´¯æ€§å¯¹CPUç“¶é¢ˆè¿›è¡Œåˆæ­¥çš„å®šä½ã€‚ä¹Ÿ"><meta property="og:type" content="article"><meta property="og:title" content="UEæ€§èƒ½ä¼˜åŒ–å·¥å…·"><meta property="og:url" content="https://hustjjd.github.io/2025/01/04/Unreal%20Engine/Profile/UE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7/index.html"><meta property="og:site_name" content="æœ‰ç‚¹ç¬¨æœ‰ç‚¹çŒª"><meta property="og:description" content="CPUUnreal InsightUnreal InsightsÂ åœ¨ Unreal Engine 4.24.3ç‰ˆæœ¬ä¸­å¼€å§‹æ”¯æŒç§»åŠ¨å¹³å°æ€§èƒ½æ•°æ®å½•å–ã€‚æ•°æ®ç›´æ¥å†™å…¥æ–‡ä»¶ï¼ŒGUIå·¥å…·é‡‡é›†ç»“æŸåç¦»çº¿è§£ææ•°æ®æ–‡ä»¶ã€‚ ä¼˜åŠ¿ï¼šå¯é•¿æ—¶é—´å½•åˆ¶æ•°æ®ï¼Œæ•°æ®åœ¨æ—¶é—´è½´ä¸Šä»¥è¿›ç¨‹è°ƒåº¦çš„å½¢å¼å±•ç¤ºï¼Œæ¯”è¾ƒå®¹æ˜“åˆ†æGameã€RenderThreadä¸WorkerThreadçš„è°ƒåº¦æƒ…å†µï¼Œä»æ•´ä½“ä¸Šç»“åˆæ—¶é—´è¿è´¯æ€§å¯¹CPUç“¶é¢ˆè¿›è¡Œåˆæ­¥çš„å®šä½ã€‚ä¹Ÿ"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg"><meta property="article:published_time" content="2025-01-04T07:19:42.000Z"><meta property="article:modified_time" content="2025-08-09T13:42:14.404Z"><meta property="article:author" content="Davids"><meta property="article:tag" content="Game AI"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "UEæ€§èƒ½ä¼˜åŒ–å·¥å…·",
  "url": "https://hustjjd.github.io/2025/01/04/Unreal%20Engine/Profile/UE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7/",
  "image": "https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg",
  "datePublished": "2025-01-04T07:19:42.000Z",
  "dateModified": "2025-08-09T13:42:14.404Z",
  "author": [
    {
      "@type": "Person",
      "name": "Davids",
      "url": "https://hustjjd.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/favicon.ico"><link rel="canonical" href="https://hustjjd.github.io/2025/01/04/Unreal%20Engine/Profile/UE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="../../../../../../css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach(([e,t])=>n.setAttribute(e,t)),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),getCSS:(e,t)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=t,btf.activateLightMode=o;const a=e.get("theme");"dark"===a?t():"light"===a&&o();const n=e.get("aside-status");void 0!==n&&document.documentElement.classList.toggle("hide-aside","hide"===n);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,top_n_per_article:-1,unescape:!0,languages:{hits_empty:"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hits_stats:"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!1},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶å¤±è´¥",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:{limitCount:150,languages:{author:"ä½œè€…: Davids",link:"é“¾æ¥: ",source:"æ¥æº: æœ‰ç‚¹ç¬¨æœ‰ç‚¹çŒª",info:"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},lightbox:"null",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"åŠ è½½æ›´å¤š"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"UEæ€§èƒ½ä¼˜åŒ–å·¥å…·",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><script>(()=>{const e=document.getElementById("loading-box"),d=document.body,o=()=>{e.classList.contains("loaded")||(d.style.overflow="",e.classList.add("loaded"))},t=()=>{d.style.overflow="hidden",e.classList.remove("loaded")};t(),"complete"===document.readyState?o():(window.addEventListener("load",o),document.addEventListener("DOMContentLoaded",o),setTimeout(o,7e3)),btf.addGlobalFn("pjaxSend",t,"preloader_init"),btf.addGlobalFn("pjaxComplete",o,"preloader_end")})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/404.jpg"' alt="avatar"></div><div class="site-data text-center"><a href="archives/"><div class="headline">æ–‡ç« </div><div class="length-num">123</div></a><a href="tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">60</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="index.html"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´çº¿</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i> <span>ä¼‘é—²</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/HUSTJJD/photos/background.webp)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="../../../../../../index.html"><span class="site-name">æœ‰ç‚¹ç¬¨æœ‰ç‚¹çŒª</span></a><a class="nav-page-title" href="../../../../../../index.html"><span class="site-name">UEæ€§èƒ½ä¼˜åŒ–å·¥å…·</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="index.html"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´çº¿</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i> <span>ä¼‘é—²</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">UEæ€§èƒ½ä¼˜åŒ–å·¥å…·</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-01-04T07:19:42.000Z" title="å‘è¡¨äº 2025-01-04 15:19:42">2025-01-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-08-09T13:42:14.404Z" title="æ›´æ–°äº 2025-08-09 21:42:14">2025-08-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="../../../../../../categories/Unreal-Engine/">Unreal Engine</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="../../../../../../categories/Unreal-Engine/Profile/">Profile</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">15.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>56åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1><span id="cpu">CPU</span></h1><h2><span id="unreal-insight">Unreal Insight</span></h2><p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Engine/Performance/UnrealInsights/Overview/index.html">Unreal Insights</a>Â åœ¨ Unreal Engine 4.24.3ç‰ˆæœ¬ä¸­å¼€å§‹æ”¯æŒç§»åŠ¨å¹³å°æ€§èƒ½æ•°æ®å½•å–ã€‚æ•°æ®ç›´æ¥å†™å…¥æ–‡ä»¶ï¼ŒGUIå·¥å…·é‡‡é›†ç»“æŸåç¦»çº¿è§£ææ•°æ®æ–‡ä»¶ã€‚</p><p>ä¼˜åŠ¿ï¼šå¯é•¿æ—¶é—´å½•åˆ¶æ•°æ®ï¼Œæ•°æ®åœ¨æ—¶é—´è½´ä¸Šä»¥è¿›ç¨‹è°ƒåº¦çš„å½¢å¼å±•ç¤ºï¼Œæ¯”è¾ƒå®¹æ˜“åˆ†æGameã€RenderThreadä¸WorkerThreadçš„è°ƒåº¦æƒ…å†µï¼Œä»æ•´ä½“ä¸Šç»“åˆæ—¶é—´è¿è´¯æ€§å¯¹CPUç“¶é¢ˆè¿›è¡Œåˆæ­¥çš„å®šä½ã€‚ä¹Ÿå¯ç”¨äºåˆ†ææœ‰è§„å¾‹çš„å¡é¡¿æ‰å¸§çš„æƒ…å†µã€‚</p><p>åŠ£åŠ¿ï¼šæ‰€è®°å½•çš„è°ƒç”¨å †æ ˆè¾ƒæµ…ï¼ˆå¯æ‰‹åŠ¨æ‰“ç‚¹ï¼‰ï¼Œè¾ƒéš¾å®šä½åˆ°å…·ä½“å‡ºé—®é¢˜çš„ä»£ç ï¼Œäººå·¥åˆ†æéœ€è¦æ—¶é—´ä¸ç»éªŒã€‚</p><h2><span id="unreal-profiler">Unreal Profiler</span></h2><blockquote><p>UE5å·²åˆ é™¤æ­¤æ¨¡å—ï¼Œå»ºè®®ä½¿ç”¨ Unreal Insights</p></blockquote><p>Unreal Engine ä¸­çš„Â <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/en-US/TestingAndOptimization/PerformanceAndProfiling/Profiler/">Profiler</a>åˆ™æ˜¯åˆ†æCPUç«¯æ€§èƒ½æƒ…å†µçš„ä¸€ä¸ªè€å·¥å…·ï¼Œä¸Unreal Insightsç›¸æ¯”å®ƒç¼ºå°‘äº†çº¿ç¨‹é—´è°ƒåº¦æƒ…å†µçš„æ•°æ®ï¼Œä¼˜ç‚¹åœ¨äºå…¶è®°å½•çš„è°ƒç”¨å †æ ˆæ·±åº¦è¾ƒæ·±ï¼Œå¯ä¸Insightsç»“åˆä½¿ç”¨ UE4å¼•æ“çª—å£ä¸­èœå•DeveloperToolsä¸‹SessionFrontendç•Œé¢å³ä¸ºProfileræ‰€åœ¨çš„çª—å£ å¯é€šè¿‡ä¸¤ç§æ–¹æ³•æŠ“å–æ•°æ®ï¼š</p><ol><li>å¯åŠ¨ç¨‹åºæ—¶å¢åŠ å‚æ•°ï¼š-messaging</li><li>æ¸¸æˆä¸­ä½¿ç”¨å‘½ä»¤ï¼š stat startfile, stat stopfile</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sdcard/UE4Game/YourProject/UE4CommandLine.txt ../../../YourProject/YourProject.uproject -messaging # æ•°æ®å­˜æ”¾äº /sdcard/UE4Game/FPSDemo/FPSDemo/Saved/Profiling/UnrealStats</span><br></pre></td></tr></table></figure><p>é€šè¿‡Profileræ•°æ®å°±èƒ½çœ‹åˆ°æ›´æ·±çš„è°ƒç”¨å †æ ˆï¼Œæ¯”å¦‚è¿™é‡Œå°±èƒ½çœ‹åˆ°GameEngine::Tickä¸­ä¸åŒä»£ç çš„å ç”¨æ¯”ä¾‹ï¼Œå·¦ä¾§è¿˜æœ‰æŒ‰ç±»å‹åˆ†ç±»çš„åˆ†ç»„æ•°æ®ç­‰ï¼Œæ›´å¤šåŠŸèƒ½å¯å‚è€ƒUnreal<a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/en-US/TestingAndOptimization/PerformanceAndProfiling/Profiler/">å®˜æ–¹æ–‡æ¡£</a></p><h2><span id="simpleperf">Simpleperf</span></h2><p>Simpleperfå¯å½•åˆ¶å¾ˆæ·±çš„CPUè°ƒç”¨å †æ ˆï¼Œå¯ç”¨äºè¯¦ç»†åˆ†æé—®é¢˜æ—¶é—´å†…çš„CPUä»£ç æ‰§è¡Œæƒ…å†µï¼Œå…¶å°†æ•°æ®èšåˆï¼Œè¾“å‡ºç±»ä¼¼äºInstrument TimeProfilerçš„å½¢å¼ï¼Œå¯ä»¥çœ‹åˆ°ä¸åŒå‡½æ•°åœ¨ä¸€æ®µæ—¶é—´å†…çš„è´¡çŒ®ã€å æ¯”æƒ…å†µï¼ŒåŠè°ƒç”¨æ¬¡æ•°ï¼Œæ–¹ä¾¿å¯¹å…¶è¿›è¡Œæ›´æœ‰é’ˆå¯¹æ€§çš„ä¼˜åŒ–ã€‚ä½†è¿™ç§èšåˆæ¨¡å¼æ²¡æœ‰å•å¸§çš„æ¦‚å¿µï¼Œä¸»è¦ç”¨äºå®è§‚ç»Ÿè®¡ã€‚å› æ­¤å¯ä»¥ä¸Profilerã€Insightsç­‰å·¥å…·ç»“åˆä½¿ç”¨ã€‚</p><blockquote><p>å»ºè®®ä½¿ç”¨TeståŒ…è¿›è¡Œæ•°æ®åˆ†æ<br>é¿å…Developmentç‰ˆæœ¬é¢å¤–ä»£ç æ‰€é€ æˆçš„æ€§èƒ½å‹åŠ›å½±å“çœŸå®æ•°æ®</p></blockquote><p>åŸç†ç®€ä»‹ï¼š</p><p>ä¸Instrument TimeProfilerç›¸åŒï¼Œä½¿ç”¨<a target="_blank" rel="noopener" href="https://jvns.ca/blog/2016/03/12/how-does-perf-work-and-some-questions/">é‡‡æ ·</a>çš„æ¦‚å¿µè¿›è¡ŒCPUæ•°æ®åˆ†æ ç°ä»£CPUæ‹¥æœ‰<a target="_blank" rel="noopener" href="https://developer.arm.com/documentation/ddi0433/c/performance-monitoring-unit/about-the-performance-monitoring-unit?lang=en">PMUï¼ˆPerformance Monitor Unitï¼‰</a>å•å…ƒï¼Œé€šè¿‡Counterå¯„å­˜å™¨å¯å¾—åˆ°ç²¾ç¡®çš„Cycle Countç­‰CPU Performanceæ•°æ®</p><p><a target="_blank" rel="noopener" href="https://android.googlesource.com/platform/system/extras/+/master/simpleperf/doc/README.md">simpleperf</a>åŸºäºlinuxçš„<a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man2/perf_event_open.2.html">perf</a>æ”¹é€ è€Œæ¥ï¼Œè¦è®°å½•ä¸ä»£ç ç›¸å…³çš„æ€§èƒ½æ•°æ®ï¼Œå°±éœ€è¦è®°å½•ç›®æ ‡çº¿ç¨‹çš„<a target="_blank" rel="noopener" href="https://github.com/torvalds/linux/blob/v4.3/arch/x86/kernel/perf_regs.c#L114-L118">å¯„å­˜å™¨</a>Â å› æ­¤å­˜å‚¨å¯„å­˜å™¨æ•°æ®å°±æ˜¯é‡‡æ ·çš„ä¸»è¦å·¥ä½œä¹‹ä¸€ï¼Œå­˜å‚¨çš„é¢‘ç‡å°±æ˜¯é‡‡æ ·çš„é¢‘ç‡ï¼Œé‡‡æ ·çš„é¢‘ç‡ä¸èƒ½å¤ªé«˜ï¼Œæ˜¯ä¸ºäº†æ€§èƒ½ä¸å­˜å‚¨çš„è§’åº¦è€ƒè™‘çš„ ç†è®ºä¸Šæ•°æ®é‡è¶Šå¤§ï¼ŒåŸºäºé‡‡æ ·çš„æ•°æ®ç»è¿‡ç»Ÿè®¡å­¦å¤„ç†åå°±è¶Šæ¥è¿‘çœŸå®æ•°æ®</p><p>å¯é€šè¿‡NDKä¸­çš„å·¥å…·è¿›è¡ŒçœŸæœºæ•°æ®å½•åˆ¶ï¼ŒUE427å»ºè®®ä½¿ç”¨ NDK r21d ç‰ˆæœ¬</p><p>é€šè¿‡ä¸‹æ–¹Pythonè„šæœ¬å³å¯è‡ªåŠ¨é‡‡é›†å¹¶ç”Ÿæˆç«ç„°å›¾ä¸Android Studioå¯æ‰“å¼€çš„Perfæ•°æ®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python simpleperf.py ndkpath symbolpath/symbolfile -duration=10[optional] -app=com.tencent.dummy[optional]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> fnmatch</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parseargs</span>(<span class="params">args</span>):</span><br><span class="line">    ndkpath_ = args[<span class="number">1</span>]</span><br><span class="line">    symbolpath_ = args[<span class="number">2</span>]</span><br><span class="line">    app_ = <span class="string">&#x27;com.tencent.dummy&#x27;</span></span><br><span class="line">    duration_ = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">len</span>(args) &gt; <span class="number">2</span>):</span><br><span class="line">        <span class="keyword">for</span> arg <span class="keyword">in</span> args[<span class="number">3</span>:]:</span><br><span class="line">            words_ = arg.split(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">len</span>(words_) &lt; <span class="number">2</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> (words_[<span class="number">0</span>] == <span class="string">&#x27;-duration&#x27;</span>):</span><br><span class="line">                duration_ = <span class="built_in">int</span>(words_[<span class="number">1</span>])</span><br><span class="line">            <span class="keyword">elif</span> (words_[<span class="number">0</span>] == <span class="string">&#x27;-app&#x27;</span>):</span><br><span class="line">                app_ = words_[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ndkpath_, symbolpath_, app_, duration_</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_files</span>(<span class="params">directory, pattern</span>):</span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(directory):</span><br><span class="line">        <span class="keyword">for</span> basename <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> fnmatch.fnmatch(basename, pattern):</span><br><span class="line">                filename = os.path.join(root, basename)</span><br><span class="line">                <span class="keyword">yield</span> filename</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">readforpackagename</span>(<span class="params">filepath, packagename</span>):</span><br><span class="line">    perftxt_ = <span class="built_in">open</span>(filepath, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (perftxt_ <span class="keyword">is</span> <span class="literal">None</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;failed to read file &#123;0&#125;!&#x27;</span>.<span class="built_in">format</span>(filepath))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    lines_ = perftxt_.readlines()</span><br><span class="line">    perftxt_.close()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Android 10</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines_[<span class="number">1</span>:]:</span><br><span class="line">        <span class="keyword">match</span> = re.search(<span class="string">&#x27;/data/app/&#x27;</span> + packagename + <span class="string">&#x27;\\S+&#x27;</span>, line)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">match</span>.group(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Android 11</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines_[<span class="number">1</span>:]:</span><br><span class="line">        <span class="keyword">match</span> = re.search(<span class="string">&#x27;/data/app/\\S+&#x27;</span> + packagename + <span class="string">&#x27;\\S+&#x27;</span>, line)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">match</span>.group(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">args</span>):</span><br><span class="line">    ndkpath_, symbolpath_, app_, duration_ = parseargs(args)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (os.path.isfile(symbolpath_) <span class="keyword">is</span> <span class="literal">False</span>):</span><br><span class="line">        <span class="keyword">for</span> possiblesymbol <span class="keyword">in</span> find_files(symbolpath_, <span class="string">&#x27;*.so&#x27;</span>):</span><br><span class="line">            symbolpath_ = possiblesymbol</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ndk: &#123;0&#125;\nsymobl: &#123;1&#125;\napp: &#123;2&#125;\nduration: &#123;3&#125;\n&#x27;</span>.<span class="built_in">format</span>(ndkpath_, symbolpath_, app_, duration_))</span><br><span class="line"></span><br><span class="line">    perfpath_ = ndkpath_ + <span class="string">&#x27;/simpleperf/bin/android/arm64/simpleperf&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (os.path.isfile(perfpath_) <span class="keyword">is</span> <span class="literal">False</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;file &#123;0&#125; not found!&#x27;</span>.<span class="built_in">format</span>(perfpath_))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># push simplerperf executable to mobile</span></span><br><span class="line">    subprocess.call(<span class="string">&#x27;adb push &#x27;</span> + perfpath_ + <span class="string">&#x27; /data/local/tmp&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># setup simpleperf permission</span></span><br><span class="line">    subprocess.call(<span class="string">&#x27;adb shell chmod a+x /data/local/tmp/simpleperf&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># fix &#x27;too many open files&#x27; error</span></span><br><span class="line">    subprocess.call(<span class="string">&#x27;adb shell ulimit -n 2048&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># -f 6000, higher sampling frequency for more accurate profiling</span></span><br><span class="line">    subprocess.call(</span><br><span class="line">        <span class="string">&#x27;adb shell \&quot;cd /data/local/tmp/ &amp;&amp; simpleperf record -g --app &#123;0&#125; --duration &#123;1&#125; -f 6000 &amp; exit\&quot;&#x27;</span>.<span class="built_in">format</span>(app_, duration_), shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># pull perf.data</span></span><br><span class="line">    subprocess.call(<span class="string">&#x27;adb pull /data/local/tmp/perf.data perf.data&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    perfexe_ = ndkpath_ + <span class="string">&#x27;/simpleperf/bin/windows/x86_64/simpleperf.exe&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (os.path.isfile(perfexe_) <span class="keyword">is</span> <span class="literal">False</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;file &#123;0&#125; not found!&#x27;</span>.<span class="built_in">format</span>(perfexe_))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># setup binary_cache folder</span></span><br><span class="line">    subprocess.call(perfexe_ + <span class="string">&#x27; report -i perf.data -o perf.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    packagename_ = readforpackagename(<span class="string">&#x27;perf.txt&#x27;</span>, app_)</span><br><span class="line">    <span class="keyword">if</span> packagename_ == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;package &#123;0&#125; not found!&#x27;</span>.<span class="built_in">format</span>(app_))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;package name: &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(packagename_))</span><br><span class="line"></span><br><span class="line">    bianrycachepath_ = ndkpath_ + <span class="string">&#x27;/simpleperf/binary_cache/&#x27;</span> + packagename_.replace(<span class="string">&#x27;libUE4.so&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;package name: &#123;0&#125;\nbinary cache: &#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(packagename_, bianrycachepath_))</span><br><span class="line"></span><br><span class="line">    shutil.rmtree(ndkpath_ + <span class="string">&#x27;/simpleperf/binary_cache/&#x27;</span>, ignore_errors=<span class="literal">True</span>)</span><br><span class="line">    os.makedirs(bianrycachepath_)</span><br><span class="line"></span><br><span class="line">    shutil.copy2(symbolpath_, bianrycachepath_)</span><br><span class="line"></span><br><span class="line">    curfolder_ = os.path.abspath(os.getcwd())</span><br><span class="line"></span><br><span class="line">    subprocess.call(perfexe_ + <span class="string">&#x27; report -i perf.data -o perf.caller.txt -g caller -n --full-callgraph --symfs &#x27;</span> + ndkpath_ + <span class="string">&#x27;/simpleperf/binary_cache/&#x27;</span>)</span><br><span class="line">    subprocess.call(perfexe_ + <span class="string">&#x27; report -i perf.data -o perf.callee.txt -g callee -n --full-callgraph --symfs &#x27;</span> + ndkpath_ + <span class="string">&#x27;/simpleperf/binary_cache/&#x27;</span>)</span><br><span class="line">    subprocess.call(<span class="string">&#x27;python report_html.py -i &#123;0&#125;/perf.data -o &#123;0&#125;/perf.html --no_browser&#x27;</span>.<span class="built_in">format</span>(curfolder_, curfolder_), cwd=ndkpath_+<span class="string">&#x27;/simpleperf/&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># convert perf.data to Android Studio openable perf.trace</span></span><br><span class="line">    subprocess.call(perfexe_ + <span class="string">&#x27; report-sample --protobuf --show-callchain -i perf.data -o perf.trace&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) &lt;= <span class="number">1</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Usage: python simpleperf.py `ndk path` `libUE4.so symbol path` -app=com.tencent.dummy[optional] -duration=10[optional, in seconds]&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    start(sys.argv)</span><br></pre></td></tr></table></figure><h3><span id="android-studio">Android Studio</span></h3><p>ä½¿ç”¨Android Studioçš„Â <a target="_blank" rel="noopener" href="https://developer.android.com/studio/profile/apk-profiler">ProfileAPK</a>Â åŠŸèƒ½ï¼Œå³å¯è¾ƒä¸ºè‡ªåŠ¨çš„ç”Ÿæˆæ€§èƒ½æ•°æ®</p><h3><span id="perfetto">Perfetto</span></h3><p><a target="_blank" rel="noopener" href="https://perfetto.dev/">https://perfetto.dev/</a></p><p>å¯ä»¥æ‹¿åˆ°simpleperfã€systraceç­‰æ•°æ®</p><p>å¯ç”¨äºåˆ†æAPPã€ç³»ç»Ÿæ•´ä½“CPUè°ƒåº¦ï¼Œæ¸²æŸ“èŠ‚å¥ç­‰é—®é¢˜</p><h2><span id="cachesim">CacheSim</span></h2><p>è™šå¹»å¼•æ“è®¾è®¡æˆç†Ÿï¼Œæ ¸å¿ƒä»£ç æµç¨‹ä¸Šï¼Œç®—æ³•ã€ç»“æ„å±‚é¢çš„ä¼˜åŒ–å·²éš¾ä»¥æŒ–æ˜æ°´åˆ†</p><p>å¯¹äºä¸€äº›è‡ªè¡Œå®ç°æˆ–å¼•æ“è‡ªèº«æ¨¡å—ï¼Œåœ¨ç®—æ³•å±‚é¢æ— ä¼˜åŒ–æ‰‹æ®µåï¼Œå¯é’ˆå¯¹æ€§çš„è¿›è¡ŒCacheä¼˜åŒ–</p><p>ä½¿ç”¨è½¯ä»¶æ¨¡æ‹ŸAMD CPUæŒ‡ä»¤é›†ï¼Œç»Ÿè®¡å‡ºå‡ºç°Cache Missçš„<strong>ä»£ç è¡Œ</strong>ï¼ŒåŠ©åŠ›æ·±åº¦CPUæ€§èƒ½åˆ†æ</p><p>ç¼ºç‚¹ï¼šä»…å¯åœ¨Windowsã€Linuxå¹³å°è¿›è¡Œè½¯ä»¶æ¨¡æ‹Ÿ</p><p>[æŒ¤æ‰Cache Missçš„æ°´åˆ†ï¼šCascadeç²’å­ç³»ç»Ÿçš„ä¼˜åŒ–ï¼ˆä¸€ï¼‰]</p><p>[GDC2017 | Cold, Hard Cache: Insomniacâ€™s Cache Simulator]</p><h2><span id="arm-streamline">Arm Streamline</span></h2><p><a target="_blank" rel="noopener" href="https://developer.arm.com/Tools%20and%20Software/Arm%20Mobile%20Studio">Arm Mobile Studio 2022</a>ç‰ˆæœ¬é™¤äº†å¸¸è§CPU Counterçš„é‡‡é›†ä¹‹å¤–ï¼Œä¸CacheSimä¸€æ ·æ”¯æŒäº†é’ˆå¯¹ä»£ç è¡Œçš„Cacheåˆ†æ</p><p>ä¼˜åŠ¿ï¼šçœŸæœºè·‘æ•°æ®ï¼Œç¡¬ä»¶Counteræ›´å‡†ç¡®ï¼Œå‚è€ƒä»·å€¼æ›´é«˜</p><p><a target="_blank" rel="noopener" href="https://developer.arm.com/Tools%20and%20Software/Streamline%20Performance%20Analyzer">Arm Streamline Performance Analyzer</a>Â æ”¯æŒé‡‡é›†ArmèŠ¯ç‰‡çš„GPUã€CPU Counteræ•°æ®ï¼Œæ”¯æŒCI å¹¶æ”¯æŒç»“åˆEventé‡‡æ ·ï¼Œå°†Counteræ•°æ®ä¸æºç å»ºç«‹è”ç³»Â <a target="_blank" rel="noopener" href="https://developer.arm.com/Additional%20Resources/Video%20Tutorials/Arm%20Mali%20GPU%20Training%20-%20EP3-3">å®˜æ–¹æ•™å­¦è§†é¢‘</a></p><p>é€šè¿‡æ­¤å·¥å…·å¯åˆ†æç§»åŠ¨å¹³å°çœŸæœºCPUæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­çš„Cacheã€Branchç­‰æƒ…å†µï¼Œä»¥æ›´æ·±å…¥ä¸”ç²¾å‡†çš„ä¼˜åŒ–æ¸¸æˆCPUç«¯æ€§èƒ½è¡¨ç°</p><p><strong>å»ºè®®ä½¿ç”¨TeståŒ…è¿›è¡Œæ•°æ®é‡‡é›†</strong></p><p>ã€1ã€‘é€‰æ‹©éœ€è¦é‡‡é›†çš„Counterï¼š</p><p>å³ä¸Šè§’æœ‰æ¨¡æ¿ï¼Œé’ˆå¯¹ä½ çš„éœ€è¦ï¼Œé€‰æ‹©CPU Cacheï¼ˆCache Missï¼‰ã€Branchingï¼ˆåˆ†æ”¯é¢„æµ‹å¤±è´¥ï¼‰ã€Clockï¼ˆæ‰§è¡Œæ—¶é—´ï¼‰ç­‰æ¨¡æ¿ï¼š</p><p>çº¢è‰²åœˆåœˆä»£è¡¨å¯¹æ­¤Counterè¿›è¡ŒEvent-based samplingï¼Œå³å°†Counterä¸æ‰§è¡Œä»£ç ç»“åˆ å½“Counterè§¦å‘ Thresholdï¼ˆé»˜è®¤æ˜¯1000ï¼‰æ¬¡åï¼Œè¿›è¡Œä¸€æ¬¡æ‰§è¡Œå †æ ˆçš„é‡‡æ · Cache Missç›¸å…³Counterçš„ä»‹ç»ï¼š</p><p>ã€2ã€‘è®¾ç½®é‡‡é›†å‚æ•°</p><p>å°†å¸¦ç¬¦å·è¡¨çš„libUE4.soæ·»åŠ åˆ°Program Imagesä¸­</p><p>Frequencyï¼šNormalï¼ˆé‡‡æ ·ç‡è¶Šé«˜ï¼Œå¯¹é¢‘ç¹è°ƒç”¨çš„å°å‡½æ•°ä¾¦å¬è¶Šå‡†ç¡®ï¼Œä½†æ•°æ®é‡ä¸æ€§èƒ½ä¼šå¤§å¤§ä¸‹é™ï¼Œå¯æ ¹æ®é‡‡é›†ç»“æœæƒè¡¡è®¾ç½®ï¼‰</p><p>Buffer Modeï¼šStreaming</p><p>æ‰“å¼€å †æ ˆå›æº¯ï¼ˆæ‰“å¼€no-omit-frame-pointerç¼–è¯‘é€‰é¡¹ï¼‰</p><p>æœ€ç»ˆæ ¹æ®Counteræ•°æ®ï¼Œç”Ÿæˆçš„æŠ¥å‘Šæ‰€é‡‡å–çš„é‡‡æ ·æ¯”ç‡ï¼ŒåŒæ ·æ˜¯è¶Šé«˜è¶Šç²¾å‡†</p><p><strong>æ•°æ®è§£æ</strong></p><blockquote><p>å¯å…ˆæ‹‰èµ·æ¸¸æˆè¿è¡Œè‡³éœ€è¦æµ‹è¯•çš„ç©æ³•ã€åœ°ç‚¹ï¼Œå°½å¯èƒ½çŸ­æ—¶çš„é‡‡é›†æ•°æ®</p></blockquote><p>å¼€å§‹é‡‡é›†åï¼Œç‚¹å‡»å·¦ä¾§StopæŒ‰é’®ğŸ›‘åœæ­¢é‡‡é›†ï¼Œå°†è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š</p><p>ã€1ã€‘Call Paths</p><p>ä»¥è°ƒç”¨å †æ ˆçš„å½¢å¼å±•ç¤ºæ‰€é€‰Counter Sample Eventçš„å‘½ä¸­æƒ…å†µï¼šç²¾ç¡®åˆ°å‡½æ•°</p><p>åŒå‡»å¯è·³è½¬è‡³ Code é¡µç­¾</p><p>ã€2ã€‘Functions</p><p>ä»¥å‡½æ•°åˆ—è¡¨å½¢å¼å±•ç¤ºCounter Sample Eventå‘½ä¸­æƒ…å†µ</p><p>åŒå‡»å¯è·³è½¬è‡³ Code é¡µç­¾</p><p>ã€3ã€‘Code</p><p>å·¥å…·æ”¯æŒCounterï¼ˆCache Missï¼‰æ•°æ®å½’å› ï¼ˆAttributionï¼‰ï¼Œå³æŒ‡æ˜å‘ç”ŸCache Missçš„ä½ç½® ä½†å› ä¸ºç°ä»£CPUä¹±åºæ‰§è¡Œç­‰ä¼˜åŒ–æ‰‹æ®µï¼ŒåŠ ä¸ŠåŸºäºå †æ ˆé‡‡æ ·çš„æ•°æ®èšåˆåŸç†ï¼Œæ•°æ®ä»…ä¾›å‚è€ƒ ä½†å·²è¶³å¤Ÿåˆ†æå‡ºé—®é¢˜å‡½æ•°ä¸­é—®é¢˜ä»£ç çš„ä½ç½®ï¼š</p><p>å¦‚ä¸Šå›¾ä¸­å¤§æ¦‚æ˜¯PrimitiveProxyçš„è·å–ä¸è¿ç»­ï¼Œå¯¼è‡´çš„CacheMissï¼Œéœ€è¦ç»“åˆä¸Šä¸‹æ–‡è¿›è¡Œåˆ†æï¼Œç¡®è®¤çœŸæ­£é—®é¢˜æ‰€åœ¨</p><blockquote><p>çœ‹ä¸Šå»è¡Œå·ä¸èƒ½ç²¾ç¡®å¯¹ä¸Šï¼Ÿ<br>è§£é‡Šè§æ­¤<a target="_blank" rel="noopener" href="https://community.arm.com/support-forums/f/graphics-gaming-and-vr-forum/54427/streamline-analyze-performance">æ–‡ç« </a></p></blockquote><h2><span id="xcode-timeprofiler">XCode Timeprofiler</span></h2><p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2019/411/">https://developer.apple.com/videos/play/wwdc2019/411/</a></p><p>ä¸SimpleperfåŸç†ç›¸åŒçš„CPUæ€§èƒ½åˆ†æå·¥å…·ï¼ŒåŠŸèƒ½å¼ºå¤§</p><h2><span id="best-practice">Best Practice</span></h2><p>ç²—ç²’åº¦å·¥å…·ï¼šFrameProã€UnrealInsight ç”¨äºå¼€å‘æœŸCIæš´æ¼æ˜æ˜¾é—®é¢˜</p><p>å‘ç°é—®é¢˜åï¼Œä½¿ç”¨ç»†ç²’åº¦å·¥å…·è¿›è¡Œæ·±åº¦åˆ†æï¼šSimpleperfã€Streamlineã€TimeProfiler</p><p>å»ºè®®ä½¿ç”¨TeståŒ…ï¼Œæ’é™¤Cacheã€å†—ä½™ä»£ç ã€Profileræœ¬èº«å¯¹æ€§èƒ½çš„å½±å“</p><p>å°è¯•ï¼šç¦»çº¿è®¡ç®—ã€ParallelForã€å¼‚æ­¥åŒ–ã€SOAåŒ–ç­‰æ–¹æ¡ˆ</p><p>å¹¶ä½¿ç”¨CacheSimã€Streamlineè¿›è¡Œ Cache Miss åˆ†æï¼Œå‹æ¦¨å‡ºæœ€åçš„æ°´åˆ†</p><p>å®ä¾‹ä¸€ï¼šGCåƒåœ¾å›æ”¶</p><p><strong>å¶å‘å¤§è´Ÿè½½ä»»åŠ¡ï¼Œå……åˆ†åˆ©ç”¨å¯èƒ½ç©ºé—²çš„çº¿ç¨‹</strong></p><p><strong>ParallelFor è¿›è¡Œ LockFree ä¼˜åŒ–</strong></p><p>UEåƒåœ¾å›æ”¶æ‰«æå¼•ç”¨æ—¶ï¼Œå°†å¼•ç”¨åˆ†ææŠ›åˆ°å¤šä¸ªTaskçº¿ç¨‹å¤„ç†</p><p>ä½†GCæ—¶é€šå¸¸ä¼šé˜»å¡Gameã€RHIã€Renderç­‰çº¿ç¨‹ï¼Œå¯å……åˆ†åˆ©ç”¨å¯èƒ½ç©ºé—²çš„è¿™äº›å¤§æ ¸çº¿ç¨‹ï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼š</p><h3><span id="å®ä¾‹äºŒå…¨å±€å˜é‡ä¸cache-miss">å®ä¾‹äºŒï¼šå…¨å±€å˜é‡ä¸Cache Miss</span></h3><p>å°†å…¶æŒªå‡ºParallelForä¸­çš„Lambdaï¼š</p><h1><span id="gpu">GPU</span></h1><p>ç°ä»£Mobile GPUé€šå¸¸ä½¿ç”¨Â <a target="_blank" rel="noopener" href="https://blog.imaginationtech.com/understanding-powervr-series5xt-powervr-tbdr-and-architecture-efficiency-part-4/">TBRã€TBDR</a>Â ç¡¬ä»¶æ¶æ„</p><p>åœ¨æœ‰é™çš„åŠŸè€—ä¸‹æä¾›å°½å¯èƒ½å¤šçš„æ€§èƒ½ç©ºé—´</p><p>é™¤äº†æ§åˆ¶ è¿ç®—è´Ÿè½½ã€åŠ¨æ€åˆ†æ”¯ã€å…¨ç²¾åº¦è¿ç®— ç­‰å¤©ç„¶GPUä¸å‹å¥½çš„æŒ‡æ ‡ä¹‹å¤–</p><p>Mobile GPUå› å…¶On-chip Memoryè¾ƒå°çš„åŸå› </p><p>éœ€è¦ä¸¥æ ¼æ§åˆ¶å¯„å­˜å™¨æ•°é‡ï¼Œé¿å…Register Spilläº§ç”Ÿé¢å¤–IOå¸¦å®½</p><h2><span id="adreno-gpu">Adreno GPU</span></h2><p><a target="_blank" rel="noopener" href="https://developer.qualcomm.com/sites/default/files/docs/adreno-gpu/developer-guide/gpu/gpu.html">https://developer.qualcomm.com/sites/default/files/docs/adreno-gpu/developer-guide/gpu/gpu.html</a></p><p>ä»‹ç»Adreno GPU counteræŒ‡æ ‡ä¸å»ºè®®å€¼</p><p>ä½¿ç”¨Snapdragon Profilerè¿›è¡ŒCounteræ•°æ®æŠ“å–</p><p>æä¾›pythonè„šæœ¬è¿›è¡ŒCounteræ•°æ®æ±‡æ€»ä¸åˆ†ç±»</p><p>å…¶æ¬¡é€‰æ‹©Realtimeé¡¹ï¼Œæ‰“å¼€appå</p><p>åœ¨ä¸‹æ–¹åŒå‡»Systemåˆ†ç»„çš„æ‰€æœ‰GPUç›¸å…³æŒ‡æ ‡ï¼Œå³å¯è‡ªåŠ¨å¼€å§‹è®°å½•Counteræ•°æ®ï¼š</p><blockquote><p>é«˜é€šä¸å»ºè®®ä½¿ç”¨Processåˆ†ç»„çš„æŒ‡æ ‡ï¼Œç»æµ‹è¯•å‘ç°ä¼šå¯¼è‡´865é¢‘ç‡é™ä½çš„bugï¼Œç›´æ¥é‡‡é›†å…¨å±æ¸¸æˆæ—¶Systemç»„çš„æ€§èƒ½æ•°æ®</p></blockquote><p>é‡‡é›†å®Œæ¯•åç‚¹å‡»æš‚åœæŒ‰é’®ï¼š</p><p>åç‚¹å‡»csvæŒ‰é’®è¾“å‡ºCounteræ•°æ®ï¼Œå³å¯é€šè¿‡pythonè„šæœ¬è¿›è¡Œç®€å•çš„æ•°æ®åˆ†æ</p><p><strong>Counterä»‹ç»</strong></p><ul><li><p><code>% Anisotropic Filtered</code><br>Percent of texels filtered using the â€˜Anisotropicâ€™ sampling method.<br>å„å‘å¼‚æ€§è¿‡æ»¤æ¯”ä¾‹ï¼Œå°½é‡å¤šä½¿ç”¨åŒçº¿æ€§è¿‡æ»¤ï¼Œå½“ç„¶ä¸€äº›æ¯”å¦‚åœ°å½¢ä¹‹ç±»çš„è´´å›¾è¿˜æ˜¯éœ€è¦ä½¿ç”¨å„å‘å¼‚æ€§è¿‡æ»¤ï¼Œä¿è¯åœ¨30%ä»¥ä¸‹</p></li><li><p><code>% Linear Filtered</code><br>Percent of texels filtered using the â€˜Linearâ€™ sampling method.<br>åŒçº¿æ€§è¿‡æ»¤æ¯”ä¾‹ï¼Œå°½é‡ä½¿ç”¨å®ƒ</p></li><li><p><code>% Nearest Filtered</code><br>Percent of texels filtered using the â€˜Nearestâ€™ sampling method.<br>Nearestè¿‡æ»¤æ¯”ä¾‹</p></li><li><p><code>% Non-Base Level Textures</code><br>Percent of texels coming from a non-base MIP level.<br>é‡‡æ ·åˆ°éç¬¬é›¶çº§mipmapçš„æ¯”ä¾‹ï¼Œè¶Šé«˜è¶Šå¥½ï¼Œä½¿ç”¨æ¬¡çº§mipå¯ä»¥å‡å°‘å†…å­˜å¸¦å®½çš„ä½¿ç”¨</p></li><li><p><code>% Prims Clipped</code><br>Percentage of primitives clipped by the GPU (where new<br>primitives are generated).<br>For a primitive to be clipped, it has to have a visible portion inside<br>the viewport but extend outside the â€˜guardbandâ€™ an area that surrounds<br>the viewport and significantly reduces the number of primitives the<br>hardware has to clip.<br>GPUå‰”é™¤æ‰çš„é¢æ•°æ¯”ä¾‹ï¼Œå³æ¨¡å‹æœ‰ä¸€éƒ¨åˆ†æ‘„åƒæœºçœ‹ä¸åˆ°ï¼Œç¡¬ä»¶å¸®ä½ å‰”é™¤çš„æƒ…å†µ</p></li><li><p><code>% Prims Trivially Rejected</code><br>Percentage of primitives that are trivially rejected.<br>A primitive can be trivially rejected if it is outside the visible<br>region of the render surface. These primitives are ignored by the<br>rasterizer.<br>å®Œå…¨æ²¡æœ‰è´¡çŒ®çš„é¢ã€‚å³å®Œå…¨ä¸åœ¨ç›¸æœºé‡Œçš„é¢ï¼Œå°½é‡å°†æ­¤ç±»æ¨¡å‹åœ¨CPUä¸Šå°±å‰”é™¤æ‰</p></li><li><p><code>% Shader ALU Capacity Utilized</code><br>Percent of maximum shader capacity (ALU operations) utilized.<br>For each cycle that the shaders are working, the average percentage of<br>the total shader ALU capacity that is utilized for that cycle.<br>ALUçš„åˆ©ç”¨ç‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¶Šé«˜è¶Šå¥½ï¼Œå› ä¸ºä½ å……åˆ†åˆ©ç”¨äº†GPUçš„æ•°å­¦è¿ç®—èƒ½åŠ›</p></li><li><p><code>% Shaders Busy</code><br>Percentage of time that all Shader cores are busy.<br>Shader Coreæœ‰å·¥ä½œçš„æ¯”ä¾‹ï¼ŒåŒ…æ‹¬ALUã€TPUã€LoadStoreçš„æƒ…å†µã€‚å½“ç„¶ï¼Œä¹ŸåŒ…æ‹¬Memory Fetch Stallæ—¶ç­‰å¾…çš„æ¯”ä¾‹<br>ç°ä»£çš„GPUä¼šåœ¨å‘ç”ŸStallæ—¶ï¼Œå°è¯•å»åˆ‡æ¢çº¿ç¨‹ï¼Œè®©GPUä¸€è‡´å¿™èµ·æ¥ï¼Œä»¥æ­¤æ¥â€œæ©ç›–â€è¿™ç§å†…å­˜å¯¼è‡´çš„Stall</p></li><li><p><code>% Stalled on System Memory</code><br>Percentage of cycles the L2 cache is stalled waiting for data from system memory.<br>L2 cacheæœªå‘½ä¸­ï¼Œç­‰å¾…DRAMæ•°æ®æ—¶äº§ç”Ÿçš„å»¶è¿Ÿçš„æ¯”ä¾‹<br>å¦‚æœæ­¤æŒ‡æ ‡è¿‡é«˜ï¼Œå¯èƒ½æ˜¯ä½ é‡‡æ ·çš„æ•°æ®çš„ç©ºé—´è¿ç»­æ€§æ¯”è¾ƒå·®ï¼Œå‡å°‘Dependent Texture Fetchç­‰</p></li><li><p><code>% Texture Fetch Stall</code><br>Percentage of clock cycles where the shader processors cannot<br>make any more requests for texture data.<br>A high value for this metric implies the shaders cannot get texture data<br>from the texture pipe (L1, L2 cache or memory) fast enough, and<br>rendering performance may be negatively affected.<br>Shader Coreå› ä¸ºæ­£åœ¨ç­‰å¾…è´´å›¾ç›¸å…³å†…å­˜IOè€Œäº§ç”Ÿç©ºè½¬çš„æ¯”ä¾‹<br>å¯èƒ½æ˜¯æ²¡å¼€Mipmapæˆ–ä½¿ç”¨çš„è´´å›¾åˆ†è¾¨ç‡è¿‡å¤§ï¼Œæˆ–é‡‡æ ·è´´å›¾çš„UVç©ºé—´è¿ç»­æ€§å¤ªå·®äº†</p></li><li><p><code>% Texture L1 Miss</code><br>Number of L1 texture cache misses divided by L1 texture cache<br>requests.<br>This metric does not consider how many texture requests are made per<br>time period (like the â€˜% GPU L1 Texture cache missâ€™ metric), but is<br>simple miss to request ratio.<br>è´´å›¾L1 cacheæœªå‘½ä¸­çš„æ¯”ä¾‹</p></li><li><p><code>% Texture L2 Miss</code><br>Number of L2 texture cache misses divided by L2 texture cache requests.<br>This metric does not consider how many texture requests are made per time period, but is simple miss to request ratio.<br>è´´å›¾L2 cacheæœªå‘½ä¸­çš„æ¯”ä¾‹</p></li><li><p><code>% Time ALUs Working</code><br>Percentage of time the ALUs are working while the Shaders are busy.<br>Shader Core busyæ—¶ï¼ŒALUåœ¨å·¥ä½œçš„æ¯”ä¾‹ï¼Œç†æƒ³çš„è¿™ä¸ªæ¯”ä¾‹åº”è¯¥å°½å¯èƒ½åœ°é«˜</p></li><li><p><code>% Time Compute</code><br>Amount of time spent in compute work compared to the total time spent shading everything.<br>Shader Core busyæ—¶ï¼ŒComputeè®¡ç®—å•å…ƒå·¥ä½œçš„æ¯”ä¾‹</p></li><li><p><code>% Time EFUs Working</code><br>Percentage of time the EFUs are working while the Shaders are busy.<br>Elementary functional unit (å¤æ‚å‡½æ•°sinã€logç­‰è¿ç®—å•å…ƒ)ï¼Œç†æƒ³çš„æ­¤æ¯”ä¾‹åº”è¯¥å°½å¯èƒ½åœ°ä½</p></li><li><p><code>% Time Shading Fragments</code><br>Amount of time spent shading fragments compared to the total time spent shading everything.<br>æ¸²æŸ“Fragmentè¿ç®—æ—¶çš„æ¯”ä¾‹</p></li><li><p><code>% Time Shading Vertices</code><br>Amount of time spent shading vertices compared to the total time spent shading everything.<br>å¤„ç†Verticesè¿ç®—æ—¶çš„æ¯”ä¾‹</p></li><li><p><code>% Vertex Fetch Stall</code><br>Percentage of clock cycles where the GPU cannot make any more<br>requests for vertex data.<br>A high value for this metric implies the GPU cannot get vertex data from<br>memory fast enough, and rendering performance may be negatively<br>affected.<br>å½“GPUå› ä¸ºå†…å­˜IOé—®é¢˜æ— æ³•è·å–vertexæ•°æ®æ—¶çš„æ¯”ä¾‹ã€‚å¯èƒ½æ˜¯åœºæ™¯é¡¶ç‚¹æ•°è¿‡å¤šçš„ç¼˜æ•…ï¼Œç†æƒ³çš„è¾“å…¥GPUçš„é¡¶ç‚¹æ•°åº”ä¿æŒåœ¨300K-500Kçš„æ•°é‡çº§</p></li><li><p><code>ALU / Fragment</code><br>Average number of scalar fragment shader ALU instructions<br>issued per shaded fragment, expressed as full precision ALUs (2 mediump &#x3D;<br>1 fullp).<br>Includes interpolation instruction. Does not include vertex shader<br>instructions.<br>å¹³å‡å¤„ç†æ¯ä¸ªFragmentçš„è¿ç®—ä¸­ï¼ŒALUç›¸å…³çš„æŒ‡ä»¤æ•°ï¼ˆè®°å½•å…¨ç²¾åº¦ALUï¼Œä¹ŸåŒ…æ‹¬interpolationçš„æŒ‡ä»¤ï¼‰</p></li><li><p><code>ALU / Vertex</code><br>Average number of vertex scalar shader ALU instructions issued per shaded vertex.<br>Does not include fragment shader instructions.<br>å¹³å‡å¤„ç†æ¯ä¸ªVertexçš„è¿ç®—ä¸­ï¼ŒALUç›¸å…³çš„æŒ‡ä»¤æ•°</p></li><li><p><code>Average Polygon Area</code><br>Average number of pixels per polygon.<br>Adrenoâ€™s binning architecture will count a primitive for each â€˜binâ€™ it<br>covers, so this metric may not exactly match expectations.<br>æ¯ä¸ªé¢å¹³å‡æœ‰å¤šå°‘åƒç´ ï¼Œè¿™ä¸ªå€¼å¯èƒ½ä¸å¤ªå‡†ï¼Œç†æƒ³çš„10-15åƒç´ &#x2F;é¢</p></li><li><p><code>Average Vertices / Polygon</code><br>Average number of vertices per polygon.<br>This will be around 3 for triangles, and close to 1 for triangle strips.<br>å¹³å‡æ¯ä¸ªé¢æœ‰å¤šå°‘é¡¶ç‚¹</p></li><li><p><code>Avg Bytes / Fragment</code><br>Average number of bytes transferred from main memory for each fragment.<br>æ¯ä¸ªFragmentè¿ç®—è¿‡ç¨‹ä¸­ä¼ è¾“åˆ°DRAMçš„å†…å­˜çš„å­—èŠ‚æ•°</p></li><li><p><code>Avg Bytes / Vertex</code><br>Average number of bytes transferred from main memory for each vertex.<br>æ¯ä¸ªVertextè¿ç®—è¿‡ç¨‹ä¸­ä¼ è¾“åˆ°DRAMçš„å†…å­˜çš„å­—èŠ‚æ•°</p></li><li><p><code>Avg Preemption Delay</code><br>Average time (us) from the preemption request to preemption start.<br>GPUçº¿ç¨‹æŠ¢å ï¼ˆç±»ä¼¼CPUçº¿ç¨‹è°ƒåº¦ï¼Œå°†æ•°æ®å†™å…¥DRAMï¼‰æ‰€äº§ç”Ÿçš„å»¶è¿Ÿçš„æ¯”ä¾‹</p></li><li><p><code>Clocks / Second</code><br>Number of GPU clocks per second.<br>GPUçš„é¢‘ç‡ï¼Œæ»¡é¢‘æ—¶é‡‡é›†æ•°æ®æ¯”è¾ƒæœ‰å‚è€ƒæ€§</p></li><li><p><code>EFU / Fragment</code><br>Average number of scalar fragment shader EFU instructions issued per shaded fragment.<br>Does not include Vertex EFU instructions<br>æ¯ä¸ªFragmentä¸­EFUå¤æ‚è¿ç®—çš„å¹³å‡æ•°é‡ï¼Œè¶Šä½è¶Šå¥½</p></li><li><p><code>EFU / Vertex</code><br>Average number of scalar vertex shader EFU instructions issued per shaded vertex.<br>Does not include fragment EFU instructions<br>æ¯ä¸ªVertexä¸­EFUå¤æ‚è¿ç®—çš„å¹³å‡æ•°é‡ï¼Œè¶Šä½è¶Šå¥½</p></li><li><p><code>Fragment ALU Instructions / Sec (Full)</code><br>Total number of full precision fragment shader instructions issued, per second.<br>Does not include medium precision instructions or texture fetch instructions.<br>Fragmentä¸­æ¯ç§’é‡Œå…¨ç²¾åº¦ALUæŒ‡ä»¤çš„å¹³å‡æ•°é‡ï¼Œ<strong>ç§»åŠ¨GPUè¦å°½å…¨åŠ›ä½¿ç”¨åŠç²¾åº¦è¿ç®—</strong>ï¼ŒFragmentä¸­é™¤äº†ä½ç½®è¿ç®—ï¼ŒåŸºæœ¬ç”¨åŠç²¾åº¦å°±è¶³å¤Ÿ<br>æ—¢èƒ½åŠ å¿«è¿ç®—ï¼Œä¹Ÿèƒ½é™ä½å¸¦å®½ä¹Ÿèƒ½å‡å°‘å‘ç”Ÿregister spillçš„æ¯”ä¾‹</p></li><li><p><code>Fragment ALU Instructions / Sec (Half)</code><br>Total number of half precision Scalar fragment shader instructions issued, per second.<br>Does not include full precision instructions or texture fetch instructions.<br>Fragmentä¸­æ¯ç§’é‡ŒåŠç²¾åº¦ALUæŒ‡ä»¤çš„å¹³å‡æ•°é‡ï¼Œ<strong>ç§»åŠ¨GPUè¦å°½å…¨åŠ›ä½¿ç”¨åŠç²¾åº¦è¿ç®—</strong></p></li><li><p><code>Fragment EFU Instructions / Second</code><br>Total number of Scalar fragment shader Elementary Function Unit (EFU) instructions issued, per second.<br>These include math functions like sin, cos, pow, etc.<br>Fragmentä¸­æ¯ç§’é‡ŒEFUæŒ‡ä»¤æ•°ï¼Œå½“ç„¶æ˜¯è¶Šå°‘è¶Šå¥½</p></li><li><p><code>Fragment Instructions / Second</code><br>Total number of fragment shader instructions issued, per<br>second.<br>Reported as full precision scalar ALU instructions 2 medium precision<br>instructions equal 1 full precision instruction. Also includes<br>interpolation instructions (which are executed on the ALU hardware) and<br>EFU (Elementary Function Unit) instructions. Does not include texture<br>fetch instructions.<br>Fragmentä¸­æ¯ç§’çš„æ‰€æœ‰æŒ‡ä»¤æ•°ï¼ˆALUè®¡ç®—çš„æ˜¯å…¨ç²¾åº¦ï¼Œä¹ŸåŒ…å«interpolationä¸EFUï¼Œä¸åŒ…å«è´´å›¾fetchæŒ‡ä»¤ï¼‰</p></li><li><p><code>Fragments Shaded / Second</code><br>Number of fragments submitted to the shader engine, per second.<br>æ¯ç§’æäº¤åˆ°Shader Coreä¸­çš„Fragmenetæ•°é‡ï¼Œç†è®ºä¸Šä¸åˆ†è¾¨ç‡ï¼ŒMSAAç­‰æœ‰å…³</p></li><li><p><code>GPU % Bus Busy</code><br>Approximate Percentage of time the GPUâ€™s bus to system memory is busy.<br>å¤§è‡´è®¡ç®—çš„GPUç­‰å¾…DRAM IOçš„æƒ…å†µï¼Œå¦‚æœæ¯”ä¾‹è¾ƒé«˜ï¼Œå°±æ˜¯å¸¦å®½è¿‡å¤§äº†ï¼Œå¦‚æœç›®æ ‡æ—¶60FPSï¼Œä¿è¯å¸¦å®½åœ¨80M&#x2F;frameï¼Œ3-5G&#x2F;sec</p></li><li><p><code>GPU % Utilization</code><br>Percentage of GPU utilized as measured at peak GPU clock(585Mhz) and capacity<br>GPUæ»¡é¢‘ç‡è·‘æ—¶çš„æ¯”ä¾‹</p></li><li><p><code>GPU Frequency</code><br>GPU frequency in Hz</p></li><li><p><code>L1 Texture Cache Miss Per Pixel</code><br>Average number of Texture L1 cache misses per pixel.<br>Lower values for this metric imply better memory coherency. If this<br>value is high, consider using compressed textures, reducing texture<br>usage, etc.<br>æ¯ä¸ªåƒç´ L1 Texture Cacheæœªå‘½ä¸­çš„æ•°é‡ã€‚ç¼“å­˜åˆ©ç”¨ç‡ä¸æ•°æ®è¯·æ±‚çš„å†…å­˜ç›¸å…³æ€§æœ‰å…³<br>L1 Cacheå¤§è‡´å»ºè®®åœ¨20%å·¦å³</p></li><li><p><code>Pre-clipped Polygons/Second</code><br>Number of polygons submitted to the GPU, per second, before any hardware clipping.<br>æ¯ç§’æäº¤åˆ°GPUå‡†å¤‡è¿›è¡ŒCullingçš„é¢æ•°ï¼Œå¯è§é¢æ•°&#x2F;æäº¤æ€»é¢æ•°çš„æ¯”ä¾‹é«˜äº50%æ—¶æ˜¯æ¯”è¾ƒå¥åº·çš„<br>å¦åˆ™ï¼Œç»™SOCã€HOCä¸€äº›å‹åŠ›ï¼Œå¤šåœ¨æ¸²æŸ“å‰å‰”é™¤æ— ç”¨çš„æ•°æ®</p></li><li><p><code>Preemptions / second</code><br>The number of GPU preemptions that occurred, per second.<br>æ¯ç§’å‘ç”ŸGPUæŠ¢å çš„æ¬¡æ•°ï¼ŒæŠ¢å è¿‡å¤šå¯èƒ½æ˜¯GPUè´Ÿè½½å¤ªé‡äº†</p></li><li><p><code>Read Total (Bytes/sec)</code><br>Total number of bytes read by the GPU from memory, per second.<br>æ¯ç§’æ€»è¯»å¸¦å®½ï¼Œè¯»å¸¦å®½ä¸€èˆ¬æ¯”å†™å¸¦å®½é«˜ä¸€äº›ï¼Œå› ä¸ºVertexåˆ†Tileéœ€è¦å°†æ•°æ®å†™å…¥DRAMå¹¶å¤šæ¬¡è¯»å‡ºï¼Œè´´å›¾çš„è¯»å–ä¹Ÿå±äºè¯»å¸¦å®½</p></li><li><p><code>Reused Vertices / Second</code><br>Number of vertices used from the post-transform vertex buffer<br>cache.<br>A vertex may be used in multiple primitives; a high value for this<br>metric (compared to number of vertices shaded) indicates good re-use of<br>transformed vertices, reducing vertex shader workload.<br>å¤ç”¨çš„é¡¶ç‚¹çš„æ¯”ä¾‹ï¼Œæ¨¡å‹çš„å¤§éƒ¨åˆ†é¡¶ç‚¹éƒ½å¯ä»¥ç„Šæ¥èµ·æ¥ï¼Œè¿™æ ·ä¸åŒçš„ä¸‰è§’å½¢å°±å¯ä»¥å…¬ç”¨é¡¶ç‚¹ï¼Œå‡å°‘æ•°æ®é‡ä¸Shaderè´Ÿè½½<br>è¿™ä¸ªå€¼ç›¸æ¯”äºæ€»å¤„ç†çš„é¡¶ç‚¹æ•°ï¼Œå æ¯”è¶Šé«˜å½“ç„¶è¶Šå¥½ï¼Œå¦‚æœæ¯”è¾ƒä½ï¼Œå°±å¤„ç†ä¸€ä¸‹æ¨¡å‹ï¼Œå°½é‡å…¬ç”¨é¡¶ç‚¹</p></li><li><p><code>SP Memory Read (Bytes/Second)</code><br>Bytes of data read from memory by the Shader Processors, per second.<br>Shader Processoræ¯ç§’æ‰€è¯»å–çš„å†…å­˜æ€»æ•°</p></li><li><p><code>Texture Memory Read BW (Bytes/Second)</code><br>Bytes of texture data read from memory per second.<br>Includes bytes of platform compressed texture data read from memory.<br>è´´å›¾æ€»è¯»å¸¦å®½ï¼Œä¸€èˆ¬éƒ½æ˜¯è´´å›¾è¯»å¸¦å®½æ˜¯è¯»å¸¦å®½ä¸­æ¯”è¾ƒé«˜çš„</p></li><li><p><code>Textures / Fragment</code><br>Average number of textures referenced per fragment.<br>æ¯ä¸ªFramentå¹³å‡ä½¿ç”¨çš„è´´å›¾æ•°é‡</p></li><li><p><code>Textures / Vertex</code><br>Average number of textures referenced per vertex.<br>æ¯ä¸ªVertexå¹³å‡ä½¿ç”¨çš„è´´å›¾çš„æ•°é‡</p></li><li><p><code>Vertex Instructions / Second</code><br>Total number of scalar vertex shader instructions issued, per<br>second.<br>Includes full precision ALU vertex instructions and EFU vertex<br>instructions. Does not include medium precision instructions (since<br>they are not used for vertex shaders). Does not include vertex fetch or<br>texture fetch instructions.<br>æ¯ç§’Vertex shaderæŒ‡ä»¤æ€»æ•°ï¼ˆä¸åŒ…å«Vertex fetchå’Œè´´å›¾fetchæŒ‡ä»¤ï¼‰</p></li><li><p><code>Vertex Memory Read (Bytes/Second)</code><br>Bytes of vertex data read from memory per second.<br>æ¯ç§’ä»DRAMä¸­è¯»å–çš„é¡¶ç‚¹æ•°æ®çš„æ€»å¤§å°</p></li><li><p><code>Vertices Shaded / Second</code><br>Number of vertices submitted to the shader engine, per second.<br>æ¯ç§’æäº¤ç»™Shader Coreçš„é¡¶ç‚¹æ•°</p></li><li><p><code>Write Total (Bytes/sec)</code><br>Total number of bytes written by the GPU to memory, per second.<br>æ€»å†™å¸¦å®½ï¼Œå†™å¸¦å®½å¦‚æœé«˜äºè¯»å¸¦å®½ï¼Œå°±æ˜¯ä¸æ­£å¸¸çš„ï¼Œå…³æ³¨ä¸€ä¸‹Shaderçš„Register Spillï¼Œload&#x2F;storeï¼Œimage storeç­‰<br>ç”šè‡³å¯èƒ½æ˜¯GPUé©±åŠ¨çš„BUGï¼Œæˆ–Shaderå†™æ³•è§¦å‘çš„ç¼–è¯‘å™¨çš„BUG</p></li></ul><blockquote><p>Snapdragon Profiler Snapshot å¯æŸ¥çœ‹ DrawCall æ‰€æ‰§è¡Œçš„ Shader å¯„å­˜å™¨ä½¿ç”¨ä¿¡æ¯</p></blockquote><h2><span id="mali-gpu">Mali GPU</span></h2><p>[ã€å…¬å¸ã€‘MTKæŠ€æœ¯ä¸“åœºç ”è®¨ä¼šå›é¡¾ï¼ˆ1112ï¼‰]</p><p>ä¸‹æ–¹çš„ Midgard&#x2F;Bifrost&#x2F;Valhall ISA Configæ ‡æ˜äº†ä¸åŒæ¶æ„GPUçš„å¯ç”¨çº¿ç¨‹æ•°ä¸å¯ç”¨å¯„å­˜å™¨çš„ä¿¡æ¯</p><p>æ¯”å¦‚Mali-G78ï¼Œå¯ç”¨Workå¯„å­˜å™¨æ˜¯64ä¸ªï¼ˆæ¯ä¸ª32bitï¼Œå³ä¸€ä¸ªvec4ï¼‰</p><blockquote><p>å½“ä½ çš„Shaderä½¿ç”¨çš„Workå¯„å­˜å™¨æ•°é‡å¤§äº64æ—¶ï¼Œå°±ä¼šå‘ç”ŸRegister Spillï¼Œä¼šæœ‰é¢å¤–çš„å¸¦å®½æ¶ˆè€—ä¸æ€§èƒ½æŸè€—</p></blockquote><p>Uniformå¯„å­˜å™¨çš„çš„ä¸Šé™æ˜¯128&#x2F;Drawï¼Œå®ƒæ˜¯ç‹¬ç«‹çš„èµ„æºï¼Œè¢«ä¸€ä¸ªShader Programæ‰€å‘èµ·çš„æ‰€æœ‰çº¿ç¨‹å…±äº«</p><blockquote><p>å½“ä½ çš„Shaderä½¿ç”¨çš„Uniformå¯„å­˜å™¨æ•°é‡å¤§äº128æ—¶ï¼ŒGPUä¼šéœ€è¦ä»LSCä¸­è¯»å–è¶…å‡ºçš„å¯„å­˜å™¨æ•°æ®ï¼Œäº§ç”Ÿé¢å¤–å¸¦å®½æ¶ˆè€—</p></blockquote><p>å¯ä½¿ç”¨Mali-offline-compileræŸ¥çœ‹Shaderçš„å¯„å­˜å™¨ä¿¡æ¯ï¼š</p><p>PerfDogä¹Ÿæ”¯æŒè¾“å‡ºéƒ¨åˆ†Mali GPU counteræ•°æ®ï¼š</p><blockquote><p>ä¸ HWCPipeä½¿ç”¨ç›¸åŒç¡¬ä»¶æ¥å£</p></blockquote><h3><span id="g77-gpu-countersä»‹ç»">G77 GPU Countersä»‹ç»</span></h3><p><strong>GPU Activity</strong></p><p>ä»æ•´ä½“ä¸Šåˆ†æGPUé˜Ÿåˆ—çš„å¤„ç†æƒ…å†µï¼Œå¹¶ä¸”çœ‹åˆ°Fragmentå’ŒéFragmentå¤„ç†çš„æ¯”ä¾‹</p><p>G77ä¸Šçš„ä»»åŠ¡è´Ÿè½½é€šè¿‡ Job Managerç®¡ç†è°ƒåº¦</p><p>å®ƒä¸ºé©±åŠ¨å±‚æš´æ¼äº†ä¸¤ä¸ªFIFOçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå«Job Slots</p><p>ä¸€ä¸ªSlotä¸ºéFragmentä»»åŠ¡æœåŠ¡ï¼ˆComputeã€Vertexï¼‰ï¼Œä¸€ä¸ªä¸ºFragmentç€è‰²ä»»åŠ¡æœåŠ¡</p><p>è¿™ä¸¤ä¸ªé˜Ÿåˆ—å’ŒCPUçš„äº¤äº’æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”ä»–ä»¬å¯ä»¥å¹¶è¡Œæ‰§è¡Œ</p><p>ä¸‹å›¾å±•ç¤ºäº†ä¸åŒä»»åŠ¡ä¸‹GPUå¤„ç†æ•°æ®çš„è·¯å¾„ï¼Œä»¥åŠä¸è·¯å¾„ç›¸å…³çš„æ€§èƒ½Counter</p><p>æ³¨æ„æœ‰çš„Counterç»Ÿè®¡çš„æ˜¯æ•´ä¸ªæ•°æ®è·¯å¾„ä¸‹çš„æƒ…å†µï¼Œå¹¶ä¸ä»£è¡¨æŸä¸ªç¡¬ä»¶å•å…ƒ</p><p>æ¯”å¦‚Fragment queue active cyclesä¼šåœ¨GPUä»»ä½•ç¡¬ä»¶å•å…ƒæœ‰è¿è¡Œfragmentä»»åŠ¡æ—¶å¢åŠ cycle count</p><p>å¦å¤–ï¼Œæœ‰äº›Counterä¼šç»Ÿè®¡åˆ°å¤šæ¡æ•°æ®è·¯å¾„çš„è¡¨ç°ä¿¡æ¯</p><p>æ¯”å¦‚Fragment&#x2F;Non-Fragmentç€è‰²ç¨‹åºéƒ½æ˜¯åœ¨Unifiedæ‰§è¡Œæ ¸å¿ƒä¸Šè¿è¡Œçš„</p><p>ä¸‹é¢è¿™å¼ æ¸¸é“å›¾å°±å±•ç¤ºäº†é¡¶å±‚Job Managerçš„Counteråœ¨æœ‰é‡å çš„æ¸²æŸ“æµç¨‹ä¸­å¢åŠ è®¡æ•°çš„</p><p>è¿™å¼ å›¾ç”¨ä¸åŒçš„è“è‰²å±•ç¤ºäº†æ¯å¸§é‡Œå‡ºç°çš„ä¸¤ä¸ªæ¸²æŸ“æµç¨‹</p><p>æ¯ä¸ªæµç¨‹éƒ½å…ˆæœ‰Non-Fragment Workå¼€å§‹ï¼Œä»¥Fragment Workç»“æŸï¼ˆå› ä¸ºè¦å…ˆVSæ‰èƒ½FSï¼‰</p><p>æ¯æ®µä»»åŠ¡ç»“æŸåï¼ŒGPUéƒ½ä¼šé€šçŸ¥åˆ°CPU</p><p>æ³¨æ„ï¼Œåªè¦é˜Ÿåˆ—é‡Œæœ‰ä»»åŠ¡ï¼ŒGPU active cycleså°±ä¼šå¢åŠ </p><p><strong>GPU Usage</strong></p><p>æœ¬ç»„Counterä»å®è§‚ä¸Šé‡åŒ–äº†GPUçš„æ•´ä½“è´Ÿè½½</p><p>å¹¶åŒºåˆ†äº†Fragmentä¸Non-Fragmentä»»åŠ¡</p><p>æœ¬ç»„Counterå¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦GPUç“¶é¢ˆï¼Œå®ƒè¡¨ç¤ºGPUæœ‰ä»»åŠ¡çš„æ€»æ—¶é—´</p><p>ä¹Ÿå¯ä»¥çœ‹å‡ºä¸¤å¤§ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡åˆ†å¸ƒæ¯”ä¾‹</p><p><strong>GPU Active Cycles</strong></p><p>è¿™ä¸ªCounterä¼šåœ¨GPUçš„ä»»æ„é˜Ÿåˆ—ä¸­æœ‰æœªå®Œæˆçš„ä»»åŠ¡æ—¶è‡ªå¢</p><p>å³ä½¿GPUæ­£åœ¨å› ä¸ºè¯»å–System Memoryè€Œäº§ç”Ÿå»¶è¿Ÿæ—¶ï¼Œä¹Ÿä¼šè‡ªå¢</p><p>å³å®ƒè¡¨ç¤ºäº†ç”¨æˆ·ç¨‹åºç»™åˆ°GPUæ•´ä½“çš„è´Ÿè½½å‹åŠ›</p><p><strong>Non-fragment queue active cycles</strong></p><p>å½“GPUåœ¨Non-fragmenté˜Ÿåˆ—ä¸­æœ‰æœªå®Œæˆçš„ä»»åŠ¡æ—¶ï¼Œæ­¤è®¡æ•°å™¨ä¼šè‡ªå¢</p><p>å¯ä»¥é‡åŒ–ï¼švertex shaders, tessellation shaders, geometry shaders, fixed function tiling, compute shaders çš„æ•´ä½“è´Ÿè½½æƒ…å†µï¼Œä½†æ— æ³•åŒºåˆ†</p><p>åŒç†ï¼Œå½“äº§ç”Ÿç³»ç»Ÿå†…å­˜IOå»¶è¿Ÿæ—¶ï¼Œæ‰€æ¶ˆè€—çš„æ—¶é’Ÿä¹Ÿä¼šè®°å½•åœ¨è¿™ä¸ªCounterä¸­</p><p><strong>Fragment queue active cycles</strong></p><p>å½“GPUåœ¨Fragmenté˜Ÿåˆ—ä¸­æœ‰æœªå®Œæˆçš„ä»»åŠ¡æ—¶ï¼Œæ­¤è®¡æ•°å™¨ä¼šè‡ªå¢</p><p>å¯¹å¤§å¤šæ•°å›¾å½¢ç¨‹åºæ¥è®²ï¼ŒFragmentçš„è´Ÿè½½è‚¯å®šæ˜¯å¤šäºVertexçš„è´Ÿè½½</p><p>å› æ­¤è¿™ä¸ªé˜Ÿåˆ—çš„è´Ÿè½½ä¸€èˆ¬æ˜¯æœ€é«˜çš„</p><p><strong>å½“ä½ çš„ç¨‹åºçš„ Fragment queue active cycles ä¸ GPU active cycles å€¼å¤§è‡´æ¥è¿‘æ—¶</strong></p><p><strong>ä½ å¾ˆæœ‰å¯èƒ½å‡ºç°äº†ç“¶é¢ˆåœ¨Fragmentå¤„ç†ä¸Šçš„GPUç“¶é¢ˆ</strong></p><p>åŒç†ï¼Œå½“äº§ç”Ÿç³»ç»Ÿå†…å­˜IOå»¶è¿Ÿæ—¶ï¼Œæ‰€æ¶ˆè€—çš„æ—¶é’Ÿä¹Ÿä¼šè®°å½•åœ¨è¿™ä¸ªCounterä¸­</p><p><strong>Tiler active cycles</strong></p><p>å½“åˆ†å—å™¨çš„é˜Ÿåˆ—ä¸­æœ‰æœªå®Œæˆçš„ä»»åŠ¡æ—¶ï¼Œæ­¤è®¡æ•°å™¨ä¼šè‡ªå¢</p><p>åˆ†å¿«å™¨å¯ä»¥å’ŒVertexã€Fragmentç€è‰²ä»»åŠ¡å¹¶è¡Œè¿›è¡Œ</p><p>å½“æ­¤è®¡æ•°å™¨å¾ˆé«˜æ—¶ï¼Œä¸ä¸€å®šä»£è¡¨æœ‰ç“¶é¢ˆå‡ºç°</p><p>é™¤éShader Coreæ¨¡å—çš„Non-fragment active cyclesä¸å®ƒå¯¹æ¯”èµ·æ¥ä½å¾ˆå¤šæ—¶</p><p>æ‰æœ‰å¯èƒ½æ˜¯ç“¶é¢ˆ</p><p><strong>Interrupt pending cycles</strong></p><p>å½“GPUç»“æŸä»»åŠ¡ï¼Œç»™CPUå‘é€Interruptä¸­æ–­æŒ‡ä»¤ï¼Œç­‰å¾…CPUå›å¤æ—¶ï¼Œè®¡æ•°å™¨è‡ªå¢</p><p>æ³¨æ„è¿™äº›ç­‰å¾…çš„Cycleå¹¶ä¸æ„å‘³ç€æ€§èƒ½çš„æŸè€—ï¼Œå› ä¸ºGPUå¯ä»¥å¹¶è¡Œå¤„ç†é˜Ÿåˆ—ä¸­å…¶ä»–ä»»åŠ¡</p><p>åªæœ‰å½“æ­¤è®¡æ•°å™¨å æ®äº†GPU active cyclesä¸­å¾ˆé«˜çš„æ¯”ä¾‹æ—¶ï¼Œæ‰æœ‰å¯èƒ½æœ‰é—®é¢˜</p><p>ä¹Ÿè®¸å‡ºç°äº†ä¸€äº›å½±å“CPUå¤„ç†ä¸­æ–­æ•ˆç‡çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯é©±åŠ¨å±‚å‡ºäº†é—®é¢˜</p><p><strong>GPU utilization</strong></p><p>è¿™ç»„Counteræ•°æ®æä¾›äº†é˜Ÿåˆ—ä¸­ä»»åŠ¡ç›¸å…³cycleä¸GPUæ€»cycleçš„å½’ä¸€åŒ–åçš„æ¯”ä¾‹</p><p>å¯¹äºGPU Boundçš„æƒ…å†µï¼Œç†è®ºä¸ŠæŸæ¡é˜Ÿåˆ—åº”è¯¥ä¼šæœ‰æ¥è¿‘100%çš„åˆ©ç”¨ç‡</p><p>å› æ­¤è´Ÿè½½æœ€é‡çš„é˜Ÿåˆ—å°±æ˜¯æˆ‘ä»¬åº”è¯¥ä¼˜å…ˆä¼˜åŒ–çš„ç›®æ ‡</p><p>å½“ä½ æ˜¯GPUç“¶é¢ˆï¼Œä¸”GPUæ€»æ˜¯Busyï¼Œä½†ä¹Ÿä¸æ˜¯æ¯æ—¶æ¯åˆ»éƒ½æœ‰é˜Ÿåˆ—åœ¨è¿è¡Œ</p><p>åˆ™æœ‰å¯èƒ½æ˜¯ç¨‹åºå±‚APIçš„ä½¿ç”¨å½±å“äº†é˜Ÿåˆ—çš„å¹¶è¡Œè¡¨ç°</p><p>å½“æˆ‘ä»¬æƒ³ä¼˜åŒ–æ­¤ç±»æ²¡æœ‰æ’æ»¡ä»»åŠ¡çš„æƒ…å†µæ—¶ï¼ˆGPU Bubblesï¼‰ï¼Œåœ¨ä¼˜åŒ–æœ€é‡çš„é˜Ÿåˆ—ä¹‹å‰</p><p>é¦–å…ˆè¦ä¿è¯å½“å‰çš„è´Ÿè½½æ˜¯å¯ä»¥è¢«ä¸åŒçš„é˜Ÿåˆ—å¹¶è¡Œæ‰§è¡Œçš„</p><p>GPU Bubbleså‡ºç°çš„å¯èƒ½çš„åŸå› ï¼š</p><ul><li><p>CPUç¨‹åºåœ¨ç­‰å¾…GPUä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ¯”å¦‚è¯´åœ¨è¯·æ±‚ä¸€ä¸ªè¿˜æœªå®Œæˆçš„æ•°æ®ç»“æœã€‚è¿™ä¹Ÿè®¸ä¼šå¯¼è‡´ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—æ¥ä¸åˆ°æ–°çš„ä»»åŠ¡å»å¤„ç†</p></li><li><p>ç¨‹åºæäº¤çš„æ¸²æŸ“ç›¸å…³è´Ÿè½½å­˜åœ¨æ•°æ®è€¦åˆï¼Œå½±å“äº†å¹¶è¡Œçš„è¡¨ç°ã€‚æ¯”å¦‚ä¸€ä¸ª Fragment-&gt;Compute-&gt;Fragment çš„æ•°æ®è¾“å…¥ä¼šå¯¼è‡´å½“Compute Shaderæ‰§è¡Œæ—¶ï¼Œä¸èƒ½å»å¤„ç†Fragmenté˜Ÿåˆ—ä¸­çš„æœ‰ä¾èµ–çš„ä»»åŠ¡</p></li></ul><p>æ‰‹æœºGPUç³»ç»Ÿå®ç°äº†åŠ¨æ€ç”µå‹è°ƒèŠ‚å’Œé¢‘ç‡ç¼©æ”¾ç³»ç»Ÿï¼ˆDVFSï¼Œdynamic voltage and frequency scalingï¼‰åœ¨æ‰§è¡Œè½»åº¦ä»»åŠ¡æ—¶ï¼Œé€šè¿‡é™ä½ç”µå‹å’Œé¢‘ç‡æ¥é™ä½èƒ½è€—</p><p>å½“ä½ çœ‹åˆ°GPU Utilizationæ¯”è¾ƒé«˜æ—¶ï¼Œä¸€å®šå…ˆçœ‹çœ‹GPU active cycles è®¡æ•°å™¨</p><p>å› ä¸ºGPUå¯èƒ½åªæ˜¯å› ä¸ºä¸ºäº†çœç”µè¿è¡Œåœ¨ä¸€ä¸ªæ¯”è¾ƒä½çš„é¢‘ç‡ä¸‹</p><p><strong>Non-fragment queue utilization</strong></p><p>æ­¤Counterè®°å½•äº†None-Fragmenté˜Ÿåˆ—ç›¸å¯¹äºæ•´ä½“GPU active cyclesçš„åˆ©ç”¨ç‡</p><p>åœ¨GPUç“¶é¢ˆæ—¶ï¼ŒæœŸæœ›çš„æ˜¯GPUçš„ä¸åŒé˜Ÿåˆ—éƒ½æ˜¯å¹¶è¡Œè¿è¡Œçš„ï¼Œå› æ­¤æœ€é‡è´Ÿè½½çš„é˜Ÿåˆ—åˆ©ç”¨ç‡åº”æ¥è¿‘100%</p><p>å¦‚æœæ²¡æœ‰ä¸€ä¸ªè´Ÿè½½çªå‡ºçš„é˜Ÿåˆ—å­˜åœ¨ï¼Œå¹¶ä¸”GPUä»ç„¶æ¥è¿‘100%åˆ©ç”¨ç‡</p><p>é‚£å°±è¡¨æ˜æœ‰ä¸€äº›åºåˆ—åŒ–æˆ–ä¾èµ–é—®é¢˜å¯¼è‡´é˜Ÿåˆ—å¹¶è¡Œæ•ˆç‡ä¸å¤Ÿç†æƒ³</p><p><strong>Fragment queue utilization</strong></p><p>æ­¤Counterè®°å½•äº†Fragmenté˜Ÿåˆ—ç›¸å¯¹äºæ•´ä½“GPU active cyclesçš„åˆ©ç”¨ç‡</p><p><strong>Tiler utilization</strong></p><p>æ­¤Counterè®°å½•äº†Tilerï¼ˆTBRåˆ†å—æ¨¡å—ï¼‰ç›¸å¯¹äºæ•´ä½“GPU active cyclesçš„åˆ©ç”¨ç‡</p><p>æ³¨æ„æ­¤CounteråŒ…å«äº†ç´¢å¼•é©±åŠ¨çš„Vertexç€è‰²è¿‡ç¨‹ï¼ˆIDVSï¼‰çš„è´Ÿè½½ï¼Œä¸åˆ†å—å›ºå®šç®¡çº¿çš„è´Ÿè½½</p><p>ä¸ä»…ä»…ä»£è¡¨åˆ†å—å›ºå®šç®¡çº¿çš„æ¶ˆè€—</p><p><strong>Interrupt pending utilization</strong></p><p>æ­¤Counterè®°å½•çš„ä¸­æ–­è¯·æ±‚ï¼ˆ<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Interrupt_request_%28PC_architecture">IRQ</a>)ï¼‰æ¨¡å—ç›¸å¯¹äºæ•´ä½“GPU active cyclesçš„åˆ©ç”¨ç‡</p><p><strong>åœ¨ä¸€ä¸ªè®¾è®¡ç²¾è‰¯çš„ç³»ç»Ÿä¸‹ï¼ŒIRQçš„åˆ©ç”¨ç‡åº”è¯¥ä½äº2%</strong></p><p>å¦‚æœæ­¤å€¼æ¯”è¾ƒé«˜ï¼Œåˆ™å¯èƒ½æœ‰ä¸€äº›ç³»ç»Ÿé—®é¢˜å¯¼è‡´CPUæ— æ³•é«˜æ•ˆçš„å¤„ç†ä¸­æ–­è¯·æ±‚</p><p><strong>External memory bandwidth</strong></p><p>æ­¤ç±»Countersè®°å½•äº†GPUå’Œä¸‹æ¸¸å†…å­˜ç³»ç»Ÿä¹‹é—´çš„å†…å­˜å¸¦å®½ä½¿ç”¨æƒ…å†µ</p><p>ä¹Ÿè®¸æ˜¯ç›´æ¥å’Œå¤–éƒ¨çš„DRAMäº¤äº’ï¼Œä¹Ÿè®¸æ˜¯å’ŒGPUå¤–éƒ¨çš„Cacheç³»ç»Ÿäº¤äº’</p><p>è®¿é—®å¤–éƒ¨DRAMæ˜¯éå¸¸è´¹ç”µçš„ï¼Œæ¯”è¾ƒç†æƒ³çš„æƒ…å†µæ˜¯æ¯ GB&#x2F;s çš„å¸¦å®½éœ€è¦100mWï¼ˆ0.1Wattï¼‰</p><p>å¯¹äºé«˜ç«¯è®¾å¤‡<a target="_blank" rel="noopener" href="https://community.arm.com/developer/tools-software/graphics/f/discussions/49127/arm---mali---g78-mp14-power-consumption---30fps">æ¥è®²</a>ï¼ˆ2021å¹´4æœˆï¼‰æƒ³ä»¥ç¨³å®šé¢‘ç‡æŒç»­è¿è¡Œçš„ï¼ˆCPU+GPU+memoryï¼‰èƒ½è€—é¢„ç®—å¤§è‡´ä¸º3.5Wattsï¼Œå¯ä»¥å‡ºç°å³°å€¼ 6-8 Wattsçš„æƒ…å†µï¼Œä½†å¦‚æœé•¿æ—¶é—´è¿è¡Œåœ¨å³°å€¼ï¼Œè®¾å¤‡å°±ä¼šè¿‡çƒ­</p><blockquote><p>è®°ä½é™ä½å¸¦å®½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–æ–¹å‘</p></blockquote><p>DRAMçš„IOæ˜¯éå¸¸è´¹ç”µçš„ï¼Œå³ä½¿CPUã€GPU Idleçš„æƒ…å†µä¸‹ä¹Ÿéœ€è¦æ¶ˆè€—å¤§è‡´ 1.4 Watts &#x2F; S</p><p>ç›®å‰é‡äº§çš„Â <strong>SOC</strong>Â å¯æä¾›æ€»å…±Â <strong>6-10GB&#x2F;sçš„DRAMå¸¦å®½</strong></p><p>Armä¸“å®¶æ¨èÂ <strong>GPUä½¿ç”¨3-5GB&#x2F;s</strong>Â çš„DRAMå¸¦å®½ï¼ŒåŠå¦‚æœç›®æ ‡æ˜¯60FPSï¼Œé‚£å°±æ˜¯Â <strong>æ¯å¸§80MB</strong>Â çš„é¢„ç®—</p><p>ä»¥åŠ<strong>32 Bytes&#x2F;Vertex</strong>çš„æ•°æ®ç”¨é‡</p><p>å¯ä»¥çœ‹åˆ°ä¸è®ºæ˜¯HSRè¿˜æ˜¯Vertex Shadingï¼Œå¤„ç†å®Œé¡¶ç‚¹åæœ‰ä¸€æ­¥å†™å…¥</p><blockquote><p>æ­¤é¡¶ç‚¹æ•°æ®çš„IOæ“ä½œå¯¹DRAMä¹Ÿæœ‰å¾ˆå¤§çš„å½±å“<br>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://youtu.be/BD1zXW7Uz8Q?t=2505">Vulkanised 2023: Getting started on mobile and best practices for Arm GPUs</a></p></blockquote><p><strong>å½“Load&#x2F;Storeå•å…ƒæœ€å¤§çš„å‹åŠ›æ˜¯DRAMå¸¦å®½æ—¶</strong></p><blockquote><p>éœ€è¦æ§åˆ¶é¢æ•°ï¼Œé¢çš„å¯†åº¦ã€‚ä»¥åŠVertexShaderä¸­Varyingå‚æ•°çš„å¤§å°<br>ï¼ˆå°½é‡ç”¨åŠç²¾åº¦ï¼Œç†è®ºä¸Šåªæœ‰positionã€depthéœ€è¦å…¨ç²¾åº¦ï¼‰<br>ä»¥æ§åˆ¶å¤–éƒ¨DRAMå†™å…¥å¸¦å®½</p></blockquote><p><strong>Output external read bytes</strong></p><p>æ­¤Counterè®°å½•äº†GPUå¯¹å¤–çš„æ€»ä½“è¯»å¸¦å®½ï¼š</p><p><strong>Output external write bytes</strong></p><p>æ­¤Counterè®°å½•äº†GPUå¯¹å¤–çš„æ€»ä½“å†™å¸¦å®½ï¼š</p><p><strong>External memory stalls</strong></p><p>æ­¤ç±»Countersè®°å½•äº†å½“GPUæƒ³è¦ä»ä¸‹æ¸¸è¯»å†™å†…å­˜æ—¶ï¼Œäº§ç”Ÿçš„ç­‰å¾…æƒ…å†µçš„æ¯”ä¾‹</p><p>å¦‚æœStallæ¯”ä¾‹è¾ƒé«˜ï¼Œåˆ™è¡¨æ˜æˆ‘ä»¬è¯·æ±‚äº†è¿‡å¤šçš„ä¸‹æ¸¸å†…å­˜æ•°æ®ï¼Œè¶…å‡ºäº†ç¡¬ä»¶ç³»ç»Ÿå¯æä¾›çš„èŒƒå›´</p><p>å› æ­¤éœ€è¦åšä¸€äº›ä¼˜åŒ–å†…å­˜å¸¦å®½çš„å·¥ä½œ</p><p><strong>Output external read stall rate</strong></p><p>æ­¤Counterè®°å½•äº†ä¸‹æ¸¸å†…å­˜è¯»å–æ“ä½œæ—¶äº§ç”Ÿç­‰å¾…çš„æ—¶é—´çš„æ¯”ä¾‹</p><p><strong>Output external write stall rate</strong></p><p>æ­¤Counterè®°å½•äº†ä¸‹æ¸¸å†…å­˜å†™å…¥æ“ä½œæ—¶äº§ç”Ÿç­‰å¾…çš„æ—¶é—´çš„æ¯”ä¾‹</p><p><strong>External memory read latency</strong></p><p>æ­¤ç±»Countersè®°å½•äº†GPUå†…å­˜åœ¨è¿›è¡Œè¯»æ“ä½œæ—¶äº§ç”Ÿçš„å»¶è¿Ÿæ¯”ä¾‹</p><p>å¦‚æœè¯»å»¶è¿Ÿè¾¾åˆ°256cyclesä»¥ä¸Šï¼Œåˆ™è¡¨æ˜æˆ‘ä»¬è¯·æ±‚äº†å¤ªå¤šå†…å­˜æ•°æ®ï¼Œå¯¼è‡´å†…å­˜ç³»ç»Ÿè¶…è´Ÿè·å·¥ä½œ</p><p>æ­¤æ—¶å°±éœ€è¦ä¼˜åŒ–å¸¦å®½</p><p><strong>Content behavior</strong></p><p>æ¸²æŸ“æ€§èƒ½ä½ä¸‹é€šå¸¸ç”±ä»¥ä¸‹ä¸‰ç‚¹é—®é¢˜å¯¼è‡´ï¼š</p><ul><li><p>è¦å¤„ç†çš„å†…å®¹å¾ˆé«˜æ•ˆçš„è¢«å†™å…¥ï¼Œä½†å¯¹äºç›®æ ‡è®¾å¤‡æ¥è®²èŠ±è´¹äº†è¿‡å¤šçš„æœºèƒ½å»è¿ç®—</p></li><li><p>å†…å®¹å†™å…¥ä¸é«˜æ•ˆï¼Œæœ‰ä¸€äº›å†—ä½™çš„æ•°æ®ä¹Ÿè¢«ä¼ è¾“åˆ°æ¸²æŸ“ç³»ç»Ÿä¸­ï¼Œå¯¼è‡´å…¶æ¯”æ­£å¸¸æ¸²æŸ“æ›´æ…¢</p></li><li><p>CPUä¾§çš„ä»£ç å¯¹APIçš„ä½¿ç”¨å¯¼è‡´äº†é«˜è´Ÿè½½çš„ä»»åŠ¡ï¼Œæˆ–è€…å› ä¸ºGPUã€é©±åŠ¨é—®é¢˜å¯¼è‡´ç­‰å¾…çš„GPU Bubbles</p></li></ul><p>Streamlineä¸­æ­¤ç±»åˆ«çš„Counteræ¨¡æ¿å°±æ˜¯ä¸ºäº†è§£å†³å‰ä¸¤ç§é—®é¢˜</p><p>æ¥é‡åŒ–æäº¤çš„è´Ÿè½½çš„å¤§å°å’Œæ•ˆç‡</p><p><strong>Geometry usage</strong></p><p>GPUæ¸²æŸ“ç®¡çº¿ä¼šé¦–å…ˆå¤„ç†é¡¶ç‚¹æ•°æ®æµ</p><p>æ­¤ç±»è®¡æ•°å™¨è®°å½•äº†æäº¤çš„Geometryæ€»é‡ä¸è¢«å‰”é™¤çš„æ€»é‡</p><p>Geometryæ˜¯GPUæ•°æ®ä¸­æœ€æ˜‚è´µçš„è¾“å…¥ä¹‹ä¸€ï¼Œå› ä¸ºé¡¶ç‚¹éœ€è¦32-64 byteså¤§å°çš„æ•°æ®è¯»å–æ“ä½œï¼Œè€Œå†…å­˜è¯»å–æ˜¯éå¸¸æ˜‚è´µçš„</p><p>å› æ­¤ï¼Œé«˜é¡¶ç‚¹æ•°çš„é«˜ç²¾åº¦æ¨¡å‹åº”è¯¥åªåœ¨éœ€è¦çš„æ—¶å€™å†å»æäº¤å®ƒ</p><p>å€¾å‘ä½¿ç”¨Normal Mapè€Œä¸æ˜¯é«˜ç²¾åº¦çš„æ¨¡å‹ï¼Œå¤šåˆ©ç”¨LODï¼Œè¿œå¤„ä¸è¦ç”¨å¤ªå¤æ‚çš„æ¨¡å‹</p><p><strong>Total input primitives</strong></p><p><strong>Total culled primitives</strong></p><p><strong>Visible primitives</strong></p><p><strong>Geometry culling</strong></p><p>æ‰€æœ‰è¾“å…¥çš„Geomertyéƒ½å¿…é¡»ç»è¿‡å‰”é™¤å¤„ç†åæ‰èƒ½çŸ¥é“å®ƒåœ¨ç›¸æœºè£å‰ªç©ºé—´çš„ä½ç½®</p><p>å› æ­¤è¢«å‰”é™¤çš„ç‰©ä½“å°±æ˜¯ä¸€é¡¹é¢å¤–çš„æ¶ˆè€—ï¼Œå³ä½¿å…¶æ²¡æœ‰å¯¹æœ€ç»ˆçš„ç”»é¢æœ‰è´¡çŒ®</p><p>è¿™ç»„Counterså¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£ä¸ºä½•ä¸‰è§’å½¢è¢«å‰”é™¤æ‰äº†</p><p>å¸®åŠ©ä½ æ­£ç¡®çš„æ‰¾åˆ°å‡ºé—®é¢˜çš„åœ°æ–¹</p><blockquote><p><a target="_blank" rel="noopener" href="https://community.arm.com/developer/tools-software/graphics/f/discussions/49160/shader-data-path-utilization-counters">Maliå»ºè®®</a>Visible primitives after cullingä¿æŒåœ¨50%çš„æ°´å¹³<br>Sample test cull rateè¿‡é«˜åˆ™è¡¨ç¤ºæœ‰å¤ªå¤šå¯†åº¦è¿‡é«˜çš„æ¨¡å‹å­˜åœ¨ï¼Œå¯¼è‡´å…¶è™½ç„¶åœ¨è§†é”¥ä¸­ï¼Œä¸”é¢å‘ç›¸æœº<br>ä½†å› ä¸ºå¤ªå°äº†æ²¡æœ‰å¯¹ç›®æ ‡åƒç´ æœ‰è´¡çŒ®ï¼Œä»è€Œè¢«ç¡¬ä»¶å‰”é™¤æ‰ï¼Œæµªè´¹äº†GPUç®—åŠ›ä¸å¸¦å®½<br>åˆ©ç”¨å¥½LODè®¾ç½®ï¼Œå»ºè®®ä¸€ä¸ªä¸‰è§’å½¢å¤§çº¦èƒ½è¦†ç›–10-15ä¸ªåƒç´ </p></blockquote><p>Maliçš„å‰”é™¤ç®¡çº¿æµç¨‹å¦‚ä¸‹å›¾ï¼Œä¸‹é¢ä»‹ç»çš„Countersåˆ™è¡¨ç¤ºäº†æ¯ä¸€æ­¥é‡Œè¢«å¹²æ‰çš„æ¨¡å‹æ¯”ä¾‹</p><p><strong>IDVS shading</strong></p><p>Mali Bifrost GPU ä½¿ç”¨äº†ä¼˜åŒ–åçš„ IDVSï¼ˆindex-driven vertex shadingï¼‰ å¤„ç†ç®¡çº¿</p><p>é¡¶ç‚¹ç€è‰²è¢«åˆ†ä¸ºä¸¤æ­¥ï¼šPositionã€Varying Shading</p><p>Varying Shadingä»…å‘ç”Ÿåœ¨å‰”é™¤å­˜æ´»åçš„ä¸‰è§’å½¢ä¸Š</p><p>æ­¤ç»„Countersè®°å½•äº†IDVSç®¡çº¿è¾“å…¥ç»™Shader Coreçš„é¡¶ç‚¹ç€è‰²ä»»åŠ¡é‡</p><p>æ­¤ç®¡çº¿å­˜åœ¨å˜æ¢åçš„é¡¶ç‚¹ç¼“å­˜ï¼Œä¿å­˜äº†è¿‘æœŸè¢«ç€è‰²çš„é¡¶ç‚¹æ•°æ®ï¼Œæ¥é¿å…ç›¸åŒé¡¶ç‚¹çš„é‡å¤ç€è‰²</p><p><strong>å½“æ¨¡å‹çš„Index Bufferç©ºé—´ç›¸å…³æ€§æ¯”è¾ƒå·®æ—¶ï¼Œä¼šå¯¼è‡´é¡¶ç‚¹è¢«ç€è‰²å¤šæ¬¡</strong>ï¼Œå› ä¸ºä»–å¯èƒ½å·²ç»è¢«Cacheåˆ·æ‰</p><blockquote><p>è€ƒè™‘æ£€æµ‹æ¨¡å‹é¡¶ç‚¹çš„ç©ºé—´ç›¸å…³æ€§ï¼Œç»Ÿä¸€åšè‡ªåŠ¨åŒ–å¤„ç†ï¼Œå‡å°‘é‡å¤ç€è‰²ï¼Ÿ</p></blockquote><p><strong>Position shader thread invocations</strong></p><p><strong>Varying shader thread invocations</strong>Â <strong>Fragment overview</strong></p><p>æ­¤ç±»Countersè®°å½•äº†è¿™äº›GPUç›¸å…³çš„å·¥ä½œè´Ÿè½½ï¼š</p><p>è¢«ç€è‰²çš„åƒç´ æ€»æ•°ã€å¹³å‡èŠ±è´¹åœ¨ä¸€ä¸ªåƒç´ ä¸Šçš„GPU Cycles æ•°é‡ï¼Œä»¥åŠæ¯ä¸ªåƒç´ ç€è‰²å¹³å‡æœ‰å¤šå°‘é¢çš„è´¡çŒ®</p><p>å¯ä»¥è®¾ç½®ä¸€ä¸ªCycleé¢„ç®—ç»™ä½ ä»¬çš„APPï¼Œä½¿ç”¨Cycles&#x2F;Pixelä¸ºå•ä½</p><p>åˆ©ç”¨ä¸‹é¢çš„å…¬å¼è®¡ç®—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// ä»¥å®‰å“é«˜é…ä¸Šæ¸¸è®¾å¤‡ Mali-G77MC9 ä¸ºä¾‹ï¼Œé¢‘ç‡836MHzï¼Œ9æ ¸</span><br><span class="line">// 1368x648ï¼Œ60FPS</span><br><span class="line">shaderCyclesPerSecond = MaliCoreCount MaliFrequency</span><br><span class="line">pixelsPerSecond = Screen_Resolution * Target_FPS</span><br><span class="line"></span><br><span class="line">shaderCyclesPerSecond = 9 * 836 * 1000000</span><br><span class="line">pixelsPerSecond = 1368 * 648 * 60</span><br><span class="line"></span><br><span class="line">// Max cycle budget assuming perfect execution</span><br><span class="line">maxBudget = shaderCyclesPerSecond / pixelsPerSecond</span><br><span class="line">maxBudget = 141</span><br><span class="line"></span><br><span class="line">// Real-world cycle budget assuming 85% utilization</span><br><span class="line">realBudget = 0.85 * maxBudget</span><br><span class="line">realBudget = 120</span><br></pre></td></tr></table></figure><p><strong>Pixels</strong></p><p>æ­¤Counterè¡¨ç¤ºæ‰€æœ‰RenderPassæ‰€ç€è‰²çš„åƒç´ æ•°é‡</p><p>æ³¨æ„è¿™ä¸ªå€¼å¯èƒ½å’Œå®é™…å€¼æœ‰å‡ºå…¥ï¼Œå› ä¸ºå†…éƒ¨è®¡æ•°ç¡¬ä»¶ä¼šå¯¹Screenå®½é«˜åšRoundï¼Œè®©ä»–æ˜¯32çš„å€æ•°</p><p>å³ä½¿é‚£äº›åƒç´ ä¸åœ¨å±å¹•é‡Œæˆ–è€…è¢«è£å‰ªæ‰äº†ï¼Œä¹Ÿä¼šè®¡ç®—ä¸Šå»</p><p><strong>Cycles per pixel</strong></p><p>æ­¤Counterè¡¨ç¤ºæ¯æ¸²æŸ“ä¸€ä¸ªåƒç´ æ‰€æ¶ˆè€—çš„GPU cyclesæ•°é‡ï¼ŒåŒ…æ‹¬é¡¶ç‚¹ç€è‰²çš„æ¶ˆè€—</p><p>å¯ä»¥ç”¨ä¸Šé¢çš„å…¬å¼ä¼°ç®—å‡ºæ¥é¢„ç®—</p><p><strong>Fragments per pixel</strong></p><p>æ­¤Counterè¡¨ç¤ºæ¯ä¸ªåƒç´ ä¸€å…±æœ‰å¤šå°‘ç‰‡å…ƒï¼ˆFragmentï¼‰æœ‰è´¡çŒ®ï¼Œå³Overdrawçš„æƒ…å†µ</p><p>æ³¨æ„ï¼šæ­¤Counterè®¤ä¸º tile å¤§å°æ˜¯ 16x16ï¼Œå¯¹äºå¤§äº256bitæ¯åƒç´ çš„Pass</p><p>Tileå¤§å°ä¼šè‡ªåŠ¨è°ƒå°ï¼Œè¿™ä¸ªå€¼å°±ä¸å‡†ç¡®äº† ã€‚ã€‚ã€‚</p><p>G76ï¼šÂ <code>($MaliCoreWarpsFragmentWarps * 8) / ($MaliCoreTilesTiles * 256)</code></p><p>G77ï¼šÂ <code>($MaliCoreWarpsFragmentWarps * 16) / ($MaliCoreTilesTiles * 256)</code></p><p><strong>Fragment depth and stencil testing</strong></p><p>æ­¤ç»„Countersç”¨æ¥çœ‹Fragmentçš„Quadsåœ¨ç€è‰²æ—¶ï¼Œä¸Early-ZS&#x2F;Late-ZSï¼ˆDepthã€Stencilï¼‰æ¨¡å—å·¥ä½œçš„æƒ…å†µ</p><p>è®©å°½å¯èƒ½å¤šçš„Fragmentsè¢«Early-ZSå‰”é™¤æ‰è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒæ¯”Late-ZSè¦é«˜æ•ˆå¾—å¤š</p><p><strong>å› æ­¤Mali GPUå»ºè®®å°†ä¸é€æ˜ç‰©ä½“ç”±è¿‘è‡³è¿œè¿›è¡Œæ’åºå†æäº¤æ¸²æŸ“</strong></p><p><strong>Early ZS tested quad percentage</strong></p><p>æ­¤Counterè¡¨ç¤ºè¿›è¡ŒEarly ZSæµ‹è¯•çš„å…‰æ …åŒ–åçš„Quadsçš„æ¯”ä¾‹</p><p><strong>Early ZS updated quad percentage</strong></p><p>æ­¤Counterè¡¨ç¤ºæ›´æ–°äº†FrameBufferçš„å…‰æ …åŒ–åçš„Quadsçš„æ¯”ä¾‹</p><p><strong>Early ZS killed quad percentage</strong></p><p><strong>FPK killed quad percentage</strong></p><p>æ­¤Counterè¡¨ç¤ºè¢«Forward Pixel Killï¼ˆFPKï¼‰Hidden Surface Removalå¹²æ‰çš„å…‰æ …åŒ–åçš„Quadsçš„æ¯”ä¾‹</p><p><strong>Late ZS tested quad percentage</strong></p><p><strong>Late ZS killed quad percentage</strong></p><p>æ­¤Counterè¡¨ç¤ºè¢«Late ZSå¹²æ‰çš„å…‰æ …åŒ–åçš„Quadsçš„æ¯”ä¾‹</p><p>è¿›è¡ŒLate ZSæ£€æµ‹çš„Quadsåœ¨è¢«å¹²æ‰å‰ï¼Œå°†æ‰§è¡Œéƒ¨åˆ†Fragment Shaderè¿ç®—</p><p>å› æ­¤å¦‚æœLate ZSå¯ä»¥å¹²æ‰å¾ˆå¤šQuadsï¼Œæ„å‘³ç€è¿™é‡Œæœ‰ä¸å°‘çš„æ€§èƒ½å¼€é”€ä¸èƒ½è€—çš„æµªè´¹</p><p>ä½ åº”è¯¥å°†Late ZSçš„Quadsæ•°é‡é™åˆ°æœ€ä½</p><p>å¯¼è‡´Late ZSçš„ä¸»è¦åŸå› æœ‰ï¼š</p><ul><li><p>æ˜ç¡®ä½¿ç”¨äº†Discardå‘½ä»¤</p></li><li><p>éšå¼ä½¿ç”¨äº†Discardå‘½ä»¤ï¼ˆAlpha-to-coverageï¼‰</p></li><li><p>ç‰‡å…ƒçš„Depthæ•°å€¼æ˜¯Shaderè®¡ç®—å‡ºæ¥çš„</p></li><li><p>å½±å“å…±äº«èµ„æºï¼Œå¦‚å…±äº«çš„ Storage Bufferã€å›¾ç‰‡ã€åŸå­å˜é‡ç­‰</p></li></ul><p>å½“ä½ åœ¨Passå¼€å§‹æ¸²æŸ“æ—¶å¿˜è®°æ¸…ç†Framebufferçš„depthæ—¶ï¼Œä¼šå¯¼è‡´é©±åŠ¨ç”Ÿæˆé¢„åŠ è½½ZSå€¼çš„Wrap</p><p>è¿™äº›é¢å¤–æ¶ˆè€—å°†è¢«è®¡ç®—åˆ° Late ZS çš„Counterä¸­ï¼Œå› æ­¤å¦‚æœä¸éœ€è¦ï¼Œä¸€å®šå…ˆClearæ•°æ®å†æ¸²æŸ“</p><p><strong>Shader core data path</strong></p><p>æ­¤ç»„Countersä¸æ‰§è¡ŒFragmentã€NonFragmentè´Ÿè½½çš„Mali Shader Coreçº¿ç¨‹å‘èµ·å•å…ƒæœ‰å…³</p><p>Non-fragmentè´Ÿè½½åŒ…å«ï¼švertex shading, geometry shading, tessellation shading, compute shading</p><p><strong>Shader core workload</strong></p><p>æ­¤ç»„Countersè¡¨ç¤ºä¸ºè¿™ä¸¤ç§è´Ÿè½½å‘èµ·çš„Wrapsæ€»æ•°é‡</p><p>æ¯ä¸ªWrapè¡¨ç¤ºNä¸ªä»¥å¸§åŒæ­¥æ‰§è¡Œçš„Shaderçº¿ç¨‹ï¼ŒWrapå®½åº¦ï¼ˆNï¼‰ä¸å…·ä½“GPUæœ‰å…³</p><p>å¯¹äºMali G76æ¥è®²ï¼ŒWrapå®½åº¦æ˜¯8</p><p><strong>Non-fragment warps</strong></p><p>å¯¹Compute Shaderæ¥è®²ï¼Œä¸ºäº†æ›´å…¨é¢çš„åˆ©ç”¨æœºèƒ½</p><p>æ‰€æœ‰çš„Computeä»»åŠ¡ç»„æ•°é‡åº”è¯¥æ˜¯Wrapå¤§å°çš„å€æ•°</p><p><strong>Fragment warps</strong></p><p><strong>Shader core throughput</strong></p><p>æ­¤ç»„Countersè¡¨ç¤ºShaderCoreå¹³å‡æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹æ‰€èŠ±è´¹çš„Cyclesæ•°é‡</p><p>æ³¨æ„è¿™é‡ŒæŒ‡çš„æ˜¯å¹³å‡çš„ååé‡ï¼Œè€Œä¸æ˜¯æ¶ˆè€—</p><p>å› æ­¤Cyclesä¸­ä¹ŸåŒ…å«äº†ä¸å…¶ç›¸å…³çš„å»¶è¿Ÿæ¶ˆè€—ï¼ˆæ¯”å¦‚å†…å­˜ç›¸å…³å»¶è¿Ÿï¼‰</p><p><strong>Non-fragment cycles per thread</strong></p><p>æ­¤Counterè¡¨ç¤ºShaderCoreå¹³å‡å¤„ç†ä¸€ä¸ªNon-fragmentçº¿ç¨‹æ‰€èŠ±è´¹çš„Cyclesæ•°é‡</p><p>æ³¨æ„è¿™é‡Œæµ‹é‡çš„æ˜¯ååé‡ï¼Œå½“å€¼å¾ˆé«˜æ—¶ä¸ä¸€å®šä»£è¡¨æ€§èƒ½æ¶ˆè€—å¾ˆå¤§</p><p>æœ‰å¯èƒ½æ˜¯è¿‡é«˜çš„å†…å­˜è¯»å†™å»¶è¿Ÿå¯¼è‡´çš„é«˜Cyclesæ•°é‡</p><p>å¹¶ä¸”è¿˜åŒ…å«å¹¶è¡Œæ‰§è¡Œçš„Fragmentã€None-Fragmentä»»åŠ¡ä¹‹é—´é€šä¿¡äº¤æµçš„æ¶ˆè€—</p><p>å› æ­¤æ­¤Counteræ˜¯ä¸€ä¸ªæŒ‡ç¤ºæ€§çš„æŒ‡æ ‡ï¼Œä¸ä»£è¡¨å‡†ç¡®çš„æ¶ˆè€—</p><p><strong>Fragment cycles per thread</strong></p><p><strong>Shader data path utilization</strong></p><p>æ­¤ç±»Countersä¸ShaderCoreä¸­æ´»åŠ¨ï¼ˆActivityï¼‰å±‚é¢çš„æ•°æ®è·¯å¾„ç›¸å…³</p><p>å¸®åŠ©æˆ‘ä»¬å®šä½è¯¥å…³å¿ƒçš„è´Ÿè½½ç±»å‹ï¼Œä»¥åŠè¿™å…¶ä¸­æ˜¯å¦æœ‰ä»»ä½•ä»»åŠ¡å®‰æ’ä¸Šçš„é—®é¢˜</p><p><strong>Non-fragment utilization</strong></p><p><strong>Fragment utilization</strong></p><p><strong>Fragment FPK buffer active percentage</strong></p><p>æ­¤Counterè¡¨ç¤ºèŠ±è´¹åœ¨æ‰§è¡Œæ ¸å¿ƒï¼ˆExecution Coreï¼‰ä¹‹å‰çš„</p><p>Forward Pixel Kill Quad Bufferä¸Šçš„Cycleç™¾åˆ†æ¯”ï¼Œå…¶åŒ…å«è‡³å°‘ä¸€ä¸ªQuad</p><p>æ ¹æ®<a target="_blank" rel="noopener" href="https://community.arm.com/developer/tools-software/graphics/f/discussions/49160/shader-data-path-utilization-counters">Armçš„æç¤º</a>ï¼Œåº”ä¿æŒæ­¤percentageå°½å¯èƒ½åœ°é«˜</p><p><strong>Execution core utilization</strong></p><p>æ­¤Counteræè¿°äº†å¯ç¼–ç¨‹æ‰§è¡Œæ ¸å¿ƒçš„åˆ©ç”¨ç‡ç™¾åˆ†æ¯”</p><p>å¦‚æœåˆ©ç”¨ç‡æ¯”è¾ƒä½ï¼Œåˆ™å¯èƒ½è¡¨ç¤ºæœ‰æ€§èƒ½æŸè€—</p><p>å› ä¸ºæˆ‘ä»¬æœ‰é¢å¤–çš„Shader Core Cycleå¯ä»¥è¢«ç”¨æ¥åšè¿ç®—</p><p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæ­¤é¢å¤–æ¶ˆè€—æ˜¯æ— æ³•é¿å…çš„</p><p>å› ä¸ºRender Passç¡®å®æ˜¯æœ‰ä¸€äº›åŒºåŸŸä¸éœ€è¦è¿›è¡ŒShaderè¿ç®—</p><p><strong>å°†ä¼˜åŒ–çš„é‡ç‚¹æ”¾åœ¨é‚£äº›æœ‰å¤§é‡å†—ä½™Geomertyçš„å±å¹•åŒºåŸŸ</strong></p><p><strong>å› ä¸ºFragmentå‰ç«¯æ— æ³•æ›´é«˜æ•ˆçš„ç”ŸæˆWrap</strong></p><p><strong>å¯¼è‡´äº†å¯ç¼–ç¨‹æ ¸å¿ƒæ²¡æœ‰ä»»åŠ¡å»æ‰§è¡Œ</strong></p><p>è¿™æœ‰å¯èƒ½æ˜¯æœ‰å¤§é‡çš„ä¸‰è§’å½¢è¢«ZSæˆ–HSRå‰”é™¤æ‰äº†</p><p>æˆ–è€…å› ä¸ºä¸‰è§’å½¢çš„å¯†åº¦è¿‡é«˜å¯¼è‡´å¯ç”Ÿæˆçš„çº¿ç¨‹æ•°é‡æœ‰é™</p><p><strong>Shader core functional units</strong></p><p>æ­¤ç»„Countersä¸ºæˆ‘ä»¬å±•ç¤ºäº†å¯ç¼–ç¨‹Shader Coreä¸­ä¸åŒçš„å¯ç¼–ç¨‹ã€å›ºå®šç®¡çº¿è¿ç®—å•å…ƒçš„æ‰§è¡Œæƒ…å†µ</p><p>éƒ½æ˜¯ä¸æ‰§è¡ŒShaderç¨‹åºç›¸å…³çš„ç¡¬ä»¶å•å…ƒ</p><p><strong>Shader unit utilization</strong></p><p>æ­¤ç»„Countersä»¥å½’ä¸€åŒ–çš„æŒ‡æ ‡ï¼Œæè¿°äº†Shader Coreä¸­ä¸åŒç¡¬ä»¶å•å…ƒçš„ä»»åŠ¡æ‰§è¡Œæƒ…å†µ</p><p>è´Ÿè½½æœ€é‡çš„ç¡¬ä»¶å•å…ƒæ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„ä¼˜åŒ–é‡ç‚¹</p><p>å½“ç„¶ï¼Œé™ä½å…¶ä¸­ä»»æ„å•å…ƒçš„è´Ÿè½½ä¹Ÿä¼šå¯¹å‘çƒ­å’ŒåŠŸè€—æä¾›ä¸å°‘çš„å¸®åŠ©</p><p><strong>Execution engine utilization</strong></p><p><strong>Varying unit utilization</strong></p><p><strong>Texture unit utilization</strong></p><p><strong>Load&#x2F;store unit utilization</strong></p><p>è´Ÿè´£ä»L2&#x2F;å¤–éƒ¨DRAMè¯»å–ã€å†™å…¥æ•°æ®</p><blockquote><p>å³ä¸åŒ…æ‹¬ä»LSCï¼ˆShader Coreä¸­çš„Load&#x2F;Store Leve 1 Cacheï¼‰çš„æ¶ˆè€—ï¼ŒLSCä¸€èˆ¬æ˜¯16KBçš„é…ç½®</p></blockquote><p>L2ç¼“å­˜æ˜¯å…±äº«çš„ç¼“å­˜ï¼ŒåŒ…æ‹¬shaders, descriptors, buffers, texturesç­‰æ•°æ®ï¼Œä¸€èˆ¬æ˜¯2-4MiBçš„é…ç½®</p><p><strong>Shader workload properties</strong></p><p>æ­¤ç»„Countesä»¥å½’ä¸€åŒ–çš„æŒ‡æ ‡ï¼Œå‘Šè¯‰æˆ‘ä»¬å¯èƒ½å½±å“è´Ÿè½½æ‰§è¡Œæ•ˆç‡çš„æ•°æ®</p><p>ä¹Ÿä¼šæç¤ºæˆ‘ä»¬ä¸€äº›æ½œåœ¨çš„æœ‰ä¼˜åŒ–ç©ºé—´çš„åœ°æ–¹</p><p><strong>Partial coverage rate</strong></p><p>æ­¤Counterè¡¨ç¤ºåŒ…å«æ²¡æœ‰è¦†ç›–ç‡çš„Wrapsçš„æ¯”ä¾‹</p><p>å¦‚æœè¿™ä¸ªæ¯”ä¾‹æ¯”è¾ƒé«˜ï¼Œå³è¡¨ç¤ºä½ çš„èµ„æºä¸‰è§’å½¢å¯†åº¦è¿‡é«˜ï¼Œè¿™æ˜¯å¾ˆè€—è´¹æ€§èƒ½çš„</p><p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½¿ç”¨LODæŠ€æœ¯ï¼Œè®©è¿œå¤„çš„èµ„æºä½¿ç”¨ç²¾ç®€çš„æ¨¡å‹</p><p><strong>Full quad warp rate</strong></p><p>æ­¤Counterè¡¨ç¤ºQuadsæ˜¯å¦å®Œå…¨åˆ©ç”¨äº†æ‰€æœ‰Wrapçš„æ¯”ä¾‹</p><p>å¦‚æœæœ‰å¾ˆå¤šWrapæ²¡æœ‰å®Œå…¨åˆ©ç”¨ï¼Œé‚£ä¹ˆæ€§èƒ½å¯èƒ½å°±ä¼šæ¯”è¾ƒä½ä¸‹</p><p>å› ä¸ºWrapä¸­çš„å¯ç”¨çº¿ç¨‹æ²¡æœ‰è¢«å®Œå…¨åˆ©ç”¨èµ·æ¥</p><p>æé«˜Full Wrapå¯èƒ½çš„æ–¹æ³•ï¼š</p><ul><li><p>Compute Shader ä½¿ç”¨Wrapå®½åº¦å€æ•°çš„WorkGrouops</p></li><li><p>DrawCallé¿å…å‡ºç°é«˜å¯†åº¦çš„æ¨¡å‹</p></li></ul><p><strong>Warp divergence percentage</strong></p><p>æ­¤Counterè¡¨ç¤ºäº†Wrapä¸­æœ‰å‡ºç°æ‰§è¡Œåˆ†æ”¯æƒ…å†µçš„æŒ‡ä»¤æ•°çš„æ¯”ä¾‹ï¼ˆG77ï¼‰</p><p><strong>Diverged instruction issue rate</strong></p><p>æ­¤Counterè¡¨ç¤ºäº†Wrapä¸­æœ‰å‡ºç°æ‰§è¡Œåˆ†æ”¯æƒ…å†µçš„æŒ‡ä»¤æ•°çš„æ¯”ä¾‹ï¼ˆG76ï¼‰</p><p><strong>All registers warp rate</strong></p><p>æ­¤Counterè¡¨ç¤ºéœ€è¦å¤šäº32ä¸ªå¯„å­˜å™¨çš„Wrapçš„æ¯”ä¾‹</p><p>å½“è¿™ä¸ªå€¼æ¯”è¾ƒé«˜æ—¶ï¼Œæ— æ³•å¼€å¯æ›´å¤šçº¿ç¨‹å°†ä¼šå¯¼è‡´GPUæŒç»­å¿™ç¢Œ</p><p>å°¤å…¶æ˜¯åœ¨åŒæ—¶å†…å­˜å»¶è¿Ÿå¾ˆé«˜çš„æƒ…å†µä¸‹</p><p><strong>Constant tile kill rate</strong></p><p>æ­¤Counterè¡¨ç¤ºè¢«<a target="_blank" rel="noopener" href="https://developer.arm.com/documentation/101897/0200/fragment-shading/transaction-elimination">TE</a>Â CRCï¼ˆ<a target="_blank" rel="noopener" href="https://www.arm.com/why-arm/technologies/graphics-technologies/transaction-elimination">Transaction Elimination</a>ï¼‰æ£€æŸ¥æ‰€å¹²æ‰çš„Tileæ¯”ä¾‹</p><p>å¦‚æœè¿™ä¸ªå€¼çš„æ¯”ä¾‹æ¯”è¾ƒé«˜ï¼Œå°±æ„å‘³ç€ä½ çš„Framebufferæ¯ä¸€å¸§éƒ½æœ‰å¤§é‡çš„åŒºåŸŸæ²¡æœ‰æ”¹å˜</p><p>å°è¯•è€ƒè™‘ä½¿ç”¨è£å‰ªçŸ©å½¢ï¼ˆScissor Rectanglesï¼‰æ¥å‡å°‘é‡ç»˜çš„åŒºåŸŸ</p><p>ä¸å…¶ç›¸å…³çš„<a target="_blank" rel="noopener" href="https://community.arm.com/cn/b/blog/posts/flush">GLæ‰©å±•</a>ï¼š</p><ul><li><p><a target="_blank" rel="noopener" href="https://www.khronos.org/registry/EGL/extensions/KHR/EGL_KHR_partial_update.txt">EGL_KHR_partial_update</a></p></li><li><p>EGL_EXT_swap_buffers_with_damage</p></li></ul><p><strong>TEæ˜¯Maliçš„ä¸€é¡¹ç”¨äºä¼˜åŒ–å¸¦å®½çš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥è®¡ç®—Tileæ˜¯å¦ç›¸è¾ƒäºä¸Šä¸€å¸§æœ‰æ‰€æ”¹å˜</strong></p><p><strong>ä»è€Œé‡å¤åˆ©ç”¨é‚£äº›æ²¡æœ‰æ”¹å˜çš„Tileæ•°æ®ï¼Œæ¥èŠ‚çº¦è¿ç®—æœºèƒ½çš„æŠ€æœ¯</strong></p><p><strong>Shader core varying unit</strong></p><p>æ­¤ç»„Countersæè¿°Varying Unitçš„ä½¿ç”¨æƒ…å†µ</p><p>æ­¤ç¡¬ä»¶å•å…ƒè¢«ç”¨äºFragment Shaderä¹‹é—´çš„æ’å€¼ä¸Š</p><p>æ­¤æ’å€¼å™¨æœ‰32-bitå®½åº¦çš„æ•°æ®é€šé“ï¼Œå› æ­¤16-bitçš„æ’å€¼æ€§èƒ½ç†è®ºä¸Šæ˜¯32-bitæ•°æ®çš„ä¸¤å€</p><p>å› æ­¤å»ºè®®åœ¨Fragment shaderä¸­ä½¿ç”¨ä¸­ç²¾åº¦Varyingçš„æ•°æ®æ ¼å¼</p><p>å¹¶ä¸”å»ºè®®å°†16-bitçš„å€¼Packåˆ°vec2&#x2F;vec4ä¸­</p><p><strong>Varying unit usage</strong></p><p><strong>Varying cycles</strong></p><p><strong>16-bit interpolation active</strong></p><p><strong>32-bit interpolation active</strong></p><p>å½“ä½ çš„Varying unitæ˜¯ç“¶é¢ˆæ—¶ï¼Œè€ƒè™‘ç»™Fragment Shaderè¾“å…¥æ›´å¤šçš„16-bitæ•°å€¼ä»¥æå‡æ€§èƒ½</p><p><strong>Shader core texture unit</strong></p><p>æ­¤ç»„Countersæè¿°äº†è´´å›¾å•å…ƒçš„ä½¿ç”¨æƒ…å†µ åŒ…å«äº†æ‰€æœ‰è´´å›¾é‡‡æ ·ä»¥åŠè¿‡æ»¤æ“ä½œçš„è´Ÿè½½</p><p><strong>Texture unit usage</strong></p><p>æ­¤ç»„Countersè¡¨ç¤ºè´´å›¾å•å…ƒçš„ä½¿ç”¨æƒ…å†µï¼Œå³æ¯ä¸ªæŒ‡ä»¤æ‰€æ¶ˆè€—çš„å¹³å‡Cycleæ•°</p><p>ä¸åŒçš„GPU Cycles&#x2F;Sampleçš„æ€§èƒ½ä¸åŒï¼Œæ¯”å¦‚Mali G76çš„æœ€ä½³æ€§èƒ½æ—¶0.5 Cycles&#x2F;Sampleï¼ˆåŒçº¿æ€§è¿‡æ»¤ï¼‰</p><p><strong>Texture filtering cycles</strong></p><p>æ­¤Counterè¡¨ç¤ºæ‰€æœ‰ä¸è´´å›¾è¿‡æ»¤æœ‰å…³çš„Cycleæ€»æ•°</p><p>æœ‰çš„æŒ‡ä»¤éœ€è¦å¤šäºä¸€ä¸ªCycleæ‰å¯ä»¥å®Œæˆï¼Œå› ä¸ºéœ€è¦è·å–æ•°æ®ã€å¹¶ä¸”åšè¿‡æ»¤</p><p>ä¸€æ¬¡4ä¸ªé‡‡æ ·çš„Quadçš„æ¶ˆè€—ä¸ºï¼š</p><ul><li><p>2DåŒçº¿æ€§è¿‡æ»¤ 2 Cycles</p></li><li><p>2Dä¸‰çº¿æ€§è¿‡æ»¤ 4 Cycles</p></li><li><p>3DåŒçº¿æ€§è¿‡æ»¤ 4 Cycles</p></li><li><p>3Dä¸‰çº¿æ€§è¿‡æ»¤ 8 Cycles</p></li></ul><p><strong>Texture filtering cycles per instruction</strong></p><p>æ­¤Counterè¡¨ç¤ºæ¯ä¸ªæŒ‡ä»¤å¹³å‡èŠ±è´¹åœ¨è´´å›¾é‡‡æ ·ä¸Šçš„Cyclesæ€»æ•°</p><p>å¯¹äºè´´å›¾å•å…ƒæ˜¯ç“¶é¢ˆçš„æƒ…å†µï¼Œå½“ä»–çš„CPIæ¯”Texture samples per cycleä½æ—¶</p><p>è€ƒè™‘ä½¿ç”¨Cyclesæ¶ˆè€—æ›´å°çš„è´´å›¾è¿‡æ»¤å™¨</p><p>ä¸åŒè¿‡æ»¤æ“ä½œçš„æ›´è¯¦ç»†çš„æ€§èƒ½æ•°æ®è§Texture issue cycleså°ç»“</p><p><strong>Texture unit workload properties</strong></p><p>æ­¤ç±»Countersè¡¨ç¤ºè´´å›¾å•å…ƒä¸­æ•°æ®çš„è¡¨ç°æƒ…å†µ</p><p>æ¯”å¦‚ä½¿ç”¨è´´å›¾å‹ç¼©ã€Mipmapã€ä¸‰çº¿æ€§è¿‡æ»¤ç­‰æ“ä½œçš„æ•°é‡</p><p><strong>Texture accesses using trilinear filter percentage</strong></p><p><strong>Texture accesses using mipmapped texture percentage</strong></p><p><strong>Texture unit memory usage</strong></p><p>æ­¤ç±»Counterè¡¨ç¤ºå¹³å‡ä¸€ä¸ªè´´å›¾é‡‡æ ·æ“ä½œæ‰€äº§ç”Ÿçš„L2 Cacheæˆ–å¤–éƒ¨å†…å­˜è¯»å–çš„æ•°æ®å¤§å°</p><p><strong>Texture bytes read from L2 per texture cycle</strong></p><p>æ­¤Counterè¡¨ç¤ºå¹³å‡æ¯ä¸ªè¿‡æ»¤Cycleä¸­L2å†…å­˜è¯»å–çš„æ•°æ®å¤§å°</p><p>é€šè¿‡æ­¤Counterå¯åˆ¤æ–­è´´å›¾çš„L1 Cacheæƒ…å†µæœ‰å¤šå¥½</p><p>å¦‚æœæ¯æ¬¡å†…å­˜è¯»å–éƒ½éœ€è¦å¾ˆå¤§çš„L2å†…å­˜å¸¦å®½ï¼Œä½ å°±éœ€è¦çœ‹ä¸€ä¸‹å½“å‰çš„è´´å›¾è®¾ç½®æƒ…å†µï¼š</p><ul><li><p>ç¦»çº¿çš„è´´å›¾æ‰“å¼€mipmap</p></li><li><p>ä½¿ç”¨ASTCã€ETCå‹ç¼©ç¦»çº¿è´´å›¾</p></li><li><p>ä¿®æ”¹è¿è¡Œæ—¶ç”Ÿæˆçš„FrameBufferã€è´´å›¾æ ¼å¼ä¸ºæ›´å°çš„æ ¼å¼</p></li><li><p>é™ä½ä¸ºäº†é”åŒ–è´´å›¾çš„è´Ÿçš„LODåç§»</p></li><li><p>é™ä½å„å‘å¼‚æ€§è¿‡æ»¤çš„MAX_ANISOTROPYç­‰çº§</p></li></ul><p><strong>Texture bytes read from external memory per texture cycle</strong></p><p>æ­¤Counterè¡¨ç¤ºå¹³å‡æ¯ä¸ªè¿‡æ»¤Cycleä¸­ç³»ç»Ÿå†…å­˜è¯»å–çš„æ•°æ®å¤§å°</p><p>é€šè¿‡æ­¤Counterå¯åˆ¤æ–­è´´å›¾çš„L2 Cacheæƒ…å†µæœ‰å¤šå¥½</p><p>å¦‚æœæ¯æ¬¡å†…å­˜è¯»å–éƒ½éœ€è¦å¾ˆå¤§çš„ç³»ç»Ÿå†…å­˜å¸¦å®½ï¼Œä½ å°±éœ€è¦çœ‹ä¸€ä¸‹å½“å‰çš„è´´å›¾è®¾ç½®æƒ…å†µ</p><p><strong>Shader core load&#x2F;store unit</strong></p><p>æ­¤ç»„Countersè¡¨ç¤ºäº†Load&#x2F;Storeå•å…ƒä¸­æ•°æ®ä½¿ç”¨æƒ…å†µ</p><p>æ­¤å•å…ƒè´Ÿè´£æ‰€æœ‰Shader å†…å­˜IOæ“ä½œï¼Œé™¤è´´å›¾å’ŒFramebufferå†™å›ä¹‹å¤–</p><p>è¡¨ç¤ºShader Coreç‹¬æœ‰çš„LSCï¼ˆLoad&#x2F;Store L1 Cacheï¼Œ16Kï¼‰</p><p><strong>Load&#x2F;store unit usage</strong></p><p>æ­¤Countersæè¿°äº†Load&#x2F;Storeå•å…ƒè¿›è¡Œè¯»å†™æ“ä½œçš„æ€»æ¬¡æ•°</p><p>ä»¥åŠè¿™äº›åŠ è½½æ“ä½œæ˜¯å¦åˆ©ç”¨äº†å¯ç”¨æ•°æ®è·¯å¾„çš„æ‰€æœ‰å®½åº¦</p><p>Compute Shaderä¸­ä¸€ä¸ªå…³é”®çš„å†…å­˜IOä¼˜åŒ–å°±æ˜¯ï¼Œæ›´é«˜æ•ˆçš„åˆ©ç”¨Load&#x2F;Storeç¡¬ä»¶æä¾›çš„æ•°æ®å®½åº¦</p><p>æˆ‘ä»¬æ¨èåœ¨çº¿ç¨‹ä¸­å‘é‡åŒ–å†…å­˜IOæ“ä½œ</p><p>å¹¶ä¸”ä¿è¯ç›¸åŒWrapä¸­ä¸åŒçº¿ç¨‹é‡Œçš„æœ‰äº¤å æˆ–ä¾èµ–çš„å†…å­˜æ—¶ï¼Œåªè¯»å–64ByteèŒƒå›´å†…çš„æ•°æ®</p><p><strong>Load&#x2F;store total issues</strong></p><p>æ­¤Counterè¡¨ç¤ºäº§ç”ŸLoad&#x2F;Storeæ“ä½œçš„Cyclesæ•°</p><p>æ³¨æ„æ­¤Counterä¼šå¿½ç•¥Cache Missçš„æƒ…å†µï¼Œå› æ­¤å®ƒæä¾›äº†ä¸€ä¸ªæœ€ä½³æƒ…å†µä¸‹çš„Cycleæ¶ˆè€—æ•°æ®</p><p><strong>Load&#x2F;store full read issues</strong></p><p>æ­¤Counterè¡¨ç¤ºæ‰€æœ‰å…¨å®½Load&#x2F;Storeçš„ç¼“å­˜è¯»å–æ“ä½œçš„Cyclesæ•°</p><p><strong>Load&#x2F;store partial read issues</strong></p><p>æ­¤Counterè¡¨ç¤ºæ‰€æœ‰æœªå®Œå…¨åˆ©ç”¨Load&#x2F;Storeæ•°æ®è·¯å¾„å®½åº¦çš„ç¼“å­˜è¯»å–æ“ä½œçš„Cyclesæ•°é‡</p><p>è¿™ç§æƒ…å†µæœªå®Œå…¨åˆ©ç”¨ç¡¬ä»¶æ€§èƒ½ï¼Œå¯é€šè¿‡å¦‚ä¸‹Shaderä¿®æ”¹æé«˜åˆ©ç”¨ç‡ï¼š</p><ul><li><p>ä½¿ç”¨å‘é‡åŒ–çš„æ•°æ®åŠ è½½</p></li><li><p>Avoid padding in strided data accesses</p></li><li><p>Compute Shaderä¸­ä¸€ä¸ªWrapä¸­ç›¸é‚»çš„çº¿ç¨‹ä½¿ç”¨ç›¸é‚»çš„å†…å­˜åœ°å€åŒºåŸŸ</p></li></ul><p><strong>Load&#x2F;store full write issues</strong></p><p>æ­¤Counterè¡¨ç¤ºæ‰€æœ‰å…¨å®½Load&#x2F;Storeçš„ç¼“å­˜å†™å…¥æ“ä½œçš„Cyclesæ•°</p><p><strong>Load&#x2F;store partial write issues</strong></p><p>æ­¤Counterè¡¨ç¤ºæ‰€æœ‰æœªå®Œå…¨åˆ©ç”¨Load&#x2F;Storeæ•°æ®è·¯å¾„å®½åº¦çš„ç¼“å­˜å†™å…¥æ“ä½œçš„Cyclesæ•°é‡</p><p>è¿™ç§æƒ…å†µæœªå®Œå…¨åˆ©ç”¨ç¡¬ä»¶æ€§èƒ½ï¼Œå¯é€šè¿‡å¦‚ä¸‹Shaderä¿®æ”¹æé«˜åˆ©ç”¨ç‡</p><p><strong>Load&#x2F;store atomic issues</strong></p><p>æ­¤Counterè¡¨ç¤ºæ‰€æœ‰Load&#x2F;StoreåŸå­æ“ä½œç›¸å…³çš„Cyclesæ€»æ•°</p><p>åŸå­å†…å­˜è¯»å†™åœ¨Wrapä¸­çš„æ¯ä¸ªçº¿ç¨‹é‡Œé€šå¸¸æ˜¯å¤šCycleçš„æ“ä½œ</p><p>å› æ­¤å®ƒå¤©ç”Ÿå¾ˆè€—æ—¶ï¼Œé¿å…åœ¨æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœ°æ–¹ä½¿ç”¨åŸå­å†…å­˜æ“ä½œ</p><p><strong>Load&#x2F;store unit memory usage</strong></p><p>æ­¤ç»„Countersè¡¨ç¤ºæ¯ä¸ªLoad&#x2F;Storeè¯»æˆ–å†™æ“ä½œä¸­å¹³å‡å†™å…¥æˆ–è¯»å‡ºL2Cacheçš„æ•°æ®å¤§å°</p><p>å¯ç”¨äºè¯„ä¼°è´Ÿè½½å¯¹L1ã€L2Cacheçš„åˆ©ç”¨æƒ…å†µ</p><p><strong>Load&#x2F;store bytes read from L2 per access cycle</strong></p><p>æ­¤Counterè¡¨ç¤ºæ¯ä¸ªLoad&#x2F;Storeè¯»æ“ä½œä¸­å¹³å‡è¯»å‡ºL2Cacheçš„æ•°æ®å¤§å°</p><p>å¯ç”¨äºè¯„ä¼°æ•°æ®åœ¨L1 Load&#x2F;Store Cacheä¸­ç¼“å­˜å‘½ä¸­çš„æƒ…å†µ</p><p>å¦‚æœæ¯æ¬¡è·å–æ•°æ®éƒ½æœ‰å¾ˆé«˜çš„Bytesæµé‡ï¼Œåˆ™æœ‰å¯èƒ½ä¸Bufferæ ¼å¼æœ‰å…³</p><p>æ£€æŸ¥ä¸€ä¸‹æ•°æ®ç±»å‹å’Œæ•°æ®è·å–çš„æ–¹å¼</p><p><strong>Load&#x2F;store bytes read from external memory per access cycle</strong></p><p>æ­¤Counterè¡¨ç¤ºæ¯ä¸ªLoad&#x2F;Storeè¯»æ“ä½œä¸­å¹³å‡è¯»å‡ºç³»ç»Ÿå†…å­˜çš„æ•°æ®å¤§å°</p><p>å¯ç”¨äºè¯„ä¼°æ•°æ®åœ¨L2 Load&#x2F;Store Cacheä¸­ç¼“å­˜å‘½ä¸­çš„æƒ…å†µ</p><p>å¦‚æœæ¯æ¬¡è·å–æ•°æ®éƒ½æœ‰å¾ˆé«˜çš„Bytesæµé‡ï¼Œåˆ™å¯èƒ½ä¸ä½ çš„è´´å›¾æ ¼å¼æœ‰å…³</p><p>åŒæ ·æ£€æŸ¥ä¸€ä¸‹æ•°æ®ç±»å‹å’Œæ•°æ®è·å–çš„æ–¹å¼</p><p><strong>Load&#x2F;store bytes written to L2 per access cycle</strong></p><p>æ­¤Counterè¡¨ç¤ºLoad&#x2F;Storeå•å…ƒæ¯ä¸ªå†™Cycleä¸­å¹³å‡å†™å…¥L2ç¼“å­˜çš„æ•°æ®å¤§å°</p><p><strong>Shader core memory traffic</strong></p><p>æ­¤ç±»Countersè¡¨ç¤ºä¸åŒShaderCoreæ¨¡å—é‡Œå¯¹L2å’Œç³»ç»Ÿå†…å­˜äº§ç”Ÿçš„å†…å­˜IOæ“ä½œçš„æ€»æ•°æ®å¤§å°</p><p>å¯ç”¨äºåˆ¤æ–­å†…å­˜ç“¶é¢ˆå…·ä½“åœ¨å“ªé‡Œ</p><p><strong>Load&#x2F;store read bytes from L2 cache</strong></p><p>æ­¤Counterè¡¨ç¤ºLoad&#x2F;Storeå•å…ƒä¸­ä»L2ç¼“å­˜ä¸­è¯»å–çš„æ•°æ®æ€»å¤§å°</p><p><strong>Texture read bytes from L2 cache</strong></p><p>æ­¤Counterè¡¨ç¤ºè´´å›¾å•å…ƒä¸­ä»L2ç¼“å­˜ä¸­è¯»å–çš„æ•°æ®æ€»å¤§å°</p><p><strong>Load&#x2F;store read bytes from external memory</strong></p><p>æ­¤Counterè¡¨ç¤ºLoad&#x2F;Storeå•å…ƒä¸­ä»ç³»ç»Ÿå†…å­˜ä¸­è¯»å–çš„æ•°æ®æ€»å¤§å°</p><p><strong>Texture read bytes from external memory</strong></p><p>æ­¤Counterè¡¨ç¤ºè´´å›¾å•å…ƒä¸­ä»ç³»ç»Ÿå†…å­˜ä¸­è¯»å–çš„æ•°æ®æ€»å¤§å°</p><p><strong>Load&#x2F;store write bytes</strong></p><p>æ­¤Counerè¡¨ç¤ºLoad&#x2F;Storeå•å…ƒä¸­å†™å…¥L2ç¼“å­˜çš„æ•°æ®æ€»å¤§å°</p><p><strong>Tile buffer write bytes</strong></p><p>æ­¤Counterè¡¨ç¤ºTileBufferå†™å›å•å…ƒä¸­å†™å…¥L2ç¼“å­˜çš„æ•°æ®æ€»å¤§å°</p><h2><span id="android-gpu-inspector-agi">Android GPU Inspector (AGI)</span></h2><p><a target="_blank" rel="noopener" href="https://developer.android.com/agi">https://developer.android.com/agi</a></p><p>Android 12ç³»ç»Ÿçš„éƒ¨åˆ†ç¡¬ä»¶ï¼š<a target="_blank" rel="noopener" href="https://developer.android.com/agi/supported-devices">https://developer.android.com/agi/supported-devices</a></p><p>å¯ç›´æ¥ä½¿ç”¨AGIè¾“å‡ºAdrenoã€Maliè®¾å¤‡çš„GPU Counter</p><blockquote><p>åœ¨è®¾å¤‡å…è®¸çš„å‰æä¸‹ä¼˜å…ˆä½¿ç”¨ AGI è¿›è¡ŒGPUæ€§èƒ½åˆ†æ</p></blockquote><h2><span id="metal-gpu">Metal GPU</span></h2><p><strong>Metal Counters</strong>å¯ä»¥è®©æˆ‘ä»¬éå¸¸<strong>ç²¾ç¡®</strong>çš„<strong>äº†è§£GPU</strong>çš„ä½¿ç”¨ç‡ï¼Œå¹¶èƒ½æŒ‡å¼•æˆ‘ä»¬<strong>å‘ç°Metalæ¸¸æˆ</strong>çš„<strong>æ€§èƒ½ç“¶é¢ˆ</strong>ä»¥åŠ<strong>ä¼˜åŒ–æ–¹å‘</strong></p><p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2020/10603/">ã€ŠOptimize Metal apps and games with GPU countersã€‹</a>ä¸»è¦ä»‹ç» Instrument ä¸­ Metal System Trace ä¸ XCode 12 ä¸­çš„ Metal Debugger çš„ä½¿ç”¨æ–¹æ³•</p><p>åœ¨<strong>æŠ“åˆ°æ•°æ®</strong>åï¼Œå‘Šè¯‰ä½ å¦‚ä½•<strong>ç”„åˆ«</strong>GPUè¿ç®—ç®¡çº¿ä¸­Â <strong>è¿‡åº¦ä½¿ç”¨</strong>Â å’ŒÂ <strong>æœªå……åˆ†åˆ©ç”¨</strong>çš„ éƒ¨åˆ†</p><p>[ã€å…¬å¸ã€‘Apple èŠ¯ç‰‡å’Œæ¸²æŸ“æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ä¸“åœº]</p><p><strong>WWDC 2021</strong></p><ul><li><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2021/10148/">Optimize high-end games for Apple GPUs</a></li></ul><p><strong>WWDC 2020</strong></p><ul><li><p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2020/10631">Bring your Metal app to Apple silicon Macs</a></p></li><li><p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2020/10605">Gain insights into your Metal app with Xcode 12</a></p></li><li><p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2020/10602">Harness Apple GPUs with Metal</a></p></li><li><p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2020/10632">Optimize Metal Performance for Apple silicon Macs</a></p></li></ul><p><strong>WWDC 2019</strong></p><ul><li><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2019/606">Delivering Optimized Metal Apps and Games</a></li></ul><p><strong>WWDC 2018</strong></p><ul><li><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2018/608">Metal Shader Debugging and Profiling</a></li></ul><h2><span id="best-practice">Best Practice</span></h2><p>é™ä½å¤æ‚åº¦ã€é™ä½ Uber Shader çš„ä½¿ç”¨ï¼ˆä¼šå¢åŠ å¯„å­˜å™¨å‹åŠ›ï¼Œå¯„å­˜å™¨ä½¿ç”¨é‡æ˜¯ç¼–è¯‘æ—¶ç¡®å®šçš„æ•°æ®ï¼‰</p><p>æå‡åŠç²¾åº¦æŒ‡ä»¤çš„æ¯”ç‡ï¼šåŒ…æ‹¬Varingå˜é‡ã€Samplerã€UniformBuffer</p><p>ä¼˜å…ˆä½¿ç”¨ç¦»çº¿æ–¹æ¡ˆã€éš”å¸§ã€é™é¢‘æ¸²æŸ“ã€VRS</p><p>ç¡®ä¿æ‰€æœ‰èµ„äº§ä½¿ç”¨è´´å›¾å‹ç¼©ï¼ˆASTCã€ETC2ï¼‰ï¼Œåˆ©ç”¨ç¡¬ä»¶æä¾›çš„æ— æŸã€æœ‰æŸFramebufferã€RTå‹ç¼©æ–¹æ¡ˆ</p><h3><span id="å®ä¾‹ä¸€ue427-directx-shader-compiler-mobile-åŠç²¾åº¦æ”¯æŒ">å®ä¾‹ä¸€ï¼šUE4.27 DirectX Shader Compiler Mobile åŠç²¾åº¦æ”¯æŒ</span></h3><p>å¤§è‡´ä»UE4.25å¼€å§‹ï¼Œè™šå¹»å¼•æ“å¼€å§‹é€æ­¥å°†Shaderäº¤å‰ç¼–è¯‘å™¨ä»HLSLCCï¼ˆåŸºäºMesa3dçš„æ–¹æ¡ˆï¼‰æ›¿æ¢ä¸ºDXCï¼ˆShader Conductorï¼‰ï¼Œæœ¬æ–‡ä»‹ç»ç§»åŠ¨å¹³å°ä½¿ç”¨DXCæ—¶æ‰€åšçš„ä¸€äº›ä¼˜åŒ–ï¼š</p><blockquote><p>xinhou &amp; normanyin åˆä½œæ’°å†™çš„ç›¸å…³ç« èŠ‚ å°†å‘å¸ƒäºã€Šæ¸¸æˆå¼€å‘ç²¾ç²¹3ã€‹ä¸­ï¼Œå°½è¯·æœŸå¾…</p></blockquote><h3><span id="å®ä¾‹äºŒä½¿ç”¨-variable-rate-shading-æ’ä»¶é™ä½-gpu-è´Ÿè½½">å®ä¾‹äºŒï¼šä½¿ç”¨ Variable Rate Shading æ’ä»¶é™ä½ GPU è´Ÿè½½</span></h3><p><a target="_blank" rel="noopener" href="https://community.arm.com/arm-community-blogs/b/graphics-gaming-and-vr-blog/posts/arm-immortalis-g715-developer-overview">https://community.arm.com/arm-community-blogs/b/graphics-gaming-and-vr-blog/posts/arm-immortalis-g715-developer-overview</a></p><h1><span id="å†…å­˜">å†…å­˜</span></h1><p>Androidã€iOSå†…å­˜ç®¡ç†æ ¸å¿ƒï¼š</p><ol><li><p>åˆ†é¡µï¼ˆPagingï¼‰</p></li><li><p>å†…å­˜æ˜ å°„ï¼ˆMemory Mappingï¼‰</p></li></ol><p>CPU &amp; GPU å…¬ç”¨ä¸€å¥—å†…å­˜ç¡¬ä»¶ï¼ˆGPUæœ‰å°‘é‡OnChip Memoryï¼‰</p><p>å½“å†…å­˜ä¸è¶³æ—¶è§¦å‘åˆ†é¡µï¼ˆPage Outï¼‰é‡Šæ”¾å†…å­˜ï¼š</p><ol><li>è§¦å‘Â <strong>å†…å­˜å‹ç¼©</strong></li><li>åˆ é™¤Clean Page</li></ol><p>å½“å‰©ä½™å†…å­˜ä½äºé˜ˆå€¼ï¼Œç³»ç»Ÿå°†å¼€å§‹æ€è¿›ç¨‹</p><p><strong>Androidï¼š</strong></p><p><strong>iOSï¼š</strong></p><h2><span id="å †å†…å­˜åˆ†æ">å †å†…å­˜åˆ†æ</span></h2><h3><span id="android-studio">Android Studio</span></h3><p>Android Studio æ”¯æŒ Nativeï¼ˆC++ï¼‰ å †å†…å­˜åˆ†é…çš„åˆ†æå·¥ä½œ</p><p><a target="_blank" rel="noopener" href="https://developer.android.com/studio/profile/memory-profiler">https://developer.android.com/studio/profile/memory-profiler</a></p><p>Perfettoç»„ä»¶å¯ä½¿ç”¨Heapperfdè¿›è¡ŒNativeå†…å­˜åˆ†æå·¥ä½œï¼š</p><p><a target="_blank" rel="noopener" href="https://perfetto.dev/docs/design-docs/heapprofd-design">https://perfetto.dev/docs/design-docs/heapprofd-design</a></p><h3><span id="loliprofiler">LoliProfiler</span></h3><p>æ”¯æŒæ•´åˆè‡³Â <a target="_blank" rel="noopener" href="https://github.com/Tencent/loli_profiler/blob/master/docs/GAME_ENGINE_CN.md">UEã€Unity</a>Â å¼•æ“åˆ†æ Nativeï¼ˆC++ï¼‰å†…å­˜</p><p><a target="_blank" rel="noopener" href="https://github.com/Tencent/loli_profiler">https://github.com/Tencent/loli_profiler</a></p><h3><span id="custom-built-profiler">Custom Built Profiler</span></h3><p>åŸºäºLoliProfilerå¼€å‘ç»éªŒ</p><p>å †å†…å­˜åˆ†æå™¨éœ€è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š</p><ol><li><p>å †æ ˆå›æº¯é€Ÿåº¦ï¼šåŸºäºFramepointeræ–¹æ¡ˆå³å¯</p></li><li><p>ç¬¦å·ç¿»è¯‘é€Ÿåº¦ï¼šç¦»çº¿ç¿»è¯‘ç¬¦å·ã€äºŒåˆ†æ’åºæœç´¢åŠ é€Ÿ</p></li><li><p>è¿è¡Œæ—¶å†…å­˜å ç”¨ or ç½‘ç»œå¸¦å®½å ç”¨</p></li></ol><p>LoliProfiler æºç å‡å·²æä¾›å¯¹åº”è§£å†³æ–¹æ¡ˆï¼Œå¯æ•´åˆè‡³å¼•æ“å†…éƒ¨</p><p>åœ¨å†…å­˜ä¸­å­˜å‚¨PersistentMapï¼Œå®æµ‹å†…å­˜Overheadï¼š350 MiBï¼Œæ€§èƒ½OverheadåŸºæœ¬ä¸å˜</p><p>è¾“å‡º LoliProfiler å…¼å®¹çš„æ•°æ®æ ¼å¼ï¼Œå³å¯é€šè¿‡ LoliProfileræ‰“å¼€CIæ•°æ®ï¼Œåˆ†æå†…å­˜è¿‡å¤§ã€æ³„æ¼ç­‰é—®é¢˜</p><h4><span id="ue5-memory-insights">UE5 Memory Insights</span></h4><p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/5.0/en-US/memory-insights-in-unreal-engine/">https://docs.unrealengine.com/5.0/en-US/memory-insights-in-unreal-engine/</a></p><p>UE5å®ç°äº†ç±»ä¼¼ä¸Šè¿°æ–¹æ¡ˆçš„åŸºäºå †æ ˆå›æº¯å †å†…å­˜åˆ†æå™¨</p><h3><span id="unity-mono-å†…å­˜">Unity Mono å†…å­˜</span></h3><p>Monoè™šæ‹Ÿæœºï¼ˆIL2CPPï¼‰æä¾›å†…å­˜å¿«ç…§æ¥å£</p><p>UnityMemPerfç”¨C++&amp;QTå®Œç¾è¿˜åŸäº†Unity IL2CPPå†…å­˜å·¥å…·PerfAssistçš„ä½“éªŒï¼Œæ— éœ€Unityã€æ— éœ€SDKï¼Œè¿æ¥USBæ‹‰èµ·APPå³å¯æŠ“å–æ‰˜ç®¡å†…å­˜å¿«ç…§ï¼Œè¿›è¡Œå†…å­˜åˆ†æã€å¿«ç…§Diff</p><h3><span id="memreport">Memreport</span></h3><p>æä¾› UE4 Memreport æ•°æ®è§£æã€Diffä¸å¯è§†åŒ–åŠŸèƒ½ï¼š</p><h3><span id="rhi-memory">RHI Memory</span></h3><p>å¯é’ˆå¯¹æ€§çš„å¯¹ UE Vulkanã€GLã€Metal RHIå±‚å†…å­˜ç”³è¯·æ¥å£ç»“åˆ FRHIResource çš„DebugName</p><p>å®ç°ä¸€å¥—æ•°æ®Dumpæœºåˆ¶ï¼Œä»¥é“¾æ¥ RHI å†…å­˜ä¸ UE RHIèµ„æºï¼Œæ·±å…¥åˆ†æRHIå†…å­˜</p><h3><span id="xcode-allocations">XCode Allocations</span></h3><p>ç±»ä¼¼ Simpleperf åœ¨ iOS å¯æŸ¥çœ‹å †å†…å­˜åˆ†é…æ•°æ®çš„å·¥å…·</p><p><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2018/416/">iOS Memory Deep Dive</a></p><p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/xcode/gathering-information-about-memory-use">https://developer.apple.com/documentation/xcode/gathering-information-about-memory-use</a></p><h4><span id="instrument-allocations-helper">Instrument Allocations Helper</span></h4><h2><span id="best-practice">Best Practice</span></h2><p>å†…å­˜å¸¸é©»æ•°æ®ZSTDã€Oodleå‹ç¼©ã€æ–‡ä»¶<a target="_blank" rel="noopener" href="https://github.com/EpicGames/UnrealEngine/commit/771724018cc1a2c54af7be709cad0f094053b3ff">FileIOè½¬Mmap</a></p><p>æµ®ç‚¹æ•°å½’ä¸€åŒ–ï¼ŒLazy Loadã€å‡å°‘UObjectæ•°é‡ã€LRUæœºåˆ¶ã€Streaming</p><h3><span id="æ¡ˆä¾‹ä¸€è¿è¡Œæ—¶ç”Ÿæˆèµ„äº§çš„-streaming-æ”¯æŒ">æ¡ˆä¾‹ä¸€ï¼šè¿è¡Œæ—¶ç”Ÿæˆèµ„äº§çš„ Streaming æ”¯æŒ</span></h3><p>æ‰‹æ¸¸æœ‰åŒ…ä½“çš„é™åˆ¶ï¼Œä½†åˆæœ‰å˜è£…ã€æ¶‚è£…çš„éœ€æ±‚ï¼Œæ—¢è¦åˆè¦</p><p>å¯¹äºMeshç»„è£…ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»„è£…åçš„Meshåºåˆ—åŒ–åˆ°æ‰‹æœºSDå¡ä¸­ï¼Œä½¿å…¶èƒ½å¤Ÿéšæ—¶è¢«Stream Inã€Out</p><p>å¯¹äºASTCï¼ˆ4x4ã€8x8ï¼‰ã€ETC2è´´å›¾ï¼Œå¯æŒ‰Blockè¿›è¡Œæ‹¼è£…</p><blockquote><p>ä¹Ÿå¯ä½¿ç”¨Compute Shaderè¿›è¡Œå‹ç¼©ï¼Œå°±å¯ä»¥æ”¯æŒ 6x6 BlockSizeçš„åˆå¹¶<br>ä»£ä»·æ˜¯ååé‡æœ‰é™ï¼Œååæ•ˆç‡ä¹Ÿæœ‰é™</p></blockquote><p>æ‹¼è£…åçš„æ•°æ®åŒæ ·åºåˆ—åŒ–è‡³SDå¡ä¸­ï¼Œæ”¯æŒStream Inã€Out</p><p>æ”¯æŒäº†æ—¢è¦åˆè¦çš„éœ€æ±‚ï¼Œåœ¨åŒ…ä½“ä¸å˜çš„æƒ…å†µä¸‹ï¼Œè¿è¡Œæ—¶çš„DrawCallä¹Ÿé™åˆ°äº†æœ€ä½</p><h3><span id="æ¡ˆä¾‹äºŒmeshé¡¶ç‚¹æ•°æ®çš„å½’ä¸€åŒ–å‹ç¼©">æ¡ˆä¾‹äºŒï¼šMeshé¡¶ç‚¹æ•°æ®çš„å½’ä¸€åŒ–å‹ç¼©</span></h3><p>Mesh Positionæ•°æ®å­˜åœ¨äºå…¶ Bounding Box ç©ºé—´å†…</p><p>å¯é€šè¿‡å­˜å‚¨ Bounding Box Centerã€Extentï¼Œå°† Position å½’ä¸€åŒ–è‡³Â ï¼ŒÂ çš„æ•°åŒºé—´</p><p>Cookæ—¶ä½¿ç”¨åŠç²¾åº¦æµ®ç‚¹æ•°ï¼ˆ16ä½ï¼‰å­˜å‚¨å½’ä¸€åŒ–æ•°æ®</p><p>è¿è¡Œæ—¶ä»…éœ€ä¸€ä¸ª MADï¼ˆMultiply Addï¼‰æ“ä½œï¼Œå³å¯å®æ—¶è§£å‹</p><p>å¯ä»¥åšåˆ° Lazy Decompressï¼Œä»¥èŠ‚çœç›¸å…³æ¨¡å—çš„å†…å­˜Â </p><h1><span id="åŠŸè€—">åŠŸè€—</span></h1><p>æ‰‹æœºç¡¬ä»¶é›†æˆåº¦é«˜ï¼Œé‡åº¦æ‰‹æ¸¸å‘çƒ­æ˜æ˜¾ï¼Œå‘çƒ­ä¸åŠŸè€—çš„å…³ç³»è¶Šæ¥è¶Šå—åˆ°å¼€å‘è€…çš„é‡è§†</p><p>æ¨èè§‚çœ‹ï¼š[ç§»åŠ¨æ¸¸æˆèƒ½è€—å‘çƒ­åˆ†æä¸ä¼˜åŒ–]</p><p>åŠŸè€—ç»Ÿè®¡éš¾ç‚¹ï¼š</p><ol><li><p>ç¡¬ä»¶é›†æˆåº¦é«˜ï¼Œè¢«åŠ¨æ•£çƒ­ä¸Šé™ä½</p></li><li><p>éš¾ä»¥æµ‹é‡å•æ¨¡å—åŠŸè€—</p></li><li><p>é™æ€ã€åŠ¨æ€åŠŸè€—å åŠ </p></li><li><p>èƒ½è€—å’Œåˆ©ç”¨ç‡ã€é¢‘ç‡å‘ˆçº¿æ€§å…³ç³»ï¼Œå’Œç”µå‹å‘ˆäºŒæ¬¡å…³ç³»</p></li></ol><p>ç»¼åˆå¯¼è‡´ï¼šåŠŸè€—æ•°æ®è·å–éš¾åº¦å¤§ï¼ŒåŠŸè€—æ•°æ®ä½“ç°éçº¿æ€§ï¼Œæ•°æ®åˆ†æéš¾åº¦ä¹Ÿå¾ˆå¤§</p><p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼Œä»‹ç»å¸¸ç”¨çš„åŠŸè€—æµ‹é‡æ–¹æ¡ˆï¼Œç»“åˆä¸Šè¿°è§†é¢‘ä½¿ç”¨æ›´ä½³ï¼š</p><h2><span id="ç¡¬ä»¶æ–¹æ¡ˆ">ç¡¬ä»¶æ–¹æ¡ˆ</span></h2><h3><span id="ç”µæµè®¡">ç”µæµè®¡</span></h3><p>ä¼˜ç‚¹ï¼šä¸éœ€ç ´åæ‰‹æœº</p><p>ç¼ºç‚¹ï¼šå¿…é¡»æ»¡ç”µé‡æµ‹è¯•</p><p>æ·˜å®è´­ä¹°ç¡¬ä»¶è®¾å¤‡ï¼ˆ50RMBï¼‰</p><p>è®¾å¤‡å……æ»¡ç”µï¼ˆ100%ï¼‰ï¼Œå°†ç”µæµè®¡ä¸å……ç”µå¤´è¿æ¥ã€‚</p><p>åœ¨ç³»ç»Ÿçš„è“ç‰™ç®¡ç†é¢æ¿ä¸­æŸ¥æ‰¾åä¸ºâ€œUC96_SPPâ€çš„è®¾å¤‡ï¼Œé…å¯¹è¿æ¥å¹¶ä¸”è·å–å…¶Macåœ°å€è®°ä¸‹ã€‚</p><blockquote><p>åˆ†æè“ç‰™åè®®åï¼Œå¯å®ç°è„šæœ¬æ•°æ®é‡‡é›†</p></blockquote><p>å®‰å“è®¾å¤‡å»ºè®®å‚è€ƒWeTestæ–¹æ¡ˆä¸­çš„æ–¹æ³•å¯¹è®¾å¤‡è¿›è¡Œé”é¢‘</p><p>iOSæš‚æ— é”é¢‘æ–¹æ¡ˆï¼Œæµ‹è¯•æ—¶å°†é£æ‰‡å‡†å¤‡ä¸Š</p><h3><span id="wetestæ–¹æ¡ˆ">Wetestæ–¹æ¡ˆ</span></h3><p>ç§»é™¤è®¾å¤‡ç”µæ± ï¼Œé€šè¿‡å•ç‰‡æœºä¾›ç”µå¹¶ç»Ÿè®¡ä¼ è¾“ä¾›ç”µæ•°æ®</p><p>ä¼˜ç‚¹ï¼šæ›´å‡†ç¡®</p><p>ç¼ºç‚¹ï¼šéœ€è¦ç§»é™¤æ‰‹æœºç”µæ± </p><blockquote><p>å·²çŸ¥é—®é¢˜ï¼š<br>æŸäº›é«˜é€šSoCï¼Œå°¤å…¶æ˜¯888ï¼Œå‘çƒ­ä¸¥é‡çš„ï¼Œè¾¾åˆ°ä¸€å®šçš„æ¸©åº¦é˜ˆå€¼ä¼šè§¦å‘SoCæ¸©æ§é©±åŠ¨è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¼ºåˆ¶å°†é¢‘ç‡æ§åˆ¶åœ¨æœ€ä½ï¼Œå¯¼è‡´æˆ‘ä»¬çš„é”é¢‘åŠŸèƒ½å¤±æ•ˆã€‚<br>è§£å†³æ–¹æ¡ˆæ˜¯é¿å…ä½¿ç”¨888è¿™ç§å‘çƒ­ä¸¥é‡çš„SoCï¼Œå¯ä»¥é€‰ç”¨870ç­‰ï¼Œä¹Ÿå¯ä»¥å‚è€ƒç½‘ä¸Šâ€œåˆ é™¤androidæ¸©æ§é©±åŠ¨â€æ•™ç¨‹ï¼Œåˆ é™¤é©±åŠ¨æœ‰æå¤§é£é™©ï¼Œæ“ä½œéœ€è°¨æ…ã€‚</p></blockquote><h2><span id="è½¯ä»¶æ–¹æ¡ˆ">è½¯ä»¶æ–¹æ¡ˆ</span></h2><p>Perfdogæ”¯æŒåŸºäºé©±åŠ¨ä¸ŠæŠ¥çš„åŠŸè€—æ•°æ®è·å–</p><p>ä½¿ç”¨æ–¹ä¾¿ï¼Œå‡†ç¡®åº¦æ¯”ç¡¬ä»¶æ–¹æ¡ˆä½</p><p>iOSç›´æ¥è§£æäº†XCode Energyçš„æ•°æ®</p><h2><span id="best-practice">Best Practice</span></h2><p>ç»Ÿè®¡ä¼˜åŒ–å‰åçš„å¸§åŠŸè€—ï¼šAvgPower &#x3D; å¹³å‡åŠŸè€— mW&#x2F;s</p><p>å‡å°‘è¿ç®—é‡ï¼šæœ€å¥½çš„ä¼˜åŒ–å°±æ˜¯ç¦»çº¿åŒ–ï¼ŒGPUå¸¦å®½å‹ç¼©ï¼ˆASTCã€AFBCï¼‰ç­‰</p><h3><span id="æ¡ˆä¾‹ä¸€é¢„è®¡ç®—é®æŒ¡å‰”é™¤-pvs">æ¡ˆä¾‹ä¸€ï¼šé¢„è®¡ç®—é®æŒ¡å‰”é™¤ PVS</span></h3><p>æ ¹æ®å¯è¾¾è·¯å¾„è‡ªåŠ¨å‡åŒ€é“ºè®¾ PVS Cell</p><p>å»é™¤å°†éœ€è¦æ¯å¸§å®æ—¶è®¡ç®—çš„é®æŒ¡å‰”é™¤ï¼ˆOCï¼‰æµç¨‹</p><p>é™ä½ CPU åŠŸè€—</p><p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/en-US/RenderingAndGraphics/VisibilityCulling/PrecomputedVisibilityVolume/">https://docs.unrealengine.com/4.27/en-US/RenderingAndGraphics/VisibilityCulling/PrecomputedVisibilityVolume/</a></p><h3><span id="æ¡ˆä¾‹äºŒframepacing">æ¡ˆä¾‹äºŒï¼šFramepacing</span></h3><p>åœ¨æ¸¸æˆå›¾åƒå±•ç¤ºåœ¨æ˜¾ç¤ºå±çš„è¿‡ç¨‹ä¸­</p><p>æœ‰ä¸€ä¸ªæ¯”è¾ƒå½±å“ç”¨æˆ·ä½“éªŒçš„åŒæ­¥è¿‡ç¨‹ï¼š</p><p>æ¸¸æˆé€»è¾‘å’Œæ¸²æŸ“å¾ªç¯ ä¸ å®‰å“ç³»ç»Ÿå’Œæ˜¾ç¤ºå±ç¡¬ä»¶ä¹‹é—´æœ‰ä¸€ä¸ªåŒæ­¥çš„å…³ç³»</p><p>è¿™ä¸ªåŒæ­¥è¿‡ç¨‹æˆ‘ä»¬ç§°ä¸ºå¸§èŠ‚å¥ï¼ˆ<strong>Frame Pacing</strong>ï¼‰</p><p>å³å¼•æ“ä¸CPUã€GPUé…åˆäº§ç”Ÿå›¾åƒçš„å¸§ç‡ ä¸ æ˜¾ç¤ºå±åˆ·æ–°ç‡ä¹‹é—´çš„åŒæ­¥å…³ç³»</p><p>å®‰å“çš„æ˜¾ç¤ºç³»ç»Ÿå¯é¿å…<strong>ç”»é¢æ’•è£‚</strong>ï¼ˆScreenTearingï¼‰çš„é—®é¢˜</p><p>å³å½“æ˜¾ç¤ºå™¨æ­£åœ¨åˆ·æ–°æ•°æ®æ—¶ï¼Œæ–°çš„æ•°æ®è¢«Pushåˆ°æ˜¾ç¤ºè®¾å¤‡æ—¶çš„æƒ…å†µ</p><p>å…¶é€šè¿‡ä»¥ä¸‹æªæ–½é¿å…æ’•è£‚ï¼ˆTearingï¼‰ï¼š</p><ul><li><p>å°†å†å²å¸§æ•°æ®ç¼“å­˜ä½</p></li><li><p>è‡ªåŠ¨æ£€æµ‹æœ‰å»¶è¿Ÿçš„å¸§æ•°æ®æäº¤</p></li><li><p>å½“æäº¤æœ‰å»¶è¿Ÿæ—¶ï¼Œé‡å¤æ¸²æŸ“å†å²å¸§æ•°æ®</p></li></ul><p>é€šè¿‡Bufferç¼“å­˜å¸§æ•°æ®ï¼Œå½“æ˜¾ç¤ºå™¨åˆ·æ–°æ—¶ï¼Œå¦‚æœæœ‰æ–°æ•°æ®ä¼ è¾“ï¼Œç›´æ¥å°†å…¶ç¼“å­˜å³å¯</p><p>å¦‚æ­¤è®¾è®¡ï¼Œå°±ä¸ä¼šæœ‰VSYNCçš„é˜»å¡å¼ç­‰å¾…çš„é—®é¢˜ï¼Œä¸å¢å¤§å½±å“æ¸¸æˆé€»è¾‘çš„è¾“å…¥å»¶è¿Ÿ</p><p>è™½ç„¶å¸¦æ¥äº†ä¸€å®šçš„ç”»é¢å»¶è¿Ÿï¼Œä½†å¯ä»¥é¿å…ç”»é¢æ’•è£‚é—®é¢˜</p><p>è§[ç§»åŠ¨æ¸¸æˆèƒ½è€—å‘çƒ­åˆ†æä¸ä¼˜åŒ–]P150</p><p>[ä»€ä¹ˆï¼ŸFPSä¸æ˜¯è¶Šé«˜è¶Šå¥½å—]</p><h1><span id="åŒ…ä½“">åŒ…ä½“</span></h1><p>åŒ…ä½“çš„å¤§å°ã€é¦–åŒ…èµ„æºçš„å¤§å°å¯¹äºç©å®¶æœ‰è¾ƒå¤§å½±å“</p><p>å°½å¯èƒ½å‡å°‘åŒ…ä½“å¤§å°ï¼Œä¹Ÿæ˜¯å¼€å‘è€…éœ€è¦å…³æ³¨çš„é‡ç‚¹é—®é¢˜</p><h2><span id="sizemap">SizeMap</span></h2><p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/en-US/Engine/Basics/AssetsAndPackages/AssetManagement/CookingAndChunking/index.html#sizemap">https://docs.unrealengine.com/en-US/Engine/Basics/AssetsAndPackages/AssetManagement/CookingAndChunking/index.html#sizemap</a></p><p>æ‰“å¼€åç‚¹å‡»AddChunksï¼Œå°†æœ¬åœ°çš„pakåŒ…åŠ è½½è¿›çª—å£ï¼š</p><p>å³å¯æ‰“å¼€æ­¤pakçš„SizeMapçª—å£ï¼Œå¯ä»¥çœ‹åˆ°SizeMapä»¥TreeMapå›¾çš„å½¢å¼å°†èµ„æºåˆ†ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä»»æ„åˆ†ç±»è¿›å…¥æ›´æ·±çš„å±‚çº§æ¥åˆ†ææ•°æ®ï¼š</p><h2><span id="unreal-pakviewer">Unreal PakViewer</span></h2><p><a target="_blank" rel="noopener" href="https://github.com/jashking/UnrealPakViewer">https://github.com/jashking/UnrealPakViewer</a></p><h2><span id="custom-built-profiler-with-ci">Custom Built Profiler With CI</span></h2><p>Asset Registry ä¸­åŒ…å«èµ„æºçš„ Meta ä¿¡æ¯ï¼ˆAssetRegistrySearchableï¼‰</p><p>å¯åœ¨Cook &amp; Package ç»“æŸåä½¿ç”¨ Commandlet åˆ†ææ­¤ä¿¡æ¯</p><p>å¾—å‡ºè¿›åŒ…èµ„äº§çš„å‹ç¼©æ•°æ®ï¼Œè¾“å‡ºCIæŠ¥å‘Šç›‘æ§åŒ…ä½“</p><h2><span id="best-practice">Best Practice</span></h2><p>å†—ä½™èµ„æºä¸è¿›åŒ…ï¼Œè´´å›¾å‹ç¼©ï¼ˆASTCã€ETC2ï¼‰ã€å……åˆ†åˆ©ç”¨ ASTC 8x8</p><p>ZSTDå‹ç¼©ã€Oodleå‹ç¼©ï¼Œæ•°æ®Â <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rate%E2%80%93distortion_optimization">RDO</a>Â å‹ç¼©</p><h3><span id="æ¡ˆä¾‹ä¸€glsl-spirv-shaderæ•°æ®å‹ç¼©">æ¡ˆä¾‹ä¸€ï¼šGLSLã€SPIRV Shaderæ•°æ®å‹ç¼©</span></h3><p>GLSLå¯é€šè¿‡ ZSTD+å­—å…¸ çš„å½¢å¼åšåˆ°æè‡´çš„åŒ…ä½“å‹ç¼©</p><p>[åŸºäºZSTDå­—å…¸çš„Shaderå‹ç¼©æ–¹æ¡ˆ]</p><p>Vulkan SPIRVå¯ä½¿ç”¨Â <a target="_blank" rel="noopener" href="https://github.com/aras-p/smol-v">SMOL-V</a>Â è¿›è¡Œ RDO ä¼˜åŒ–ï¼Œä»è€Œè¾¾åˆ°æè‡´çš„åŒ…ä½“å‹ç¼©</p><h1><span id="ä»£ç å´©æºƒ-amp-ç¨³å®šæ€§">ä»£ç å´©æºƒ &amp; ç¨³å®šæ€§</span></h1><p>ç–‘éš¾å´©æºƒé€šå¸¸å‘ç”Ÿäºéç¬¬ä¸€ç°åœºï¼Œéœ€è¦èŠ±è´¹å¤§é‡<strong>äººåŠ›</strong>å’Œ<strong>ç²¾åŠ›</strong>å’Œ<strong>å¿ƒæƒ…</strong>â¤å»åˆ†æ</p><p>æ˜¯æ€§ä»·æ¯”æœ€ä½çš„å¼€å‘å·¥ä½œä¹‹ä¸€ ğŸ˜¢</p><p>é™¤äº†æå‡ä»£ç è´¨é‡ä¹‹å¤–ï¼Œå¦‚ä½•æå‰å‘ç°å¯èƒ½çš„ç–‘éš¾å´©æºƒï¼Œå°†å…¶å°½å¯èƒ½æ—©çš„æš´æ¼å‡ºæ¥</p><p>æ˜¯å¤§å‹é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘ä¸è§£å†³çš„é‡ç‚¹é—®é¢˜ä¹‹ä¸€</p><p>Tipsï¼šå¯é€šè¿‡addr2lineç¿»è¯‘å´©æºƒç¬¦å·è‡³å…·ä½“ä»£ç è¡Œå·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># android-ndk-r21d\toolchains\aarch64-linux-android-4.9\prebuilt\windows-x86_64\bin\aarch64-linux-android-addr2line.exe</span></span><br><span class="line">addr2line.exe -f -C -e path/to/libUE4.so 0x009988ff</span><br></pre></td></tr></table></figure><h2><span id="address-santizer">Address Santizer</span></h2><p>Androidã€iOSå¹³å°åŸç”Ÿæ”¯æŒ ASanï¼ŒUEä¹Ÿå·²æ•´åˆè‡³å¼•æ“ä¸­</p><p>æ—¥å¸¸é€šè¿‡å†’çƒŸæµ‹è¯•ASanåŒ…ï¼Œæå‰å‘ç°å†…å­˜è¶Šç•Œã€Use-after-freeç­‰å¸¸è§å†…å­˜é—®é¢˜</p><p>å°†ä¸å±äºä½ çš„å´©æºƒï¼Œæå‰æ‹’ä¹‹é—¨å¤–ï¼Œé™ä½å¼€å‘è´Ÿæ‹…</p><p>[å®‰å“å¹³å°ä½¿ç”¨ASanæ£€æŸ¥UE4å†…å­˜é—®é¢˜]</p><h2><span id="stompallocator">StompAllocator</span></h2><p>Windowså¹³å°ä¹Ÿæ”¯æŒASanï¼Œä¸è¡Œçš„æ˜¯è‡³å°‘4.27ç‰ˆæœ¬çš„å¼•æ“ä»æ—§æ— æ³•æ­£å¸¸ä½¿ç”¨ASanåŠŸèƒ½</p><p>å¯ä½¿ç”¨æ›¿ä»£å“ï¼ŒUEå†…éƒ¨çš„ Stomp Allocatorï¼ˆä¼šå ç”¨å·¨é‡è™šæ‹Ÿå†…å­˜ï¼ˆ60G+ï¼‰ï¼‰</p><p><a target="_blank" rel="noopener" href="https://pzurita.wordpress.com/2015/06/29/memory-stomp-allocator-for-unreal-engine-4/">https://pzurita.wordpress.com/2015/06/29/memory-stomp-allocator-for-unreal-engine-4/</a></p><p>é€šè¿‡Pageå¯ä»¥è®¾ç½®Readã€Writeä¿æŠ¤çš„ç‰¹æ€§ï¼Œåœ¨æ¯æ¬¡ç”³è¯·å†…å­˜æ—¶ï¼Œä½¿ç”¨Pageè¯»å†™ä¿æŠ¤æ¥ä¿æŠ¤å†…å­˜åŒºåŸŸ</p><p>å½“è¶Šç•Œè¯»å†™æ—¶ï¼Œå°±ä¼šè§¦å‘ä¿æŠ¤ï¼Œä»è€Œå´©æºƒåœ¨é—®é¢˜å‡ºç°çš„ç¬¬ä¸€ç°åœº</p><h3><span id="æ¡ˆä¾‹ä¸€stompallocatorå´©æºƒåˆ†æ">æ¡ˆä¾‹ä¸€ï¼šStompAllocatorå´©æºƒåˆ†æ</span></h3><p>æ‰“å¼€Stomp Allocatorå´©æºƒäºç¬¬ä¸€ç°åœº</p><p>åŸºç±»è·å–äº†Hitsæ•°ç»„çš„åœ°å€</p><p>å½“å…¶æ‰€åœ¨vectorå®¹å™¨æ‰©å®¹æ—¶ï¼Œä¼šäº§ç”Ÿreallocï¼Œå¯¼è‡´åŸºç±»ä¸­çš„æŒ‡å‘Hitsçš„åœ°å€å¤±æ•ˆ</p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œreallocï¼Œè€åœ°å€å›Mallocæ± ï¼Œå¦‚æœè¿™å—å†…å­˜ä»æœªç«‹å³è¢«ä½¿ç”¨ï¼Œè¿™å—ä»£ç ä»å¯æ­£å¸¸æ‰§è¡Œ</p><p>å½“è¿™å—è€ä»£ç è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨ï¼Œè€ŒHitsæ•°æ®å†æ¬¡è¢«ä¿®æ”¹æ—¶ï¼Œå°±ä¼šå‡ºé”™</p><p>è§£å†³æ–¹æ³•ï¼š</p><p>è¿™ç§æŒ‡å‘è‡ªå·±æˆå‘˜å†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œæ”¾åœ¨vectorã€TArrayå®¹å™¨é‡Œå†resizeåéƒ½ä¼šæœ‰é£é™©</p><p>ä¸´æ—¶ä¿®çš„è¯åŠ ä¸ªresize0ï¼Œæˆ–è€…resizeåassign(size, T())</p><p><strong>æœ€å¥½é¿å…è¿™ç§å†™æ³•</strong></p><h2><span id="vulkan">Vulkan</span></h2><p>Vulkan RHIåœ¨è¾ƒæ–°çš„ç§»åŠ¨è®¾å¤‡ä¸­å·²å…¨é¢æ”¯æŒ</p><p>å…¶RHIæ€§èƒ½ã€é©±åŠ¨å†…å­˜å ç”¨ï¼Œå¯ç©æ€§ã€ä»¥åŠå¯ä¼˜åŒ–æ€§ è¿œè¶… OpenGL RHI</p><h3><span id="vulkan-validation">Vulkan Validation</span></h3><blockquote><p>Device Lostå´©æºƒæ—¶ç»æœ›æœ‰å¤šå°‘ã€è¿™å¼ å›¾å°±æœ‰å¤šå¤§</p></blockquote><p>æƒ³è¦é¿å…Device Losté—®é¢˜ï¼Ÿé¦–å…ˆè¦ç¡®ä¿é¡¹ç›®ä¸­å·²æ¸…ç©º Validation Error</p><p>[åœ¨UE4ä¸­åƒå¥½Vulkançš„èƒèŸ¹-vulkan-validation-layer]</p><p>Validation Layeræ˜¯Debug Vulkan RHIè¡Œä¸ºçš„å¿…å¤‡å·¥å…·</p><p>åœ¨UE4ä¸­ä»¥Logçš„å½¢å¼æŠ¥å‘Šå‡ºRHIå±‚çš„é”™è¯¯ç”¨æ³•ä»¥åŠæ½œåœ¨çš„æ€§èƒ½é—®é¢˜ï¼š</p><h3><span id="vulkan-command-replay">Vulkan Command Replay</span></h3><blockquote><p>ä¼˜å…ˆé€‰æ‹©å¯»æ‰¾å´©æºƒè®¾å¤‡çš„å‚å•†è¿›è¡Œæ”¯æŒ</p></blockquote><p>Vulkan ä½œä¸ºæ–°å…´ RHIï¼Œæœ‰ä¸€ç³»åˆ—è¾…åŠ©å¼€å‘çš„å·¥å…·ï¼Œå…¶ä¸­å°±åŒ…å«Commandçš„Traceå·¥å…·</p><p><a target="_blank" rel="noopener" href="https://github.com/LunarG/gfxreconstruct">https://github.com/LunarG/gfxreconstruct</a></p><p>å‘ç°å´©æºƒé—®é¢˜æ—¶ï¼Œå¯é€šè¿‡Traceå·¥å…·è®°å½•å®Œæ•´Commandæ•°æ®</p><p>é€šè¿‡äºŒåˆ†å›æ”¾å®šä½é—®é¢˜Command</p><p>å›æ”¾åŠŸèƒ½å…¼å®¹UE4ã€5çš„é‡ç‚¹åœ¨äºå¤„ç†å¥½è¿›ç¨‹çš„ä¿¡å·å¤„ç†æ¥å£</p><p>å› ä¸ºå…¶æ•°æ®é‡‡é›†éƒ¨åˆ†åŠŸèƒ½åŸºäºæ­¤æ¥å£å®ç°</p><p><a target="_blank" rel="noopener" href="https://github.com/LunarG/gfxreconstruct/issues/990">https://github.com/LunarG/gfxreconstruct/issues/990</a></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="https://hustjjd.github.io">Davids</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://hustjjd.github.io/2025/01/04/Unreal%20Engine/Profile/UE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7/">https://hustjjd.github.io/2025/01/04/Unreal%20Engine/Profile/UE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://hustjjd.github.io" target="_blank">æœ‰ç‚¹ç¬¨æœ‰ç‚¹çŒª</a>ï¼</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/wechatpay.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/wechatpay.jpg" alt="å¾®ä¿¡"></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="../Unity%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%96%B9%E5%90%91/" title="Unityæ€§èƒ½ä¼˜åŒ–æ–¹å‘"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">Unityæ€§èƒ½ä¼˜åŒ–æ–¹å‘</div></div><div class="info-2"><div class="info-item-1">å¼•æ“ä¼˜åŒ– å¼•æ“æ¸²æŸ“ç®¡çº¿ç®€åŒ– å¼•æ“mipmapä¼˜åŒ– UIæ¸²æŸ“ç®¡çº¿åˆ†ç¦» Shaderå¼‚æ­¥ç¼–è¯‘ å¼•æ“åŠ¨ç”»UROä¼˜åŒ– å¼•æ“çº¿ç¨‹æ•°é‡å’Œå †æ ˆä¼˜åŒ– IL2CPPå…ƒæ•°æ®å»¶è¿Ÿè£…è½½ä¼˜åŒ– ç²’å­ç›¸æœºå¤–é€»è¾‘åˆ†å¸§ä¼˜åŒ– ç²’å­é¢ç‰‡CutOutä¼˜åŒ– é˜´å½±ç¼“å­˜ä¼˜åŒ– ä¸šåŠ¡ä¼˜åŒ– ç‰¹æ•ˆåŠ¨æ€è£å‰ªä¼˜åŒ– æˆ˜æ–—åŠ¨æ€é™æ¡£ä¼˜åŒ– èµ„æºLODä¼˜åŒ– UIå›¾é›†LODä¼˜åŒ– è¿·é›¾åˆ·æ–°åˆ†å±ä¼˜åŒ– ç›¸æœºå†…å¤–ç‰¹æ•ˆä¼˜åŒ– TMPé£˜å­—æ¸²æŸ“ä¼˜åŒ– å›¢æˆ˜éŸ³æ•ˆè£å‰ªä¼˜åŒ– é€»è¾‘åˆ†å¸§ä¼˜åŒ– è¡€æ¡åˆæ‰¹ä¼˜åŒ– å…¶ä»–ä¼˜åŒ– å‚å•†ç»‘æ ¸ä¸é™é¢‘ä¼˜åŒ– å‚å•†CPUè¶…é¢‘é€‚é…ä¼˜åŒ– ä¼˜åŒ–ç±»åˆ« èµ„äº§ LODï¼ˆç½‘æ ¼ã€çº¹ç†ã€ç‰¹æ•ˆã€éª¨éª¼ï¼‰ èµ„äº§å‰¥ç¦» é˜´å½± å®æ—¶é˜´å½±ç¼“å­˜ï¼ˆå±€éƒ¨æ›´æ–°ï¼‰ æŠ•å½±é˜´å½± é™æ€çƒ˜åŸ¹é˜´å½± çº¿ç¨‹ åŒé˜Ÿåˆ—åˆ‡æ¢ ç¯å½¢Buffæ— é” æ— é”å®¹å™¨ è¯»å†™é” å‡å°‘ä¸´ç•ŒåŒº è°ƒæ•´çº¿ç¨‹é—´å¡ç‚¹æ—¶é—´ ç‹¬ç«‹è®¡ç®—éƒ¨åˆ†æ‹†åˆ†æˆçº¿ç¨‹ ç»‘æ ¸ å‡å°‘å¼•æ“é€»è¾‘çº¿ç¨‹æ ˆå†…å­˜å¤§å° æ ¹æ®è®¾å¤‡é™åˆ¶jobçº¿ç¨‹æ•°é‡ ç½‘ç»œ å†—ä½™å‘é€ è°ƒæ•´çª—å£å¤§å° æ•°æ®åŒ…åˆ‡å‰² å‘åŒ…ç¼“å­˜ç­›é€‰æé«˜æ•ˆç‡ å¼±ç½‘é¢„è¡¨ç° UI å…³é—­IMGUI å®šåˆ¶å±‚çº§ å›¾é›†æ‹†åˆ† å›¾é›†LOD é¢„åˆ¶ä½“LOD åŠ¨é™åˆ†ç¦» é®ç½©æ›¿æ¢ èŠ‚ç‚¹å¤ç”¨ é•‚ç©ºç»˜åˆ¶å‡å°‘OverD...</div></div></div></a><a class="pagination-related no-desc" href="../../GamePlay/Replication/Significance%20Manager/" title="Significance Manager"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">Significance Manager</div></div></div></a></nav><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NTY3MS8zMjEzOA=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/404.jpg"' alt="avatar"></div><div class="author-info-name">Davids</div><div class="author-info-description">Be the hero in your mind.</div><div class="site-data"><a href="../archives/"><div class="headline">æ–‡ç« </div><div class="length-num">123</div></a><a href="../tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="../categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">60</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="../mailto:1173703591@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#hdhfbb"></i></a><a class="social-icon" href="../tencent:/message/?uin=1173703591&amp;Site=Sambow&amp;Menu=yes" target="_blank" title="QQ"><i class="fab fa-qq" style="color:#hdhfbb"></i></a><a class="social-icon" href="https://github.com/HUSTJJD" target="_blank" title="Github"><i class="fab fa-github" style="color:#hdhfbb"></i></a><a class="social-icon" href="https://space.bilibili.com/415384452/" target="_blank" title="Bilibili"><i class="fas fa-video" style="color:#hdhfbb"></i></a><a class="social-icon" href="https://blog.csdn.net/u014607601?spm=1010.2135.3001.5421" target="_blank" title="CSDN"><i class="fas fa-b" style="color:#hdhfbb"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">CPU</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">Unreal Insight</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">Unreal Profiler</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">Simpleperf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.1.</span> <span class="toc-text">Android Studio</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.2.</span> <span class="toc-text">Perfetto</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.4.</span> <span class="toc-text">CacheSim</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.5.</span> <span class="toc-text">Arm Streamline</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.6.</span> <span class="toc-text">XCode Timeprofiler</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.7.</span> <span class="toc-text">Best Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.7.1.</span> <span class="toc-text">å®ä¾‹äºŒï¼šå…¨å±€å˜é‡ä¸Cache Miss</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">GPU</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.1.</span> <span class="toc-text">Adreno GPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.2.</span> <span class="toc-text">Mali GPU</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.2.1.</span> <span class="toc-text">G77 GPU Countersä»‹ç»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.3.</span> <span class="toc-text">Android GPU Inspector (AGI)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.4.</span> <span class="toc-text">Metal GPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.5.</span> <span class="toc-text">Best Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.5.1.</span> <span class="toc-text">å®ä¾‹ä¸€ï¼šUE4.27 DirectX Shader Compiler Mobile åŠç²¾åº¦æ”¯æŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.5.2.</span> <span class="toc-text">å®ä¾‹äºŒï¼šä½¿ç”¨ Variable Rate Shading æ’ä»¶é™ä½ GPU è´Ÿè½½</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">å†…å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">å †å†…å­˜åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.1.</span> <span class="toc-text">Android Studio</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.2.</span> <span class="toc-text">LoliProfiler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.3.</span> <span class="toc-text">Custom Built Profiler</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">UE5 Memory Insights</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.4.</span> <span class="toc-text">Unity Mono å†…å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.5.</span> <span class="toc-text">Memreport</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.6.</span> <span class="toc-text">RHI Memory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.7.</span> <span class="toc-text">XCode Allocations</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.1.7.1.</span> <span class="toc-text">Instrument Allocations Helper</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">Best Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.1.</span> <span class="toc-text">æ¡ˆä¾‹ä¸€ï¼šè¿è¡Œæ—¶ç”Ÿæˆèµ„äº§çš„ Streaming æ”¯æŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.2.</span> <span class="toc-text">æ¡ˆä¾‹äºŒï¼šMeshé¡¶ç‚¹æ•°æ®çš„å½’ä¸€åŒ–å‹ç¼©</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">åŠŸè€—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.1.</span> <span class="toc-text">ç¡¬ä»¶æ–¹æ¡ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.1.1.</span> <span class="toc-text">ç”µæµè®¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.1.2.</span> <span class="toc-text">Wetestæ–¹æ¡ˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.2.</span> <span class="toc-text">è½¯ä»¶æ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.3.</span> <span class="toc-text">Best Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.3.1.</span> <span class="toc-text">æ¡ˆä¾‹ä¸€ï¼šé¢„è®¡ç®—é®æŒ¡å‰”é™¤ PVS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.3.2.</span> <span class="toc-text">æ¡ˆä¾‹äºŒï¼šFramepacing</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">åŒ…ä½“</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.1.</span> <span class="toc-text">SizeMap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.2.</span> <span class="toc-text">Unreal PakViewer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.3.</span> <span class="toc-text">Custom Built Profiler With CI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.4.</span> <span class="toc-text">Best Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">5.4.1.</span> <span class="toc-text">æ¡ˆä¾‹ä¸€ï¼šGLSLã€SPIRV Shaderæ•°æ®å‹ç¼©</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">ä»£ç å´©æºƒ &amp; ç¨³å®šæ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">6.1.</span> <span class="toc-text">Address Santizer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">6.2.</span> <span class="toc-text">StompAllocator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.2.1.</span> <span class="toc-text">æ¡ˆä¾‹ä¸€ï¼šStompAllocatorå´©æºƒåˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">6.3.</span> <span class="toc-text">Vulkan</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.3.1.</span> <span class="toc-text">Vulkan Validation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.3.2.</span> <span class="toc-text">Vulkan Command Replay</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../2025/08/09/README/" title="[object Object]">[object Object]</a><time datetime="2025-08-09T13:42:14.402Z" title="å‘è¡¨äº 2025-08-09 21:42:14">2025-08-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../2025/02/11/Unreal%20Engine/GamePlay/Replication/Optimization/" title="Optimization">Optimization</a><time datetime="2025-02-11T09:33:11.000Z" title="å‘è¡¨äº 2025-02-11 17:33:11">2025-02-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../2025/01/07/Work%20Experience/Z%20Reference%20Link/" title="Z Reference Link">Z Reference Link</a><time datetime="2025-01-07T03:05:26.000Z" title="å‘è¡¨äº 2025-01-07 11:05:26">2025-01-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../2025/01/07/Programing/Design%20Pattern/2%20Structural/8%20Summary/" title="8 Summary">8 Summary</a><time datetime="2025-01-07T03:05:10.000Z" title="å‘è¡¨äº 2025-01-07 11:05:10">2025-01-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="../2025/01/07/Programing/Design%20Pattern/2%20Structural/7%20Proxy/" title="7 Proxy">7 Proxy</a><time datetime="2025-01-07T03:05:04.000Z" title="å‘è¡¨äº 2025-01-07 11:05:04">2025-01-07</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/HUSTJJD/photos/background.webp)"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2025 By Davids</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="å‰å¾€è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="../../../../../../js/utils.js"></script><script src="../../../../../../js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(()=>{const t=()=>{if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typesetPromise();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"none"},chtml:{scale:1.1},options:{enableMenu:!0,renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const n=!!e.type.match(/; *mode=display/),a=new t.options.MathItem(e.textContent,t.inputJax[0],n),d=document.createTextNode("");e.parentNode.replaceChild(d,e),a.start={node:d,delim:"",n:0},a.end={node:d,delim:"",n:0},t.math.push(a)}},""]}}};const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}};btf.addGlobalFn("encrypt",t,"mathjax"),window.pjax?t():window.addEventListener("load",t)})()</script><script>(()=>{const e="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,o=(o,t)=>{var n,i,r,s;window.livereOptions={refer:t||location.pathname},e&&(window.shuoshuoComment.destroyLivere=()=>{o.children.length&&(o.innerHTML="",o.classList.add("no-comment"))}),"object"==typeof LivereTower?window.LivereTower.init():(n=document,i="script",s=n.getElementsByTagName(i)[0],"function"!=typeof LivereTower&&((r=n.createElement(i)).src="https://cdn-city.livere.com/js/embed.dist.js",r.async=!0,s.parentNode.insertBefore(r,s)))};e?window.shuoshuoComment={loadComment:o}:btf.loadComment(document.getElementById("lv-container"),o)})()</script></div><script>window.ChatraID="2020223045137@stu.scu.edu.cn",window.Chatra=window.Chatra||function(){(window.Chatra.q=window.Chatra.q||[]).push(arguments)},btf.getScript("https://call.chatra.io/chatra.js").then(()=>{})</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:description"]','link[rel="canonical"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!1,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach(e=>e())};document.addEventListener("pjax:send",()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)}),document.addEventListener("pjax:complete",()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),e(window.globalFn.pjaxComplete)}),document.addEventListener("pjax:error",e=>{if(404===e.request.status){!0?pjax.loadUrl("/404.html"):window.location.href="/404.html"}})})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="js/search/local-search.js"></script></div></div></body></html>