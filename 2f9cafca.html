<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><title>C++对象模型&nbsp;&nbsp;✦&nbsp; 有点笨有点猪</title><meta name="author" content="Davids"><meta name="keywords" content="Programing,C&amp;C++,Game AI"><meta name="description" content="实例化对象影响因素虚函数	由虚表指针指向，所有对象共享。非虚函数	所有对象共享。非静态数据成员	对象大小的决定因素静态函数	所有对象共享。静态数据成员
内存对齐	可以手动指定。32位、64位不同。
class Abstract &amp;#123;public:	Abstract(float value) : m_Value(value) &amp;#123;&amp;#125;	// 虚函数	virtual ~Abst"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="css/main.css"><script src="https://cdn.jsdelivr.net/npm/darkreader@4.9.58/darkreader.min.js"></script><script src="js/main.js"></script><script async>window.searchEngine="https://www.google.com/search?q=",window.homeHost="https://hustjjd.github.io"</script><script async reload src="https://cn.vercount.one/js"></script><meta name="generator" content="Hexo 7.3.0"></head><body><header id="header"><a id="title" href="index.html" class="logo"><img id="logo" src="https://cdn.jsdelivr.net/gh/HUSTJJD/photos/avatar.jpeg" alt="logo"> 有点笨有点猪</a><ul id="menu"><li class="menu-item"><a href="/about" class="menu-item-link">关于</a></li><li class="menu-item"><a href="https://github.com/HUSTJJD" class="menu-item-link item-icon" target="_blank"><i class="fa fa-github fa-2x"></i></a></li><li class="menu-item dark-mode"><a href="#" class="menu-item-link item-icon"><i class="fa fa-moon-o fa-2x"></i></a></li><script async>const localModel=localStorage.getItem("darkModel"),darkModel=localModel||0,darkModeIcon=document.querySelector("#menu .dark-mode i");1==darkModel&&(darkModeIcon.classList.replace("fa-moon-o","fa-sun-o"),DarkReader.enable({brightness:100,contrast:90,sepia:10})),darkModeIcon.addEventListener("click",()=>{const e=darkModeIcon.classList.contains("fa-moon-o");darkModeIcon.classList.toggle("fa-moon-o",!e),darkModeIcon.classList.toggle("fa-sun-o",e),localStorage.setItem("darkModel",e?1:0),e?DarkReader.enable({brightness:100,contrast:90,sepia:10}):DarkReader.disable()})</script></ul></header><script async>let startHeight=0;window.addEventListener("scroll",()=>{const{scrollY:t}=window,e=t-startHeight;startHeight=t,document.querySelector("#header").style.display=e>0&&t>50?"none":""})</script><div id="sidebar"><button id="sidebar-toggle" class="toggle"><i class="fa fa-arrow-right" aria-hidden="true"></i></button><div id="site-toc"><input id="search-input" class="search-input" type="search" placeholder="按回车全站搜索"><div id="tree"><ul><li class="directory"><a class="directory" href="65fc9bfe.html" title="/65fc9bfe.htm"><i class="fa fa-plus-square-o"></i> Base Knowledge</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="b391781d.html" title="/b391781d.htm"><i class="fa fa-plus-square-o"></i> Artificial Intelligence</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="1b9a8a71.html" title="/1b9a8a71.htm"><i class="fa fa-plus-square-o"></i> Generative AI</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="a92685b9.html" title="/a92685b9.htm"><i class="fa fa-plus-square-o"></i> Reinforcement Learning</a><div class="article-toc" style="display:none"></div></li></ul></li></ul><ul><li class="directory"><a class="directory" href="9aec7ab9.html" title="/9aec7ab9.htm"><i class="fa fa-plus-square-o"></i> Compilation Principle</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="9ddd6f57.html" title="/9ddd6f57.htm">1 Overview</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="8ce73ad1.html" title="/8ce73ad1.htm">2 Lexical Analysis</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="d66ea0d0.html" title="/d66ea0d0.htm">3 Syntax Analysis</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="cbe0860d.html" title="/cbe0860d.htm">4 Syntax-Directed Translation</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="302b356c.html" title="/302b356c.htm">5 Intermediate Code Generation</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="a90338dd.html" title="/a90338dd.htm"><i class="fa fa-plus-square-o"></i> Computer Graphics</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="fa3067f.html" title="/fa3067f.htm"><i class="fa fa-plus-square-o"></i> Animation</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="32a6bb76.html" title="/32a6bb76.htm">刚体</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="862df579.html" title="/862df579.htm">柔体</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="6a9b6571.html" title="/6a9b6571.htm">流体</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="2a5813d8.html" title="/2a5813d8.htm">质点-弹簧系统</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="6c246cfd.html" title="/6c246cfd.htm"><i class="fa fa-plus-square-o"></i> Geometry</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="95007b22.html" title="/95007b22.htm"><i class="fa fa-plus-square-o"></i> Rendering</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="5cb80169.html" title="/5cb80169.htm">Games101</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="c5b150d3.html" title="/c5b150d3.htm">Games102</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="151102e6.html" title="/151102e6.htm">实时光线追踪</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="af7a2452.html" title="/af7a2452.htm">实时全局光照</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="4bc335f8.html" title="/4bc335f8.htm">实时抗锯齿与超采样</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="3244508.html" title="/3244508.htm">实时渲染中的工业界技术</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="41600aa5.html" title="/41600aa5.htm">实时环境光照</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="f84f1a62.html" title="/f84f1a62.htm">实时阴影</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="e42b27d1.html" title="/e42b27d1.htm">实时高质量着色</a></li><div class="article-toc" style="display:none"></div></ul></li></ul></li></ul><ul><li class="directory"><a class="directory" href="acc2fc2f.html" title="/acc2fc2f.htm"><i class="fa fa-plus-square-o"></i> Computer Network</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="9ddd6f57.html" title="/9ddd6f57.htm">1 Overview</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="1d8aaf87.html" title="/1d8aaf87.htm">2 Application Layer</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="a9cf5148.html" title="/a9cf5148.htm">3 Transport Layer</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="f112baac.html" title="/f112baac.htm">4 Network Layer</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="adc18ede.html" title="/adc18ede.htm">5 Link Layer</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="f82e7011.html" title="/f82e7011.htm"><i class="fa fa-plus-square-o"></i> Computer Organization</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="73b8421c.html" title="/73b8421c.htm"><i class="fa fa-plus-square-o"></i> Data Structures & Algorithm</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="612f48da.html" title="/612f48da.htm"><i class="fa fa-plus-square-o"></i> Basic Algorithm</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="ce28987a.html" title="/ce28987a.htm">Binary Lifting</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="fbb0c1cd.html" title="/fbb0c1cd.htm">Binary Search</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="122d1b7f.html" title="/122d1b7f.htm">Enumerate</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="4a214119.html" title="/4a214119.htm">Greedy</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="f28955a2.html" title="/f28955a2.htm">Recursion & Divide and Conquer</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="f1165d1c.html" title="/f1165d1c.htm">Sort</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="bf1dd6df.html" title="/bf1dd6df.htm">前缀和 & 差分</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="71b19194.html" title="/71b19194.htm"><i class="fa fa-plus-square-o"></i> Dynamic Programming</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="a80d0031.html" title="/a80d0031.htm">动态规划</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="c8842ad8.html" title="/c8842ad8.htm"><i class="fa fa-plus-square-o"></i> Graph</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="18c42e2a.html" title="/18c42e2a.htm">Traverse</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="718acd86.html" title="/718acd86.htm"><i class="fa fa-plus-square-o"></i> Hash</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="a72bd85.html" title="/a72bd85.htm"><i class="fa fa-plus-square-o"></i> Linear</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="df95b584.html" title="/df95b584.htm"><i class="fa fa-plus-square-o"></i> Misc</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="9912b79f.html" title="/9912b79f.htm"><i class="fa fa-plus-square-o"></i> String</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="170cf1e2.html" title="/170cf1e2.htm"><i class="fa fa-plus-square-o"></i> Tree</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="18c42e2a.html" title="/18c42e2a.htm">Traverse</a></li><div class="article-toc" style="display:none"></div></ul></li></ul></li></ul><ul><li class="directory"><a class="directory" href="b1e67c3e.html" title="/b1e67c3e.htm"><i class="fa fa-plus-square-o"></i> Operating system</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="9ddd6f57.html" title="/9ddd6f57.htm">1 Overview</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="9a0a76fa.html" title="/9a0a76fa.htm">2 并发</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="adb041e9.html" title="/adb041e9.htm">3 虚拟化</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="cf62193d.html" title="/cf62193d.htm">4 内核</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="75c85a55.html" title="/75c85a55.htm">5 持久化</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="file"><a href="de94bfed.html" title="/de94bfed.htm">Z Reference Link</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="874b5a85.html" title="/874b5a85.htm"><i class="fa fa-plus-square-o"></i> Programing</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="f43812d6.html" title="/f43812d6.htm"><i class="fa fa-plus-square-o"></i> C&C++</a><div class="article-toc" style="display:none"></div><ul><li class="file active"><a href="" title="/2f9cafca.htm">C++对象模型</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="2ad255f1.html" title="/2ad255f1.htm">实现双端队列</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="38ea7f4b.html" title="/38ea7f4b.htm"><i class="fa fa-plus-square-o"></i> C#</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="ab0032e6.html" title="/ab0032e6.htm"><i class="fa fa-plus-square-o"></i> Code Style</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="c1fb7d19.html" title="/c1fb7d19.htm"><i class="fa fa-plus-square-o"></i> Cuda</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="4dbeaedc.html" title="/4dbeaedc.htm"><i class="fa fa-plus-square-o"></i> Design Pattern</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="71a8a1ac.html" title="/71a8a1ac.htm"><i class="fa fa-plus-square-o"></i> 1 Creational</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="b80dfb29.html" title="/b80dfb29.htm">1 Factory Method 工厂方法</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="274180fd.html" title="/274180fd.htm">2 Abstract Factory</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="8c35c344.html" title="/8c35c344.htm">3 Builder</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="7bfb464b.html" title="/7bfb464b.htm">4 Prototype</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="7c49fddd.html" title="/7c49fddd.htm">5 Singleton</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="dead4f21.html" title="/dead4f21.htm">6 Summary</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="1b56872e.html" title="/1b56872e.htm"><i class="fa fa-plus-square-o"></i> 2 Structural</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="6d3820f7.html" title="/6d3820f7.htm">1 Adapter</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="b26119ff.html" title="/b26119ff.htm">2 Bridge</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="c9a00474.html" title="/c9a00474.htm">3 Composite</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="ebfe19bc.html" title="/ebfe19bc.htm">4 Decorator</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="462eceee.html" title="/462eceee.htm">5 Facade</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="1369d00.html" title="/1369d00.htm">6 Flyweight</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="83955033.html" title="/83955033.htm">7 Proxy</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="166f94b3.html" title="/166f94b3.htm">8 Summary</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="7901957b.html" title="/7901957b.htm"><i class="fa fa-plus-square-o"></i> 3 Behavioral</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="790949b5.html" title="/790949b5.htm">1 Chain of Responsibility</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="2bc82489.html" title="/2bc82489.htm">10 Visitor</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="78952bdb.html" title="/78952bdb.htm">11 Interpreter</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="1f38bf3.html" title="/1f38bf3.htm">12 Summary</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="c3a3929a.html" title="/c3a3929a.htm">2 Command</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="9b6de4c4.html" title="/9b6de4c4.htm">3 Iterator</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="e03e130b.html" title="/e03e130b.htm">4 Mediator</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="bf71ebe9.html" title="/bf71ebe9.htm">5 Memento</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="3ade172.html" title="/3ade172.htm">6 Observer</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="53744b76.html" title="/53744b76.htm">7 State</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="924dd0cb.html" title="/924dd0cb.htm">8 Strategy</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="91bf0e85.html" title="/91bf0e85.htm">9 Template Method</a></li><div class="article-toc" style="display:none"></div></ul></li></ul></li></ul><ul><li class="directory"><a class="directory" href="ee3c71cb.html" title="/ee3c71cb.htm"><i class="fa fa-plus-square-o"></i> Lua</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="9ddd6f57.html" title="/9ddd6f57.htm">1 Overview</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="87d98dd.html" title="/87d98dd.htm">2 Lua 5.x精要总结</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="34f08ad.html" title="/34f08ad.htm">3 Lua GC</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="5b0b3532.html" title="/5b0b3532.htm">4 Lua 虚拟机</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="937a4025.html" title="/937a4025.htm">5 Lua 面向对象</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="a378bd8e.html" title="/a378bd8e.htm"><i class="fa fa-plus-square-o"></i> Python</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="9ddd6f57.html" title="/9ddd6f57.htm">1 Overview</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="41002d9e.html" title="/41002d9e.htm"><i class="fa fa-plus-square-o"></i> Rust</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="72e1e9b5.html" title="/72e1e9b5.htm">1 基础</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="84539df9.html" title="/84539df9.htm"><i class="fa fa-plus-square-o"></i> Shell</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="9ddd6f57.html" title="/9ddd6f57.htm">1 Overview</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="d044eab7.html" title="/d044eab7.htm"><i class="fa fa-plus-square-o"></i> TypeScript</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="9ddd6f57.html" title="/9ddd6f57.htm">1 Overview</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="file"><a href="de94bfed.html" title="/de94bfed.htm">Z Reference Link</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="1615fe67.html" title="/1615fe67.htm"><i class="fa fa-plus-square-o"></i> Unreal Engine</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="a7bb958f.html" title="/a7bb958f.htm"><i class="fa fa-plus-square-o"></i> AI</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="37cfb5e6.html" title="/37cfb5e6.htm"><i class="fa fa-plus-square-o"></i> BehaviorTree</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="152a818d.html" title="/152a818d.htm"><i class="fa fa-plus-square-o"></i> EnvironmentQuery</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="5c7b52be.html" title="/5c7b52be.htm"><i class="fa fa-plus-square-o"></i> NavMesh</a><div class="article-toc" style="display:none"></div></li></ul></li></ul><ul><li class="directory"><a class="directory" href="fa3067f.html" title="/fa3067f.htm"><i class="fa fa-plus-square-o"></i> Animation</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="73533dd2.html" title="/73533dd2.htm">动画状态机</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="5a353d10.html" title="/5a353d10.htm"><i class="fa fa-plus-square-o"></i> Asset&Pak&Patch</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="cbbf2a71.html" title="/cbbf2a71.htm"><i class="fa fa-plus-square-o"></i> Core</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="f2421617.html" title="/f2421617.htm">UObject</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="ad6468a3.html" title="/ad6468a3.htm"><i class="fa fa-plus-square-o"></i> Debug</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="608296a3.html" title="/608296a3.htm"><i class="fa fa-plus-square-o"></i> Editor Extension</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="51fc19ed.html" title="/51fc19ed.htm"><i class="fa fa-plus-square-o"></i> GamePlay</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="21270d9e.html" title="/21270d9e.htm"><i class="fa fa-plus-square-o"></i> Framwork</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="c4308202.html" title="/c4308202.htm">AGameModeBase</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="1c2d50fe.html" title="/1c2d50fe.htm">AGameStateBase</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="a131da00.html" title="/a131da00.htm"><i class="fa fa-plus-square-o"></i> Game Ability System</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="fad64f1c.html" title="/fad64f1c.htm">AGameplayCueNotify_Actor</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="b544f9e1.html" title="/b544f9e1.htm">FGameplayTag</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="321b2737.html" title="/321b2737.htm">UAbilitySystemComponent</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="c30a1442.html" title="/c30a1442.htm">UAbilityTask</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="76cb5781.html" title="/76cb5781.htm">UAttributeSet</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="4d5d44a8.html" title="/4d5d44a8.htm">UGameplayAbility</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="2303a7ba.html" title="/2303a7ba.htm">UGameplayEffect</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="d454ba70.html" title="/d454ba70.htm"><i class="fa fa-plus-square-o"></i> Replication</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="787d9e55.html" title="/787d9e55.htm">Optimization</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="2772613d.html" title="/2772613d.htm">Replication Graph</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="2d172444.html" title="/2d172444.htm">Significance Manager</a></li><div class="article-toc" style="display:none"></div></ul></li></ul></li></ul><ul><li class="directory"><a class="directory" href="178cde7f.html" title="/178cde7f.htm"><i class="fa fa-plus-square-o"></i> Physics</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="c024b29d.html" title="/c024b29d.htm"><i class="fa fa-plus-square-o"></i> Platform</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="87a1b898.html" title="/87a1b898.htm">Java Native Interface</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="64c729ef.html" title="/64c729ef.htm">Unreal Plugin Language</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="4eea9393.html" title="/4eea9393.htm"><i class="fa fa-plus-square-o"></i> Profile</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="3c5e942.html" title="/3c5e942.htm">UE性能优化工具</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="9e936415.html" title="/9e936415.htm">Unity性能优化方向</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="95007b22.html" title="/95007b22.htm"><i class="fa fa-plus-square-o"></i> Rendering</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="f68f03c7.html" title="/f68f03c7.htm"><i class="fa fa-plus-square-o"></i> Sounds</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="891542da.html" title="/891542da.htm"><i class="fa fa-plus-square-o"></i> UI</a><div class="article-toc" style="display:none"></div></li></ul><ul><li class="directory"><a class="directory" href="fc559f4f.html" title="/fc559f4f.htm"><i class="fa fa-plus-square-o"></i> UnLua</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="558c8778.html" title="/558c8778.htm">Unlua指南</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="c7be2e.html" title="/c7be2e.htm">Unlua源码解析</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="file"><a href="de94bfed.html" title="/de94bfed.htm">Z Reference Link</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="b4b1f7ab.html" title="/b4b1f7ab.htm"><i class="fa fa-plus-square-o"></i> Work Experience</a><div class="article-toc" style="display:none"></div><ul><li class="directory"><a class="directory" href="8f308499.html" title="/8f308499.htm"><i class="fa fa-plus-square-o"></i> Efficiency</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="7db1f54a.html" title="/7db1f54a.htm">UE Project Git Pull&Build</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="3cedb797.html" title="/3cedb797.htm"><i class="fa fa-plus-square-o"></i> Security</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="e4aff432.html" title="/e4aff432.htm">哈希函数</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="directory"><a class="directory" href="b7d46781.html" title="/b7d46781.htm"><i class="fa fa-plus-square-o"></i> Serialization</a><div class="article-toc" style="display:none"></div><ul><li class="file"><a href="cb358a7b.html" title="/cb358a7b.htm">Json</a></li><div class="article-toc" style="display:none"></div></ul><ul><li class="file"><a href="608ca7e8.html" title="/608ca7e8.htm">Protobuf</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="file"><a href="de94bfed.html" title="/de94bfed.htm">Z Reference Link</a></li><div class="article-toc" style="display:none"></div></ul></li></ul><ul><li class="file"><a href="77cd4175.html" title="/77cd4175.htm">README</a></li><div class="article-toc" style="display:none"></div></ul></div></div></div><div id="content"><h1 id="article-title">C++对象模型</h1><div class="article-meta"><span>Davids</span> <span>2025-08-10 05:05:12</span><div id="article-categories"><span>Categories：</span> <span><i class="fa fa-folder" aria-hidden="true"><a href="/categories/Programing/">Programing</a></i> ></span> <span><i class="fa fa-folder" aria-hidden="true"><a href="/categories/Programing/C-C/">C&C++</a></i></span> <span>Tags：</span></div></div><div id="article-content"><h1><span id="实例化对象">实例化对象</span></h1><h2><span id="影响因素">影响因素</span></h2><p>虚函数<br>由虚表指针指向，所有对象共享。<br>非虚函数<br>所有对象共享。<br>非静态数据成员<br>对象大小的决定因素<br>静态函数<br>所有对象共享。<br>静态数据成员</p><p>内存对齐<br>可以手动指定。32位、64位不同。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Abstract</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Abstract</span>(<span class="type">float</span> value) : <span class="built_in">m_Value</span>(value) &#123;&#125;</span><br><span class="line">	<span class="comment">// 虚函数</span></span><br><span class="line">	<span class="keyword">virtual</span> ~<span class="built_in">Abstract</span>() &#123;&#125;</span><br><span class="line">	<span class="comment">// 非虚函数</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetValue</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_Value; &#125;</span><br><span class="line">	<span class="comment">// 静态函数</span></span><br><span class="line">	<span class="function">Static Abstract* <span class="title">GetInstance</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">// 非静态数据成员</span></span><br><span class="line">	<span class="type">float</span> m_Value;</span><br><span class="line">	<span class="comment">// 静态数据成员</span></span><br><span class="line">	<span class="type">static</span> Abstract* m_Instance;</span><br><span class="line">&#125;;</span><br><span class="line">Abstract abstract;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, <span class="built_in">sizeof</span>(abstract)); </span><br><span class="line"><span class="comment">// 内存布局</span></span><br><span class="line"><span class="comment">// vptr</span></span><br><span class="line"><span class="comment">// float</span></span><br><span class="line"><span class="comment">// pad （或有）</span></span><br><span class="line"><span class="comment">// 64位 16 = 4(float) + 8（虚表指针） + 4(对齐)</span></span><br><span class="line"><span class="comment">// 32位  8 = 4(float) + 4（虚表指针）</span></span><br></pre></td></tr></table></figure><p>一个实例对象，包含 <strong>非静态数据成员、虚表指针、为内存对齐而必须的填充</strong>，<strong>静态数据成员、函数</strong>独立于实例对象。</p><h2><span id="空对象">空对象</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Empty</span>&#123;</span><br><span class="line">&#125;;</span><br><span class="line">Empty empty;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, <span class="built_in">sizeof</span>(empty)); <span class="comment">// 1</span></span><br><span class="line">Empty arr[<span class="number">3</span>]; <span class="comment">// 若sizeof(Empty)=0，则arr[0]、arr[1]、arr[2]地址相同</span></span><br><span class="line"><span class="comment">// 内存布局</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p><strong>地址唯一性要求​</strong>​ C++规定每个对象必须有唯一的地址。<strong>空类对象</strong>大小至少为<strong>1字节</strong>，只是为了区分实例对象。 空类大小为0会导致数组元素无法正确分隔。</p><h2><span id="空基类">空基类</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Empty &#123; </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> x; </span><br><span class="line">&#125;;</span><br><span class="line">Derived derived;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, <span class="built_in">sizeof</span>(derived)); <span class="comment">// 4，空基类不占用额外空间</span></span><br><span class="line"><span class="comment">// 内存布局</span></span><br><span class="line"><span class="comment">// int</span></span><br></pre></td></tr></table></figure><p>​**​空基类优化（Empty Base Optimization, EBO）**派生类的内存布局中，空基类与首个数据成员共享地址空间。</p><h1><span id="内存对齐">内存对齐</span></h1><h2><span id="手动指定">手动指定</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> pack(n) <span class="comment">// n 字节对齐</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> pack() <span class="comment">// 恢复默认</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> pack(1) <span class="comment">// 1 字节对齐 </span></span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">NetworkPacket</span> &#123; </span><br><span class="line">	<span class="type">uint8_t</span> type; </span><br><span class="line">	<span class="type">uint32_t</span> data; <span class="comment">// 紧邻 type，无填充 </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> pack() <span class="comment">// 恢复默认对齐</span></span></span><br><span class="line"><span class="built_in">sizeof</span>(NetworkPacket) = <span class="number">5</span></span><br></pre></td></tr></table></figure><p>手动修改内存对齐，作用域级别</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">__attribute__((<span class="built_in">aligned</span>(n)))  <span class="comment">// 单独设置 n 字节对齐，GCC/Clang 特有（非标准 C++）</span></span><br><span class="line"><span class="built_in">alignas</span>(n) <span class="comment">// C++11 标准提供</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体整体按 16 字节对齐 </span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Vector4f</span> __attribute__((<span class="built_in">aligned</span>(<span class="number">16</span>))) &#123; </span><br><span class="line">	<span class="type">float</span> x, y, z, w; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 单个成员按 8 字节对齐 </span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Data</span> &#123; </span><br><span class="line">	<span class="type">char</span> id; </span><br><span class="line">	<span class="type">int</span> value __attribute__((<span class="built_in">aligned</span>(<span class="number">8</span>))); </span><br><span class="line">&#125;;</span><br><span class="line">`Vector4f`地址为 <span class="number">16</span> 的倍数；`value`在 `Data`中的偏移为 <span class="number">8</span> 的倍数</span><br></pre></td></tr></table></figure><p>手动修改内存对齐，声明级别</p><h2><span id="非静态数据成员声明顺序与内存对齐">非静态数据成员声明顺序与内存对齐</span></h2><p>相同访问控制级别（<code>public protected private</code>），更 <code>靠后</code> 的成员有更 <code>高</code> 的地址。<br>即内存布局和声明顺序一致。<br>对于不同访问控制级别，未作规定，由编译器自行实现。但实际上编译器也是按声明顺序进行处理。</p><p>变量顺序会直接影响 <code>内存对齐</code>。</p><h1><span id="不含虚表的继承">不含虚表的继承</span></h1><h2><span id="单继承">单继承</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">	<span class="type">float</span> x;</span><br><span class="line">	<span class="type">short</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;</span><br><span class="line">	<span class="type">short</span> z;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">sizeof</span>(B); <span class="comment">// 12 = A(4 + 2 + 2(对齐）） + B(2 + 2(对齐))</span></span><br><span class="line"><span class="comment">// 顺序</span></span><br><span class="line"><span class="comment">// A</span></span><br><span class="line"><span class="comment">// B</span></span><br></pre></td></tr></table></figure><p>类之间单独计算内存对齐。<br>C++ 保证，出现在 derived class 中的 base class subobject 有其 <strong>完整原样性</strong>。<br>否则，大的 object 赋值给小的 object，会引发 object 切割，将 大的object 的 subobject 赋值给 小的 object。</p><h2><span id="多继承">多继承</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> A, <span class="keyword">public</span> B &#123;&#125;;</span><br><span class="line"><span class="comment">// 内存布局</span></span><br><span class="line"><span class="comment">// A</span></span><br><span class="line"><span class="comment">// B</span></span><br><span class="line"><span class="comment">// C</span></span><br></pre></td></tr></table></figure><h2><span id="多重继承">多重继承</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> A &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> B, <span class="keyword">public</span> C &#123;&#125;;</span><br><span class="line"><span class="comment">// 内存布局</span></span><br><span class="line"><span class="comment">// B::A</span></span><br><span class="line"><span class="comment">// B</span></span><br><span class="line"><span class="comment">// C::A</span></span><br><span class="line"><span class="comment">// C</span></span><br><span class="line"><span class="comment">// D</span></span><br><span class="line"><span class="comment">// 菱形继承（特例），访问A需要指明，但与多重继承一致</span></span><br></pre></td></tr></table></figure><h1><span id="含虚表的继承">含虚表的继承</span></h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">DoSomething</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">DoNothing</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NoVirtual</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="keyword">virtual</span> ~<span class="built_in">A</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 虚表结构</span></span><br><span class="line"><span class="comment">// vptr -&gt;  虚表</span></span><br><span class="line">			<span class="comment">// A_type_info</span></span><br><span class="line">			<span class="comment">// A::DoSomething</span></span><br><span class="line">			<span class="comment">// A::~A （类中声明的）</span></span><br><span class="line">			<span class="comment">// A::~A （编译器合成的，会调用上面的）</span></span><br><span class="line">			<span class="comment">// A::DoNothing</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">DoSomething</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 虚表结构</span></span><br><span class="line"><span class="comment">// vptr -&gt;  虚表</span></span><br><span class="line">			<span class="comment">// B_type_info</span></span><br><span class="line">			<span class="comment">// B::DoSomething</span></span><br><span class="line">			<span class="comment">// B::~A （类中声明的）</span></span><br><span class="line">			<span class="comment">// B::~A （编译器合成的，会调用上面的）</span></span><br><span class="line">			<span class="comment">// A::DoNothing</span></span><br><span class="line"><span class="comment">// 虚表调用过程</span></span><br><span class="line">(*ptr-&gt;vptr[n])(ptr)</span><br><span class="line"><span class="comment">// 菱形继承（特例），访问A需要指明，但与多重继承一致</span></span><br></pre></td></tr></table></figure><h1><span id="构造函数语义">构造函数语义</span></h1><h2><span id="默认构造生成规则">默认构造生成规则</span></h2><p>一些情况下，<code>编译会定义 默认构造、拷贝构造、移动构造、拷贝复制运算符、移动复制运算符、析构成员函数</code> 。</p><p>以下条件满足都满足时，编译器不会提供 <code>默认构造</code></p><ul><li>没有 <code>虚函数、虚基类</code><br>无需设置虚表</li><li>所有 <code>非静态数据成员</code> 都已经在声明时初始化<br>无需初始化值</li><li>所有 <code>直接继承的基类</code> 都没有默认构造函数<br>无需调用基类的构造</li><li>所有 <code>非静态的数据成员</code> 都没有默认构造<br>无需调用数据成员的构造</li></ul><h2><span id="基类和数据成员的初始化时机">基类和数据成员的初始化时机</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">	<span class="built_in">A</span>()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;</span><br><span class="line">	<span class="built_in">B</span>()&#123;</span><br><span class="line">		A::<span class="built_in">A</span>(<span class="keyword">this</span>);       <span class="comment">//由编译器扩充</span></span><br><span class="line">		A::<span class="built_in">A</span>(&amp;a);         <span class="comment">//由编译器扩充</span></span><br><span class="line">		std::<span class="built_in">string</span>(&amp;m_Str);  <span class="comment">//由编译器扩充</span></span><br><span class="line">		m_Str = <span class="string">&quot;m_Str&quot;</span>;          <span class="comment">//函数自定义</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">B</span>(<span class="type">const</span> std::string&amp; str) : <span class="built_in">m_Str</span>(str) &#123;</span><br><span class="line">		A::<span class="built_in">A</span>(<span class="keyword">this</span>);       <span class="comment">//由编译器扩充</span></span><br><span class="line">		A::<span class="built_in">A</span>(&amp;a);         <span class="comment">//由编译器扩充，按顺序（初始化成员列表的顺序问题）</span></span><br><span class="line">		<span class="built_in">m_Str</span>(std::<span class="built_in">string</span>(&amp;str));  <span class="comment">//由编译器扩充</span></span><br><span class="line">	&#125;</span><br><span class="line">	A a;</span><br><span class="line">	std::string m_Str;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>构造是，从 <code>低地址 -&gt; 高地址</code> 去构造</p><h2><span id="拷贝构造生成规则">拷贝构造生成规则</span></h2><p>以下条件均满足时，编译器不会实现 <code>拷贝构造、移动构造</code></p><ul><li>没有 <code>虚函数、虚基类</code><br>无需构造虚表</li><li><code>直接继承的基类</code> 没有拷贝构造<br>无需调用基类</li><li>所有 含 类对象（包括容器） 的 <code>非静态数据成员</code> 没有拷贝构造<br>无需调用成员的</li></ul><h1><span id="析构函数语义">析构函数语义</span></h1><h2><span id="析构函数生成规则">析构函数生成规则</span></h2><p>以下条件满足都满足时，编译器不会提供 <code>默认析构</code></p><ul><li>所有 含 类对象（包括容器） 的 <code>非静态数据成员</code> 没有析构<br>无需调用成员的析构</li><li>所有 <code>直接继承的基类</code> 析构<br>无需调用基类的析构</li></ul><p>数据成员 析构执行的顺序，与数据成员的 声明顺序 相反。<br>析构是，从 <code>高地址 -&gt; 低地址</code> 去析构。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; ~<span class="built_in">A</span>()&#123;&#125; &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123; ~<span class="built_in">B</span>()&#123;&#125; &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123; ~<span class="built_in">C</span>()&#123;</span><br><span class="line">	A a,</span><br><span class="line">	B b,</span><br><span class="line">&#125; &#125;;</span><br><span class="line"><span class="comment">// 顺序</span></span><br><span class="line"><span class="comment">// C::~C</span></span><br><span class="line"><span class="comment">// B::~B</span></span><br><span class="line"><span class="comment">// B::~B</span></span><br></pre></td></tr></table></figure><h1><span id="函数调用原理">函数调用原理</span></h1><h2><span id="全局函数">全局函数</span></h2><p><code>step1</code> 参数传递<br><code>step2</code> 调用函数<br><code>step3</code> 处理返回值</p><h2><span id="非静态非虚成员函数">非静态非虚成员函数</span></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; <span class="built_in">A</span>(...)&#123;&#125; &#125;</span><br><span class="line"><span class="comment">// 实际执行逻辑</span></span><br><span class="line">A::<span class="built_in">A</span>(&amp;a, ...) <span class="comment">// 隐式传递 this 指针</span></span><br></pre></td></tr></table></figure><p><code>step1</code> 参数传递<br><code>step2</code> 把对象的首地址作为参数，调用函数<br><code>step3</code> 处理返回值</p><h2><span id="构造函数-拷贝构造函数-析构函数-虚函数">构造函数、拷贝构造函数、析构函数、虚函数</span></h2><p><code>step1</code> 参数传递<br><code>step2</code> 虚表跳转<br><code>step3</code> 把对象的首地址作为参数，调用函数<br><code>step4</code> 处理返回值</p><div class="copyright-box"><div class="license-box"><div class="license-header"><div class="license-title">C++对象模型</div><div class="license-subTitle">https://hustjjd.github.io/2f9cafca.html</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div><a href="">Davids</a></div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2025年8月24日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名">BY - 署名</span></a></div></div></div></div></div></div><script async reload>fetch("https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/tokyo-night-dark.css").then(e=>e.text()).then(e=>{const l=document.createElement("style");e=e.replace(".hljs-code,","").replaceAll("_"," ").replaceAll("hljs-","hljs .").replaceAll(".hljs"," .highlight").replaceAll(".built in",".built_in").replaceAll("title.","");document.querySelectorAll("figure.highlight td.gutter").forEach(e=>{e.classList.add("highlight")}),l.innerHTML=e,document.head.appendChild(l)}).catch(e=>{console.error("Error loading CSS:",e)})</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css"><script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css"><script reload src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script><script reload>var targets=document.querySelectorAll("figure.highlight, #article-content > pre:not(.highlight,.hljs)");targets.forEach(e=>{const t=document.createElement("button");t.innerHTML='<i class="fa fa-clone" aria-hidden="true"></i>',t.className="code-copy",t.style.color="#fff",t.addEventListener("click",()=>{const n=e.querySelector("td.code")?.textContent||e.querySelector("code")?.textContent;navigator.clipboard.writeText(n).then(()=>{t.innerHTML="Copied!",setTimeout(()=>{t.innerHTML='<i class="fa fa-clone" aria-hidden="true"></i>'},2e3)})}),e.appendChild(t)})</script><div class="post-guide"><div class="item left"><a href="75c85a55.html"><i class="fa fa-angle-left" aria-hidden="true"></i> 5 持久化</a></div><div class="item right"><a href="87d98dd.html">2 Lua 5.x精要总结<i class="fa fa-angle-right" aria-hidden="true"></i></a></div></div></div><div id="footer"><div>©2024<span>-</span><span>2025</span> <a href="">Davids</a> <span id="busuanzi_container_site_pv">总访问量<span id="vercount_value_page_pv"></span></span> <span id="busuanzi_container_site_uv">总访客数<span id="vercount_value_site_pv"></span></span></div><div>Theme <a href="https://github.com/Exisi/hexo-theme-node-tree" target="_blank">Node-Tree</a> Powered by <a href="https://hexo.io" target="_blank">Hexo</a></div></div><button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button><script async>const topTopBtn=document.querySelector("#totop-toggle");topTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})</script></body></html>